(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78894,e=>{"use strict";let t=(0,e.i(75254).default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],78894)},87316,e=>{"use strict";let t=(0,e.i(75254).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},94179,e=>{"use strict";var t=e.i(43476),a=e.i(25913),s=e.i(47163);let r=(0,a.cva)("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:"border [border-color:var(--badge-outline)] shadow-xs"},size:{default:"",sm:"text-[10px] px-2 py-0"}},defaultVariants:{variant:"default",size:"default"}});function l({className:e,variant:a,size:l,...d}){return(0,t.jsx)("div",{className:(0,s.cn)(r({variant:a,size:l}),e),...d})}e.s(["Badge",()=>l])},25913,e=>{"use strict";var t=e.i(7670);let a=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,s=t.clsx;e.s(["cva",0,(e,t)=>r=>{var l;if((null==t?void 0:t.variants)==null)return s(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:d,defaultVariants:n}=t,i=Object.keys(d).map(e=>{let t=null==r?void 0:r[e],s=null==n?void 0:n[e];if(null===t)return null;let l=a(t)||a(s);return d[e][l]}),c=r&&Object.entries(r).reduce((e,t)=>{let[a,s]=t;return void 0===s||(e[a]=s),e},{});return s(e,i,null==t||null==(l=t.compoundVariants)?void 0:l.reduce((e,t)=>{let{class:a,className:s,...r}=t;return Object.entries(r).every(e=>{let[t,a]=e;return Array.isArray(a)?a.includes({...n,...c}[t]):({...n,...c})[t]===a})?[...e,a,s]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}])},70065,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(47163);let r=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",e),...a}));r.displayName="Card";let l=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...a}));l.displayName="CardHeader";let d=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a}));d.displayName="CardTitle",a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",e),...a})).displayName="CardDescription";let n=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",e),...a}));n.displayName="CardContent",a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>n,"CardHeader",()=>l,"CardTitle",()=>d])},91918,20783,e=>{"use strict";var t=e.i(71645);function a(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function s(...e){return t=>{let s=!1,r=e.map(e=>{let r=a(e,t);return s||"function"!=typeof r||(s=!0),r});if(s)return()=>{for(let t=0;t<r.length;t++){let s=r[t];"function"==typeof s?s():a(e[t],null)}}}}function r(...e){return t.useCallback(s(...e),e)}e.s(["composeRefs",()=>s,"useComposedRefs",()=>r],20783);var l=e.i(43476);function d(e){var a;let r,d=(a=e,(r=t.forwardRef((e,a)=>{let{children:r,...l}=e;if(t.isValidElement(r)){var d;let e,n,i=(d=r,(n=(e=Object.getOwnPropertyDescriptor(d.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?d.ref:(n=(e=Object.getOwnPropertyDescriptor(d,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?d.props.ref:d.props.ref||d.ref),c=function(e,t){let a={...t};for(let s in t){let r=e[s],l=t[s];/^on[A-Z]/.test(s)?r&&l?a[s]=(...e)=>{l(...e),r(...e)}:r&&(a[s]=r):"style"===s?a[s]={...r,...l}:"className"===s&&(a[s]=[r,l].filter(Boolean).join(" "))}return{...e,...a}}(l,r.props);return r.type!==t.Fragment&&(c.ref=a?s(a,i):i),t.cloneElement(r,c)}return t.Children.count(r)>1?t.Children.only(null):null})).displayName=`${a}.SlotClone`,r),n=t.forwardRef((e,a)=>{let{children:s,...r}=e,n=t.Children.toArray(s),i=n.find(o);if(i){let e=i.props.children,s=n.map(a=>a!==i?a:t.Children.count(e)>1?t.Children.only(null):t.isValidElement(e)?e.props.children:null);return(0,l.jsx)(d,{...r,ref:a,children:t.isValidElement(e)?t.cloneElement(e,void 0,s):null})}return(0,l.jsx)(d,{...r,ref:a,children:s})});return n.displayName=`${e}.Slot`,n}var n=d("Slot"),i=Symbol("radix.slottable");function c(e){let t=({children:e})=>(0,l.jsx)(l.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=i,t}function o(e){return t.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===i}e.s(["Slot",()=>n,"createSlot",()=>d,"createSlottable",()=>c],91918)},67881,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(91918),r=e.i(25913),l=e.i(47163);let d=(0,r.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:"border [border-color:var(--button-outline)] shadow-xs active:shadow-none",secondary:"border bg-secondary text-secondary-foreground border-secondary-border",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),n=a.forwardRef(({className:e,variant:a,size:r,asChild:n=!1,...i},c)=>{let o=n?s.Slot:"button";return(0,t.jsx)(o,{className:(0,l.cn)(d({variant:a,size:r,className:e})),ref:c,...i})});n.displayName="Button",e.s(["Button",()=>n,"buttonVariants",()=>d])},72520,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>t],72520)},91741,e=>{"use strict";let t=(0,e.i(75254).default)("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);e.s(["ClipboardList",()=>t],91741)},7913,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(38036),r=e.i(70065),l=e.i(67881),d=e.i(94179),n=e.i(22016),i=e.i(61911),c=e.i(78894),o=e.i(75254);let x=(0,o.default)("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);var m=e.i(40524),p=e.i(72520),u=e.i(7233),h=e.i(53210);function g(){let[e,s]=(0,a.useState)(null),[o,g]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{!async function(){let e=new Date().toISOString().split("T")[0],t=new Date(Date.now()+2592e6).toISOString().split("T")[0],a=new Date(Date.now()+7776e6).toISOString().split("T")[0],[r,l,d,n]=await Promise.all([h.supabase.from("employees").select("id, line",{count:"exact"}).eq("is_active",!0),h.supabase.from("person_events").select("id, due_date, category, employees:employee_id(line)").neq("status","completed"),h.supabase.from("employees").select("id").eq("is_active",!0).eq("employment_type","temporary").not("contract_end_date","is",null).lte("contract_end_date",a),h.supabase.from("hr_workflow_instances").select("id",{count:"exact"}).eq("status","active")]),i=l.data||[],c=0,o=0,x={};for(let a of i){if(!a.due_date)continue;let s=a.due_date<e,r=a.due_date>=e&&a.due_date<=t;s&&c++,r&&o++;let l=a.employees,d=l?.line||"Unassigned";x[d]||(x[d]={total:0,critical:0}),x[d].total++,(s||r)&&x[d].critical++}let m=r.data||[],p={};for(let e of m){let t=e.line||"Unassigned";p[t]=(p[t]||0)+1}let u=Object.entries(x).map(([e,t])=>({unitName:e,riskIndex:p[e]?t.critical/p[e]:0,criticalCount:t.critical})).sort((e,t)=>t.riskIndex-e.riskIndex).slice(0,5);s({totalHeadcount:r.count||0,overdueEvents:c,dueSoonEvents:o,expiringContracts:d.data?.length||0,openWorkflows:n.count||0,riskUnits:u}),g(!1)}()},[]),o)?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>(0,t.jsx)(r.Card,{children:(0,t.jsx)(r.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-3",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-24"}),(0,t.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-16"})]})})},e))}):e?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsx)(r.Card,{"data-testid":"card-headcount",children:(0,t.jsx)(r.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Active Headcount"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-1",children:e.totalHeadcount})]}),(0,t.jsx)(i.Users,{className:"h-8 w-8 text-blue-500"})]})})}),(0,t.jsx)(r.Card,{"data-testid":"card-compliance",children:(0,t.jsx)(r.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Compliance Risk"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)("span",{className:"text-3xl font-bold text-red-600 dark:text-red-400",children:e.overdueEvents}),(0,t.jsxs)("span",{className:"text-sm text-gray-400",children:["+",e.dueSoonEvents," soon"]})]})]}),(0,t.jsx)(c.AlertTriangle,{className:"h-8 w-8 text-red-500"})]})})}),(0,t.jsx)(r.Card,{"data-testid":"card-contracts",children:(0,t.jsx)(r.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Contracts Ending"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-orange-600 dark:text-orange-400 mt-1",children:e.expiringContracts}),(0,t.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Next 90 days"})]}),(0,t.jsx)(x,{className:"h-8 w-8 text-orange-500"})]})})}),(0,t.jsx)(r.Card,{"data-testid":"card-workflows",children:(0,t.jsx)(r.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Open Workflows"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400 mt-1",children:e.openWorkflows})]}),(0,t.jsx)(m.Workflow,{className:"h-8 w-8 text-purple-500"})]})})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(r.Card,{children:[(0,t.jsx)(r.CardHeader,{children:(0,t.jsx)(r.CardTitle,{className:"text-base",children:"Quick Actions"})}),(0,t.jsx)(r.CardContent,{children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsx)(n.default,{href:"/app/hr/workflows?action=start&template=sick_leave",children:(0,t.jsxs)(l.Button,{variant:"outline",className:"w-full justify-start gap-2",children:[(0,t.jsx)(u.Plus,{className:"h-4 w-4"}),"Sick Leave Follow-up"]})}),(0,t.jsx)(n.default,{href:"/app/hr/workflows?action=start&template=rehab",children:(0,t.jsxs)(l.Button,{variant:"outline",className:"w-full justify-start gap-2",children:[(0,t.jsx)(u.Plus,{className:"h-4 w-4"}),"Rehab Process"]})}),(0,t.jsx)(n.default,{href:"/app/hr/workflows?action=start&template=parental_leave",children:(0,t.jsxs)(l.Button,{variant:"outline",className:"w-full justify-start gap-2",children:[(0,t.jsx)(u.Plus,{className:"h-4 w-4"}),"Parental Leave"]})}),(0,t.jsx)(n.default,{href:"/app/hr/workflows?action=start&template=reboarding",children:(0,t.jsxs)(l.Button,{variant:"outline",className:"w-full justify-start gap-2",children:[(0,t.jsx)(u.Plus,{className:"h-4 w-4"}),"Reboarding"]})})]})})]}),(0,t.jsxs)(r.Card,{children:[(0,t.jsx)(r.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsx)(r.CardTitle,{className:"text-base",children:"Top Risk Units"}),(0,t.jsx)(n.default,{href:"/app/hr/analytics",children:(0,t.jsxs)(l.Button,{variant:"ghost",size:"sm",children:["View All ",(0,t.jsx)(p.ArrowRight,{className:"ml-1 h-4 w-4"})]})})]})}),(0,t.jsx)(r.CardContent,{children:0===e.riskUnits.length?(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No risk data available"}):(0,t.jsx)("div",{className:"space-y-3",children:e.riskUnits.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e.unitName}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:[e.criticalCount," events"]}),(0,t.jsxs)(d.Badge,{variant:e.riskIndex>=.5?"destructive":e.riskIndex>=.2?"default":"secondary",children:[(100*e.riskIndex).toFixed(0),"%"]})]})]},e.unitName))})})]})]})]}):null}var y=e.i(91741),j=e.i(87316);function f({user:e}){let[s,c]=(0,a.useState)(null),[o,x]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{!async function(){if(!e.employeeId)return x(!1);let t=new Date().toISOString().split("T")[0],a=new Date(Date.now()+12096e5).toISOString().split("T")[0],[s,r,l]=await Promise.all([h.supabase.from("employees").select("id, name",{count:"exact"}).eq("manager_id",e.employeeId).eq("is_active",!0),h.supabase.from("person_events").select("id, title, due_date, employees:employee_id(name)").eq("owner_manager_id",e.employeeId).neq("status","completed").order("due_date"),h.supabase.from("one_to_one_meetings").select("id, scheduled_at, status, employees:employee_id(name)").eq("manager_id",e.employeeId).in("status",["planned","in_progress"]).gte("scheduled_at",t).lte("scheduled_at",a).order("scheduled_at")]),d=r.data||[],n=d.filter(e=>e.due_date).map(e=>{let a=e.employees;return{id:e.id,title:e.title,employeeName:a?.name||"Unknown",dueDate:e.due_date,isOverdue:e.due_date<t}}).slice(0,5),i=(l.data||[]).map(e=>{let t=e.employees;return{id:e.id,employeeName:t?.name||"Unknown",scheduledAt:e.scheduled_at,status:e.status}}).slice(0,5);c({teamHeadcount:s.count||0,openTasks:d.length,upcomingMeetings:l.data?.length||0,criticalItems:n,meetings:i}),x(!1)}()},[e.employeeId]),o)?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[1,2,3].map(e=>(0,t.jsx)(r.Card,{children:(0,t.jsx)(r.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-3",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-24"}),(0,t.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-16"})]})})},e))}):s?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)(r.Card,{"data-testid":"card-team-headcount",children:(0,t.jsx)(r.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"My Team"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-1",children:s.teamHeadcount})]}),(0,t.jsx)(i.Users,{className:"h-8 w-8 text-blue-500"})]})})}),(0,t.jsx)(r.Card,{"data-testid":"card-open-tasks",children:(0,t.jsx)(r.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Open Tasks"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-orange-600 dark:text-orange-400 mt-1",children:s.openTasks})]}),(0,t.jsx)(y.ClipboardList,{className:"h-8 w-8 text-orange-500"})]})})}),(0,t.jsx)(r.Card,{"data-testid":"card-upcoming-meetings",children:(0,t.jsx)(r.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Upcoming 1:1s"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400 mt-1",children:s.upcomingMeetings}),(0,t.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Next 14 days"})]}),(0,t.jsx)(j.Calendar,{className:"h-8 w-8 text-purple-500"})]})})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(r.Card,{children:[(0,t.jsx)(r.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsx)(r.CardTitle,{className:"text-base",children:"Critical Items"}),(0,t.jsx)(n.default,{href:"/app/manager/risks",children:(0,t.jsxs)(l.Button,{variant:"ghost",size:"sm",children:["View All ",(0,t.jsx)(p.ArrowRight,{className:"ml-1 h-4 w-4"})]})})]})}),(0,t.jsx)(r.CardContent,{children:0===s.criticalItems.length?(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No critical items"}):(0,t.jsx)("div",{className:"space-y-3",children:s.criticalItems.map(e=>(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:e.title}),(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.employeeName})]}),(0,t.jsx)(d.Badge,{variant:e.isOverdue?"destructive":"default",children:e.isOverdue?"Overdue":e.dueDate})]},e.id))})})]}),(0,t.jsxs)(r.Card,{children:[(0,t.jsx)(r.CardHeader,{children:(0,t.jsx)("div",{className:"flex items-center justify-between gap-4",children:(0,t.jsx)(r.CardTitle,{className:"text-base",children:"My 1:1 Meetings"})})}),(0,t.jsx)(r.CardContent,{children:0===s.meetings.length?(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No upcoming meetings"}):(0,t.jsx)("div",{className:"space-y-3",children:s.meetings.map(e=>(0,t.jsx)(n.default,{href:`/app/one-to-ones/${e.id}`,children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4 p-2 rounded-md hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.employeeName}),(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(e.scheduledAt).toLocaleDateString("sv-SE")})]}),(0,t.jsx)(d.Badge,{variant:"secondary",children:e.status})]})},e.id))})})]})]})]}):(0,t.jsx)(r.Card,{children:(0,t.jsx)(r.CardContent,{className:"pt-6",children:(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No manager data available. Please ensure your account is linked to an employee profile."})})})}let v=(0,o.default)("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);var N=e.i(78583);let b=(0,o.default)("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);function w({user:e}){let[s,l]=(0,a.useState)(null),[n,i]=(0,a.useState)(!0);if((0,a.useEffect)(()=>{!async function(){if(!e.employeeId)return i(!1);let t=new Date().toISOString().split("T")[0],[a,s,r,d,n]=await Promise.all([h.supabase.from("person_events").select("id",{count:"exact"}).eq("employee_id",e.employeeId).in("category",["training","certificate"]).neq("status","completed").gte("due_date",t),h.supabase.from("one_to_one_meetings").select("id, scheduled_at, manager:manager_id(name)").eq("employee_id",e.employeeId).in("status",["planned","in_progress"]).gte("scheduled_at",t).order("scheduled_at").limit(1),h.supabase.from("person_events").select("id",{count:"exact"}).eq("employee_id",e.employeeId).neq("status","completed"),h.supabase.from("documents").select("id, title, type").eq("employee_id",e.employeeId).order("created_at",{ascending:!1}).limit(3),h.supabase.from("employee_skills").select("level, skills(name)").eq("employee_id",e.employeeId).order("level",{ascending:!1}).limit(5)]),c=s.data?.[0],o=null;if(c){let e=c.manager;o={id:c.id,scheduledAt:c.scheduled_at,managerName:e?.name||"Unknown"}}let x=(n.data||[]).map(e=>{let t=e.skills;return{skillName:t?.name||"Unknown",level:e.level}});l({upcomingTrainings:a.count||0,nextMeeting:o,openTasks:r.count||0,recentDocuments:d.data||[],topSkills:x}),i(!1)}()},[e.employeeId]),n)return(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[1,2,3].map(e=>(0,t.jsx)(r.Card,{children:(0,t.jsx)(r.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-3",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-24"}),(0,t.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-16"})]})})},e))});if(!s)return(0,t.jsx)(r.Card,{children:(0,t.jsx)(r.CardContent,{className:"pt-6",children:(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No employee data available. Please ensure your account is linked to an employee profile."})})});let c=["None","Basic","Intermediate","Advanced","Expert"];return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)(r.Card,{"data-testid":"card-trainings",children:(0,t.jsx)(r.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Upcoming Trainings"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400 mt-1",children:s.upcomingTrainings})]}),(0,t.jsx)(v,{className:"h-8 w-8 text-blue-500"})]})})}),(0,t.jsx)(r.Card,{"data-testid":"card-next-meeting",children:(0,t.jsx)(r.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Next 1:1"}),s.nextMeeting?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"text-lg font-bold text-gray-900 dark:text-white mt-1",children:new Date(s.nextMeeting.scheduledAt).toLocaleDateString("sv-SE")}),(0,t.jsxs)("p",{className:"text-xs text-gray-400",children:["with ",s.nextMeeting.managerName]})]}):(0,t.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"None scheduled"})]}),(0,t.jsx)(j.Calendar,{className:"h-8 w-8 text-purple-500"})]})})}),(0,t.jsx)(r.Card,{"data-testid":"card-tasks",children:(0,t.jsx)(r.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Open Tasks"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-orange-600 dark:text-orange-400 mt-1",children:s.openTasks})]}),(0,t.jsx)(y.ClipboardList,{className:"h-8 w-8 text-orange-500"})]})})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(r.Card,{children:[(0,t.jsx)(r.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(N.FileText,{className:"h-4 w-4 text-gray-400"}),(0,t.jsx)(r.CardTitle,{className:"text-base",children:"My Documents"})]})}),(0,t.jsx)(r.CardContent,{children:0===s.recentDocuments.length?(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No documents available"}):(0,t.jsx)("div",{className:"space-y-3",children:s.recentDocuments.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsx)("span",{className:"text-sm text-gray-900 dark:text-white truncate",children:e.title}),(0,t.jsx)(d.Badge,{variant:"secondary",children:e.type})]},e.id))})})]}),(0,t.jsxs)(r.Card,{children:[(0,t.jsx)(r.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(b,{className:"h-4 w-4 text-gray-400"}),(0,t.jsx)(r.CardTitle,{className:"text-base",children:"My Competencies"})]})}),(0,t.jsx)(r.CardContent,{children:0===s.topSkills.length?(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No competencies recorded"}):(0,t.jsx)("div",{className:"space-y-3",children:s.topSkills.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsx)("span",{className:"text-sm text-gray-900 dark:text-white",children:e.skillName}),(0,t.jsx)(d.Badge,{variant:"default",children:c[e.level]||`Level ${e.level}`})]},a))})})]})]})]})}function k(){let e,[r,l]=(0,a.useState)(null),[d,n]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{(0,s.getCurrentUser)().then(e=>{l(e),n(!1)})},[]),d)?(0,t.jsx)("div",{className:"p-8",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,t.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-48"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>(0,t.jsx)("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded"},e))})]})}):(0,t.jsxs)("div",{className:"p-8","data-testid":"dashboard-page",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(e=new Date().getHours())<12?"Good morning":e<18?"Good afternoon":"Good evening"}),(0,t.jsxs)("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:[(()=>{switch(r?.role){case"HR_ADMIN":return"HR Administrator";case"MANAGER":return"Manager";case"EMPLOYEE":return"Employee";default:return""}})()," Dashboard"]})]}),r?.role==="HR_ADMIN"&&(0,t.jsx)(g,{}),r?.role==="MANAGER"&&(0,t.jsx)(f,{user:r}),r?.role==="EMPLOYEE"&&(0,t.jsx)(w,{user:r}),!r?.role&&(0,t.jsx)("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"Unable to determine user role. Please contact support."})]})}e.s(["default",()=>k],7913)}]);