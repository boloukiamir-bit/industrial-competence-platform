(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78894,e=>{"use strict";let t=(0,e.i(75254).default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],78894)},91918,20783,e=>{"use strict";var t=e.i(71645);function a(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function s(...e){return t=>{let s=!1,r=e.map(e=>{let r=a(e,t);return s||"function"!=typeof r||(s=!0),r});if(s)return()=>{for(let t=0;t<r.length;t++){let s=r[t];"function"==typeof s?s():a(e[t],null)}}}}function r(...e){return t.useCallback(s(...e),e)}e.s(["composeRefs",()=>s,"useComposedRefs",()=>r],20783);var n=e.i(43476);function l(e){var a;let r,l=(a=e,(r=t.forwardRef((e,a)=>{let{children:r,...n}=e;if(t.isValidElement(r)){var l;let e,i,d=(l=r,(i=(e=Object.getOwnPropertyDescriptor(l.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?l.ref:(i=(e=Object.getOwnPropertyDescriptor(l,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?l.props.ref:l.props.ref||l.ref),c=function(e,t){let a={...t};for(let s in t){let r=e[s],n=t[s];/^on[A-Z]/.test(s)?r&&n?a[s]=(...e)=>{n(...e),r(...e)}:r&&(a[s]=r):"style"===s?a[s]={...r,...n}:"className"===s&&(a[s]=[r,n].filter(Boolean).join(" "))}return{...e,...a}}(n,r.props);return r.type!==t.Fragment&&(c.ref=a?s(a,d):d),t.cloneElement(r,c)}return t.Children.count(r)>1?t.Children.only(null):null})).displayName=`${a}.SlotClone`,r),i=t.forwardRef((e,a)=>{let{children:s,...r}=e,i=t.Children.toArray(s),d=i.find(o);if(d){let e=d.props.children,s=i.map(a=>a!==d?a:t.Children.count(e)>1?t.Children.only(null):t.isValidElement(e)?e.props.children:null);return(0,n.jsx)(l,{...r,ref:a,children:t.isValidElement(e)?t.cloneElement(e,void 0,s):null})}return(0,n.jsx)(l,{...r,ref:a,children:s})});return i.displayName=`${e}.Slot`,i}var i=l("Slot"),d=Symbol("radix.slottable");function c(e){let t=({children:e})=>(0,n.jsx)(n.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=d,t}function o(e){return t.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===d}e.s(["Slot",()=>i,"createSlot",()=>l,"createSlottable",()=>c],91918)},94179,e=>{"use strict";var t=e.i(43476),a=e.i(25913),s=e.i(47163);let r=(0,a.cva)("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:"border [border-color:var(--badge-outline)] shadow-xs"},size:{default:"",sm:"text-[10px] px-2 py-0"}},defaultVariants:{variant:"default",size:"default"}});function n({className:e,variant:a,size:n,...l}){return(0,t.jsx)("div",{className:(0,s.cn)(r({variant:a,size:n}),e),...l})}e.s(["Badge",()=>n])},25913,e=>{"use strict";var t=e.i(7670);let a=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,s=t.clsx;e.s(["cva",0,(e,t)=>r=>{var n;if((null==t?void 0:t.variants)==null)return s(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:l,defaultVariants:i}=t,d=Object.keys(l).map(e=>{let t=null==r?void 0:r[e],s=null==i?void 0:i[e];if(null===t)return null;let n=a(t)||a(s);return l[e][n]}),c=r&&Object.entries(r).reduce((e,t)=>{let[a,s]=t;return void 0===s||(e[a]=s),e},{});return s(e,d,null==t||null==(n=t.compoundVariants)?void 0:n.reduce((e,t)=>{let{class:a,className:s,...r}=t;return Object.entries(r).every(e=>{let[t,a]=e;return Array.isArray(a)?a.includes({...i,...c}[t]):({...i,...c})[t]===a})?[...e,a,s]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}])},70065,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(47163);let r=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",e),...a}));r.displayName="Card";let n=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...a}));n.displayName="CardHeader";let l=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a}));l.displayName="CardTitle",a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",e),...a})).displayName="CardDescription";let i=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",e),...a}));i.displayName="CardContent",a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>i,"CardHeader",()=>n,"CardTitle",()=>l])},30030,48425,e=>{"use strict";var t=e.i(71645),a=e.i(43476);function s(e,s){let r=t.createContext(s),n=e=>{let{children:s,...n}=e,l=t.useMemo(()=>n,Object.values(n));return(0,a.jsx)(r.Provider,{value:l,children:s})};return n.displayName=e+"Provider",[n,function(a){let n=t.useContext(r);if(n)return n;if(void 0!==s)return s;throw Error(`\`${a}\` must be used within \`${e}\``)}]}function r(e,s=[]){let n=[],l=()=>{let a=n.map(e=>t.createContext(e));return function(s){let r=s?.[e]||a;return t.useMemo(()=>({[`__scope${e}`]:{...s,[e]:r}}),[s,r])}};return l.scopeName=e,[function(s,r){let l=t.createContext(r),i=n.length;n=[...n,r];let d=s=>{let{scope:r,children:n,...d}=s,c=r?.[e]?.[i]||l,o=t.useMemo(()=>d,Object.values(d));return(0,a.jsx)(c.Provider,{value:o,children:n})};return d.displayName=s+"Provider",[d,function(a,n){let d=n?.[e]?.[i]||l,c=t.useContext(d);if(c)return c;if(void 0!==r)return r;throw Error(`\`${a}\` must be used within \`${s}\``)}]},function(...e){let a=e[0];if(1===e.length)return a;let s=()=>{let s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let r=s.reduce((t,{useScope:a,scopeName:s})=>{let r=a(e)[`__scope${s}`];return{...t,...r}},{});return t.useMemo(()=>({[`__scope${a.scopeName}`]:r}),[r])}};return s.scopeName=a.scopeName,s}(l,...s)]}e.s(["createContext",()=>s,"createContextScope",()=>r],30030);var n=e.i(74080),l=e.i(91918),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,s)=>{let r=(0,l.createSlot)(`Primitive.${s}`),n=t.forwardRef((e,t)=>{let{asChild:n,...l}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(n?r:s,{...l,ref:t})});return n.displayName=`Primitive.${s}`,{...e,[s]:n}},{});function d(e,t){e&&n.flushSync(()=>e.dispatchEvent(t))}e.s(["Primitive",()=>i,"dispatchDiscreteCustomEvent",()=>d],48425)},87316,e=>{"use strict";let t=(0,e.i(75254).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},3116,e=>{"use strict";let t=(0,e.i(75254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],3116)},87336,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(30030),r=e.i(48425),n="Progress",[l,i]=(0,s.createContextScope)(n),[d,c]=l(n),o=a.forwardRef((e,a)=>{var s,n;let{__scopeProgress:l,value:i=null,max:c,getValueLabel:o=x,...m}=e;(c||0===c)&&!f(c)&&console.error((s=`${c}`,`Invalid prop \`max\` of value \`${s}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let u=f(c)?c:100;null===i||v(i,u)||console.error((n=`${i}`,`Invalid prop \`value\` of value \`${n}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let y=v(i,u)?i:null,g=h(y)?o(y,u):void 0;return(0,t.jsx)(d,{scope:l,value:y,max:u,children:(0,t.jsx)(r.Primitive.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":h(y)?y:void 0,"aria-valuetext":g,role:"progressbar","data-state":p(y,u),"data-value":y??void 0,"data-max":u,...m,ref:a})})});o.displayName=n;var m="ProgressIndicator",u=a.forwardRef((e,a)=>{let{__scopeProgress:s,...n}=e,l=c(m,s);return(0,t.jsx)(r.Primitive.div,{"data-state":p(l.value,l.max),"data-value":l.value??void 0,"data-max":l.max,...n,ref:a})});function x(e,t){return`${Math.round(e/t*100)}%`}function p(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function h(e){return"number"==typeof e}function f(e){return h(e)&&!isNaN(e)&&e>0}function v(e,t){return h(e)&&!isNaN(e)&&e<=t&&e>=0}u.displayName=m;var y=e.i(47163);let g=a.forwardRef(({className:e,value:a,...s},r)=>(0,t.jsx)(o,{ref:r,className:(0,y.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...s,children:(0,t.jsx)(u,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})}));g.displayName=o.displayName,e.s(["Progress",()=>g],87336)},92553,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(70065),r=e.i(94179),n=e.i(87336),l=e.i(61911),i=e.i(78894),d=e.i(87316),c=e.i(25652),o=e.i(75254);let m=(0,o.default)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var u=e.i(17923),x=e.i(3116),p=e.i(98919);let h=(0,o.default)("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var f=e.i(40524),v=e.i(53210);async function y(){let e=new Date().toISOString().split("T")[0],t=new Date(Date.now()+2592e6).toISOString().split("T")[0],a=new Date(Date.now()+7776e6).toISOString().split("T")[0],[s,r,n,l,i,d]=await Promise.all([v.supabase.from("employees").select("id",{count:"exact",head:!0}).eq("is_active",!0),v.supabase.from("employees").select("id, name, role, employment_type, contract_end_date, line, team, org_unit_id").eq("is_active",!0),v.supabase.from("employees").select("id, name, role, contract_end_date").eq("is_active",!0).eq("employment_type","temporary").not("contract_end_date","is",null).lte("contract_end_date",a),v.supabase.from("person_events").select("id, category, status, due_date, employee_id, employees:employee_id(line, team)").neq("status","completed"),v.supabase.from("employee_skills").select("level, skills(name)").order("level"),v.supabase.from("absences").select("id, type, from_date, to_date")]),c=s.count||0,o=r.data||[],m={},u={};for(let e of o){let t=e.line||e.team||"Unassigned",a=e.employment_type||"unknown";m[t]||(m[t]={count:0,permanent:0,temporary:0,consultant:0}),m[t].count++,"permanent"===a?m[t].permanent++:"temporary"===a?m[t].temporary++:"consultant"===a&&m[t].consultant++,u[a]=(u[a]||0)+1}let x=Object.entries(m).map(([e,t])=>({orgUnitName:e,count:t.count,permanent:t.permanent,temporary:t.temporary,consultant:t.consultant})),p=Object.entries(u).map(([e,t])=>({type:e,count:t})),h=n.data||[],f=h.length,y=h.map(e=>({id:e.id,name:e.name,contractEndDate:e.contract_end_date,role:e.role||"Unknown"})),g=l.data||[],j={},N=0,b=0,C={};for(let a of g){if(!a.due_date)continue;let s=a.due_date<e,r=a.due_date>=e&&a.due_date<=t;s&&N++,r&&b++,(s||r)&&(j[a.category]=(j[a.category]||0)+1);let n=a.employees,l=Array.isArray(n)?n[0]:n,i=l?.line||l?.team||"Unassigned";C[i]||(C[i]={overdueCount:0,dueSoonCount:0}),s&&C[i].overdueCount++,r&&C[i].dueSoonCount++}let w=Object.entries(j).map(([e,t])=>({category:e,count:t})),k=Object.entries(m).map(([e,t])=>{let a=C[e]||{overdueCount:0,dueSoonCount:0},s=t.count>0?(a.overdueCount+a.dueSoonCount)/t.count:0;return{unitName:e,headcount:t.count,overdueCount:a.overdueCount,dueSoonCount:a.dueSoonCount,riskIndex:Math.round(100*s)/100}}).sort((e,t)=>t.riskIndex-e.riskIndex),_=d.data,S=!d.error&&null!==_,T=new Date,R=new Date(T.getTime()-2592e6),E=0;if(S){for(let e of _||[])if("sick"===e.type){let t=new Date(e.from_date),a=new Date(e.to_date);if(a>=R){let e=t<R?R:t;E+=Math.max(0,Math.ceil(((a>T?T:a).getTime()-e.getTime())/864e5)+1)}}}let D=c>0?E/(22*c)*100:0,A={};for(let e of i.data||[]){let t=e.skills,a=t?.name||"Unknown";A[a]||(A[a]=[0,0,0,0,0]);let s=e.level;s>=0&&s<=4&&A[a][s]++}return{totalHeadcount:c,headcountByOrgUnit:x,headcountByEmploymentType:p,sickLeaveRatio:Math.round(100*D)/100,temporaryContractsEndingSoon:f,temporaryContractsEndingList:y,criticalEventsCount:w,criticalEventsByStatus:{overdue:N,dueSoon:b},skillDistribution:Object.entries(A).slice(0,10).map(([e,t])=>({skillName:e,levels:t})),riskIndexByUnit:k,absencesAvailable:S}}async function g(){let e=await y(),t=new Date,[a,s,r]=await Promise.all([v.supabase.from("employees").select("id, name, start_date, employment_type, contract_end_date").eq("is_active",!0),v.supabase.from("hr_workflow_instances").select("template_id, template_name",{count:"exact"}).eq("status","active"),v.supabase.from("competence_requirements").select("line, skill_id, min_level, min_headcount, skills(name)")]),n=a.data||[],l={"0-1 years":0,"1-3 years":0,"3-5 years":0,"5-10 years":0,"10+ years":0},i=0,d=0,c=0,o=[];for(let e of n){let a=[],s=0;if(e.start_date){let r=new Date(e.start_date),n=(t.getTime()-r.getTime())/315576e5;i+=n,n<1?(l["0-1 years"]++,s+=1,n<.5&&(a.push("New employee (<6 months)"),s+=1)):n<3?l["1-3 years"]++:n<5?l["3-5 years"]++:n<10?l["5-10 years"]++:l["10+ years"]++}else l["0-1 years"]++;if("temporary"===e.employment_type&&(s+=1,a.push("Temporary contract"),e.contract_end_date)){let r=(new Date(e.contract_end_date).getTime()-t.getTime())/864e5;r<30?(s+=2,a.push("Contract ending within 30 days")):r<90&&(s+=1,a.push("Contract ending within 90 days"))}s>=3?(d++,o.push({id:e.id,name:e.name,riskLevel:"high",factors:a})):s>=2&&(c++,o.push({id:e.id,name:e.name,riskLevel:"medium",factors:a}))}let m=n.length>0?Math.round(i/n.length*10)/10:0,u={};for(let e of s.data||[]){let t=e.template_id;u[t]||(u[t]={name:e.template_name,count:0}),u[t].count++}let x=Object.entries(u).map(([e,t])=>({templateId:e,templateName:t.name,count:t.count})),p=0,h=0;return p=e.criticalEventsByStatus.overdue,h=e.criticalEventsByStatus.dueSoon,{...e,attritionRisk:{highrisk:d,mediumRisk:c,employees:o.slice(0,10)},tenureBands:Object.entries(l).map(([e,t])=>({band:e,count:t})),avgTenureYears:m,openWorkflowsByTemplate:x,skillGapSummary:{criticalGaps:p,trainingNeeded:h,wellStaffed:0}}}var j=e.i(38036);function N({title:e,value:a,icon:r,description:n,testId:l}){return(0,t.jsx)(s.Card,{children:(0,t.jsx)(s.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e}),(0,t.jsx)("p",{className:"text-3xl font-bold mt-1","data-testid":l,children:a}),n&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:n})]}),(0,t.jsx)("div",{className:"p-3 bg-primary/10 rounded-lg",children:(0,t.jsx)(r,{className:"h-6 w-6 text-primary"})})]})})})}function b(){let[e,o]=(0,a.useState)(null),[v,y]=(0,a.useState)(!0),[b,C]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{!async function(){let e=await (0,j.getCurrentUser)();if(!e||"HR_ADMIN"!==e.role){C(!1),y(!1);return}o(await g()),y(!1)}()},[]),v)?(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,t.jsx)("div",{className:"h-8 bg-muted rounded w-1/3"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>(0,t.jsx)("div",{className:"h-32 bg-muted rounded"},e))})]})}):b?e?(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold","data-testid":"text-page-title",children:"HR Analytics Dashboard"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Key workforce metrics and insights"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsx)(N,{title:"Total Headcount",value:e.totalHeadcount,icon:l.Users,description:"Active employees",testId:"metric-headcount"}),(0,t.jsx)(N,{title:"Sick Leave Rate",value:e.absencesAvailable?`${e.sickLeaveRatio}%`:"N/A",icon:m,description:e.absencesAvailable?"Last 30 days":"Data not available",testId:"metric-sick-leave"}),(0,t.jsx)(N,{title:"Contracts Ending",value:e.temporaryContractsEndingSoon,icon:d.Calendar,description:"Within 90 days",testId:"metric-contracts-ending"}),(0,t.jsx)(N,{title:"Critical Events",value:e.criticalEventsByStatus.overdue+e.criticalEventsByStatus.dueSoon,icon:i.AlertTriangle,description:`${e.criticalEventsByStatus.overdue} overdue, ${e.criticalEventsByStatus.dueSoon} due soon`,testId:"metric-critical-events"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)(s.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(l.Users,{className:"h-5 w-5"}),"Headcount by Unit & Employment Type"]})}),(0,t.jsx)(s.CardContent,{children:0===e.headcountByOrgUnit.length?(0,t.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"No data available"}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsx)("th",{className:"text-left py-2",children:"Unit"}),(0,t.jsx)("th",{className:"text-center py-2",children:"Perm"}),(0,t.jsx)("th",{className:"text-center py-2",children:"Temp"}),(0,t.jsx)("th",{className:"text-center py-2",children:"Cons"}),(0,t.jsx)("th",{className:"text-right py-2",children:"Total"})]})}),(0,t.jsx)("tbody",{children:e.headcountByOrgUnit.map(e=>(0,t.jsxs)("tr",{className:"border-b last:border-0",children:[(0,t.jsx)("td",{className:"py-2",children:e.orgUnitName}),(0,t.jsx)("td",{className:"text-center py-2",children:e.permanent}),(0,t.jsx)("td",{className:"text-center py-2",children:e.temporary}),(0,t.jsx)("td",{className:"text-center py-2",children:e.consultant}),(0,t.jsx)("td",{className:"text-right py-2 font-medium",children:e.count})]},e.orgUnitName))})]})})})]}),(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)(s.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(x.Clock,{className:"h-5 w-5"}),"Temporary Contracts Ending (90 days)"]})}),(0,t.jsx)(s.CardContent,{children:0===e.temporaryContractsEndingList.length?(0,t.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"No contracts ending soon"}):(0,t.jsx)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:e.temporaryContractsEndingList.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4 py-2 border-b last:border-0",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.role})]}),(0,t.jsx)(r.Badge,{variant:"outline",children:new Date(e.contractEndDate).toLocaleDateString("sv-SE")})]},e.id))})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)(s.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(i.AlertTriangle,{className:"h-5 w-5"}),"Critical Events by Category"]})}),(0,t.jsx)(s.CardContent,{children:0===e.criticalEventsCount.length?(0,t.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"No critical events"}):(0,t.jsx)("div",{className:"space-y-3",children:e.criticalEventsCount.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsx)("span",{className:"text-sm capitalize",children:e.category.replace(/_/g," ")}),(0,t.jsx)(r.Badge,{variant:e.count>5?"destructive":e.count>2?"default":"secondary",children:e.count})]},e.category))})})]}),(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)(s.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(p.Shield,{className:"h-5 w-5"}),"People Risk Index by Unit"]})}),(0,t.jsx)(s.CardContent,{children:0===e.riskIndexByUnit.length?(0,t.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"No data available"}):(0,t.jsx)("div",{className:"space-y-3",children:e.riskIndexByUnit.slice(0,8).map(e=>{var a;return(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium truncate",children:e.unitName}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.overdueCount," overdue, ",e.dueSoonCount," due soon / ",e.headcount," staff"]})]}),(0,t.jsx)(r.Badge,{variant:(a=e.riskIndex)>=.5?"destructive":a>=.2?"default":"secondary",children:e.riskIndex.toFixed(2)})]},e.unitName)})})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)(s.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(c.TrendingUp,{className:"h-5 w-5"}),"Employment Type Distribution"]})}),(0,t.jsx)(s.CardContent,{children:0===e.headcountByEmploymentType.length?(0,t.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"No data available"}):(0,t.jsx)("div",{className:"space-y-3",children:e.headcountByEmploymentType.map(a=>(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsx)("span",{className:"text-sm capitalize",children:a.type}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.Progress,{value:a.count/e.totalHeadcount*100,className:"w-24 h-2"}),(0,t.jsx)("span",{className:"text-sm font-medium w-8 text-right",children:a.count})]})]},a.type))})})]}),(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)(s.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(u.BarChart3,{className:"h-5 w-5"}),"Skill Level Distribution"]})}),(0,t.jsx)(s.CardContent,{children:0===e.skillDistribution.length?(0,t.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"No skills data"}):(0,t.jsx)("div",{className:"space-y-4",children:e.skillDistribution.slice(0,5).map(e=>(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium mb-1",children:e.skillName}),(0,t.jsx)("div",{className:"flex items-center gap-1",children:e.levels.map((e,a)=>(0,t.jsx)("div",{className:"flex-1 bg-muted rounded text-center text-xs py-1",title:`Level ${a}: ${e} employees`,children:e>0?e:"-"},a))}),(0,t.jsx)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[0,1,2,3,4].map(e=>(0,t.jsxs)("div",{className:"flex-1 text-center",children:["L",e]},e))})]},e.skillName))})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)(s.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(h,{className:"h-5 w-5"}),"Attrition Risk"]})}),(0,t.jsxs)(s.CardContent,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-6 mb-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-3xl font-bold text-red-600 dark:text-red-400","data-testid":"metric-attrition-high",children:e.attritionRisk.highrisk}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"High Risk"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-3xl font-bold text-orange-600 dark:text-orange-400","data-testid":"metric-attrition-medium",children:e.attritionRisk.mediumRisk}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Medium Risk"})]})]}),e.attritionRisk.employees.length>0&&(0,t.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:e.attritionRisk.employees.slice(0,5).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2 py-1 border-b last:border-0",children:[(0,t.jsx)("span",{className:"text-sm",children:e.name}),(0,t.jsx)(r.Badge,{variant:"high"===e.riskLevel?"destructive":"default",children:e.factors[0]})]},e.id))})]})]}),(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)(s.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(x.Clock,{className:"h-5 w-5"}),"Tenure Distribution"]})}),(0,t.jsxs)(s.CardContent,{children:[(0,t.jsx)("div",{className:"flex items-center gap-4 mb-4",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-3xl font-bold","data-testid":"metric-avg-tenure",children:e.avgTenureYears}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Avg. Years"})]})}),(0,t.jsx)("div",{className:"space-y-2",children:e.tenureBands.map(a=>(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsx)("span",{className:"text-sm",children:a.band}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.Progress,{value:a.count/e.totalHeadcount*100,className:"w-24 h-2"}),(0,t.jsx)("span",{className:"text-sm font-medium w-8 text-right",children:a.count})]})]},a.band))})]})]})]}),e.openWorkflowsByTemplate.length>0&&(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)(s.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(f.Workflow,{className:"h-5 w-5"}),"Active Workflows by Type"]})}),(0,t.jsx)(s.CardContent,{children:(0,t.jsx)("div",{className:"flex flex-wrap gap-4",children:e.openWorkflowsByTemplate.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm",children:e.templateName}),(0,t.jsx)(r.Badge,{variant:"secondary",children:e.count})]},e.templateId))})})]}),!e.absencesAvailable&&(0,t.jsx)(s.Card,{children:(0,t.jsxs)(s.CardContent,{className:"py-8 text-center",children:[(0,t.jsx)(m,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Sick leave analytics coming soon - awaiting absences data integration."})]})})]}):(0,t.jsx)("div",{className:"p-6",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"Unable to load analytics"})}):(0,t.jsx)("div",{className:"p-6",children:(0,t.jsx)(s.Card,{children:(0,t.jsxs)(s.CardContent,{className:"py-12 text-center",children:[(0,t.jsx)(i.AlertTriangle,{className:"h-12 w-12 text-destructive mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Access Denied"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"This page is only accessible to HR Administrators."})]})})})}e.s(["default",()=>b],92553)}]);