(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7233,e=>{"use strict";let t=(0,e.i(75254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},72520,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>t],72520)},92790,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(18566),s=e.i(68934),o=e.i(53210),n=e.i(7486),d=e.i(7233),i=e.i(72520),l=e.i(31278);function c(){let{memberships:e,isLoading:c,selectOrg:u,refreshMemberships:g}=(0,s.useOrg)(),m=(0,a.useRouter)(),[x,h]=(0,r.useState)(!1),[p,f]=(0,r.useState)(!1),[b,j]=(0,r.useState)(null),[y,v]=(0,r.useState)(""),[N,w]=(0,r.useState)(""),C=async e=>{e.preventDefault(),j(null),f(!0);try{let{data:{session:e}}=await o.supabase.auth.getSession();if(!e?.access_token){j("Not authenticated"),f(!1);return}let t=await fetch("/api/org/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.access_token}`},body:JSON.stringify({name:y,slug:N})}),r=await t.json();if(!t.ok){j(r.error||"Failed to create organization"),f(!1);return}await g(),u(r.organization.id),m.push("/app")}catch(e){console.error("Create org error:",e),j("Failed to create organization"),f(!1)}},k=e=>e.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").substring(0,50);return c?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background","data-testid":"loading-orgs",children:(0,t.jsx)(l.Loader2,{className:"w-6 h-6 animate-spin text-muted-foreground"})}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:(0,t.jsxs)("div",{className:"w-full max-w-md space-y-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(n.Building2,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),(0,t.jsx)("h1",{className:"text-2xl font-semibold text-foreground","data-testid":"text-page-title",children:"Select Organization"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2",children:"Choose an organization to continue"})]}),e.length>0&&(0,t.jsx)("div",{className:"space-y-2",children:e.map(e=>(0,t.jsxs)("button",{onClick:()=>{u(e.org_id),m.push("/app")},className:"w-full p-4 rounded-lg border border-border bg-card hover-elevate flex items-center justify-between group","data-testid":`button-select-org-${e.org_id}`,children:[(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("div",{className:"font-medium text-foreground",children:e.organization?.name}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:e.role.charAt(0).toUpperCase()+e.role.slice(1)})]}),(0,t.jsx)(i.ArrowRight,{className:"w-5 h-5 text-muted-foreground group-hover:text-foreground transition-colors"})]},e.org_id))}),(0,t.jsx)("div",{className:"border-t border-border pt-6",children:x?(0,t.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"org-name",className:"block text-sm font-medium text-foreground mb-1",children:"Organization Name"}),(0,t.jsx)("input",{id:"org-name",type:"text",value:y,onChange:e=>{v(e.target.value),N&&N!==k(y)||w(k(e.target.value))},placeholder:"Acme Corporation",className:"w-full px-3 py-2 rounded-md border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring",required:!0,"data-testid":"input-org-name"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"org-slug",className:"block text-sm font-medium text-foreground mb-1",children:"URL Slug"}),(0,t.jsx)("input",{id:"org-slug",type:"text",value:N,onChange:e=>w(k(e.target.value)),placeholder:"acme-corp",className:"w-full px-3 py-2 rounded-md border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring",required:!0,pattern:"^[a-z0-9-]+$","data-testid":"input-org-slug"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Lowercase letters, numbers, and hyphens only"})]}),b&&(0,t.jsx)("p",{className:"text-sm text-destructive","data-testid":"text-error",children:b}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{h(!1),j(null)},className:"flex-1 px-4 py-2 rounded-md border border-border text-foreground hover-elevate","data-testid":"button-cancel-create",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:p,className:"flex-1 px-4 py-2 rounded-md bg-primary text-primary-foreground hover-elevate disabled:opacity-50 flex items-center justify-center gap-2","data-testid":"button-create-org",children:p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Loader2,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):"Create"})]})]}):(0,t.jsxs)("button",{onClick:()=>h(!0),className:"w-full p-4 rounded-lg border border-dashed border-border hover-elevate flex items-center justify-center gap-2 text-muted-foreground hover:text-foreground","data-testid":"button-show-create-org",children:[(0,t.jsx)(d.Plus,{className:"w-5 h-5"}),"Create New Organization"]})})]})})}e.s(["default",()=>c])}]);