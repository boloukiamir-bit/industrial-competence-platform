{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/supabaseClient.ts"],"sourcesContent":["import { createClient, SupabaseClient } from \"@supabase/supabase-js\";\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || \"\";\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || \"\";\n\nfunction createSupabaseClient(): SupabaseClient {\n  if (!supabaseUrl || !supabaseAnonKey) {\n    if (typeof window === \"undefined\" && process.env.NODE_ENV === \"production\") {\n      console.warn(\n        \"Supabase environment variables not set. \" +\n        \"Please ensure NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY are configured.\"\n      );\n    }\n  }\n  return createClient(supabaseUrl || \"https://placeholder.supabase.co\", supabaseAnonKey || \"placeholder\");\n}\n\nexport const supabase: SupabaseClient = createSupabaseClient();\n\nexport function getSupabaseClient(): SupabaseClient {\n  if (!supabaseUrl || !supabaseAnonKey) {\n    throw new Error(\n      \"Missing Supabase environment variables. \" +\n      \"Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY.\"\n    );\n  }\n  return supabase;\n}\n"],"names":[],"mappings":";;;;;;AAEoB;AAFpB;;AAEA,MAAM,cAAc,gFAAwC;AAC5D,MAAM,kBAAkB,wPAA6C;AAErE,SAAS;IACP;;IAQA,OAAO,IAAA,0LAAY,EAAC,eAAe,mCAAmC,mBAAmB;AAC3F;AAEO,MAAM,WAA2B;AAEjC,SAAS;IACd;;IAMA,OAAO;AACT"}},
    {"offset": {"line": 33, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/app/handbooks/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { BookOpen, FileText, ExternalLink } from \"lucide-react\";\nimport { supabase } from \"@/lib/supabaseClient\";\nimport type { Document } from \"@/types/domain\";\n\nexport default function HandbooksPage() {\n  const [documents, setDocuments] = useState<Document[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    async function loadHandbooks() {\n      const { data, error } = await supabase\n        .from(\"documents\")\n        .select(\"*\")\n        .in(\"type\", [\"employee_handbook\", \"manager_handbook\", \"handbook\"])\n        .order(\"title\");\n\n      if (!error && data) {\n        setDocuments(\n          data.map((row) => ({\n            id: row.id,\n            employeeId: row.employee_id,\n            title: row.title,\n            type: row.type,\n            url: row.url,\n            createdAt: row.created_at,\n            validTo: row.valid_to,\n          }))\n        );\n      }\n      setLoading(false);\n    }\n    loadHandbooks();\n  }, []);\n\n  const employeeHandbooks = documents.filter((d) => d.type === \"employee_handbook\" || (d.type === \"handbook\" && d.title.toLowerCase().includes(\"employee\")));\n  const managerHandbooks = documents.filter((d) => d.type === \"manager_handbook\" || (d.type === \"handbook\" && d.title.toLowerCase().includes(\"manager\")));\n  const otherHandbooks = documents.filter((d) => !employeeHandbooks.includes(d) && !managerHandbooks.includes(d));\n\n  if (loading) {\n    return (\n      <div className=\"p-6\">\n        <div className=\"animate-pulse space-y-4\">\n          <div className=\"h-8 bg-gray-200 dark:bg-gray-700 rounded w-48\" />\n          <div className=\"h-64 bg-gray-200 dark:bg-gray-700 rounded\" />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6\">\n      <div className=\"flex items-center gap-3 mb-6\">\n        <BookOpen className=\"h-6 w-6 text-gray-600 dark:text-gray-400\" />\n        <h1 className=\"text-2xl font-semibold text-gray-900 dark:text-white\">\n          Digital Handbooks\n        </h1>\n      </div>\n\n      {documents.length === 0 ? (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-8 text-center\">\n          <BookOpen className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n          <p className=\"text-gray-500 dark:text-gray-400\">No handbooks available</p>\n        </div>\n      ) : (\n        <div className=\"space-y-8\">\n          {employeeHandbooks.length > 0 && (\n            <section>\n              <h2 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\n                Employee Handbooks\n              </h2>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {employeeHandbooks.map((doc) => (\n                  <HandbookCard key={doc.id} document={doc} />\n                ))}\n              </div>\n            </section>\n          )}\n\n          {managerHandbooks.length > 0 && (\n            <section>\n              <h2 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\n                Manager Handbooks\n              </h2>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {managerHandbooks.map((doc) => (\n                  <HandbookCard key={doc.id} document={doc} />\n                ))}\n              </div>\n            </section>\n          )}\n\n          {otherHandbooks.length > 0 && (\n            <section>\n              <h2 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\n                Other Handbooks\n              </h2>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {otherHandbooks.map((doc) => (\n                  <HandbookCard key={doc.id} document={doc} />\n                ))}\n              </div>\n            </section>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction HandbookCard({ document }: { document: Document }) {\n  return (\n    <a\n      href={document.url}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      className=\"block bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 hover:border-blue-300 dark:hover:border-blue-700 transition-colors\"\n      data-testid={`link-handbook-${document.id}`}\n    >\n      <div className=\"flex items-start gap-3\">\n        <div className=\"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg\">\n          <FileText className=\"h-5 w-5 text-blue-600 dark:text-blue-400\" />\n        </div>\n        <div className=\"flex-1 min-w-0\">\n          <h3 className=\"font-medium text-gray-900 dark:text-white truncate\">\n            {document.title}\n          </h3>\n          <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">\n            Added {new Date(document.createdAt).toLocaleDateString()}\n          </p>\n        </div>\n        <ExternalLink className=\"h-4 w-4 text-gray-400 flex-shrink-0\" />\n      </div>\n    </a>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}