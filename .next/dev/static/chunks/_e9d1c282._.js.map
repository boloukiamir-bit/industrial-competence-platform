{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/supabaseClient.ts"],"sourcesContent":["import { createClient, SupabaseClient } from \"@supabase/supabase-js\";\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || \"\";\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || \"\";\n\nfunction createSupabaseClient(): SupabaseClient {\n  const hasCredentials = supabaseUrl && supabaseAnonKey;\n  \n  if (!hasCredentials) {\n    console.warn(\n      \"Supabase environment variables not set. \" +\n      \"Please ensure NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY are configured.\",\n      { urlSet: !!supabaseUrl, keySet: !!supabaseAnonKey }\n    );\n  }\n  \n  return createClient(\n    supabaseUrl || \"https://placeholder.supabase.co\", \n    supabaseAnonKey || \"placeholder\"\n  );\n}\n\nexport const supabase: SupabaseClient = createSupabaseClient();\n\nexport function getSupabaseClient(): SupabaseClient {\n  if (!supabaseUrl || !supabaseAnonKey) {\n    throw new Error(\n      \"Missing Supabase environment variables. \" +\n      \"Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY.\"\n    );\n  }\n  return supabase;\n}\n"],"names":[],"mappings":";;;;;;AAEoB;AAFpB;;AAEA,MAAM,cAAc,gFAAwC;AAC5D,MAAM,kBAAkB,wPAA6C;AAErE,SAAS;IACP,MAAM,iBAAiB,eAAe;IAEtC;;IAQA,OAAO,IAAA,0LAAY,EACjB,eAAe,mCACf,mBAAmB;AAEvB;AAEO,MAAM,WAA2B;AAEjC,SAAS;IACd;;IAMA,OAAO;AACT"}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/services/auth.ts"],"sourcesContent":["import { supabase } from \"@/lib/supabaseClient\";\n\nexport async function signInWithEmail(email: string, password: string) {\n  const { data, error } = await supabase.auth.signInWithPassword({\n    email,\n    password,\n  });\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function signOut() {\n  const { error } = await supabase.auth.signOut();\n  if (error) throw error;\n}\n\nexport async function getAuthUser() {\n  const { data, error } = await supabase.auth.getUser();\n  if (error) return null;\n  return data.user;\n}\n\nexport async function getSession() {\n  const { data, error } = await supabase.auth.getSession();\n  if (error) return null;\n  return data.session;\n}\n\nexport function onAuthStateChange(callback: (event: string, session: unknown) => void) {\n  return supabase.auth.onAuthStateChange(callback);\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;AAEO,eAAe,gBAAgB,KAAa,EAAE,QAAgB;IACnE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,oIAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC;QAC7D;QACA;IACF;IAEA,IAAI,OAAO,MAAM;IACjB,OAAO;AACT;AAEO,eAAe;IACpB,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,oIAAQ,CAAC,IAAI,CAAC,OAAO;IAC7C,IAAI,OAAO,MAAM;AACnB;AAEO,eAAe;IACpB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,oIAAQ,CAAC,IAAI,CAAC,OAAO;IACnD,IAAI,OAAO,OAAO;IAClB,OAAO,KAAK,IAAI;AAClB;AAEO,eAAe;IACpB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,oIAAQ,CAAC,IAAI,CAAC,UAAU;IACtD,IAAI,OAAO,OAAO;IAClB,OAAO,KAAK,OAAO;AACrB;AAEO,SAAS,kBAAkB,QAAmD;IACnF,OAAO,oIAAQ,CAAC,IAAI,CAAC,iBAAiB,CAAC;AACzC"}},
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/login/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { signInWithEmail, getSession } from '@/services/auth';\n\nexport default function LoginPage() {\n  const router = useRouter();\n  const [email, setEmail] = useState('admin@nadiplan.test');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [errorMsg, setErrorMsg] = useState<string | null>(null);\n  const [checkingSession, setCheckingSession] = useState(true);\n\n  useEffect(() => {\n    async function checkExistingSession() {\n      try {\n        const session = await getSession();\n        if (session?.user) {\n          router.replace('/app/hr/tasks');\n        } else {\n          setCheckingSession(false);\n        }\n      } catch (err) {\n        console.error('Session check failed:', err);\n        setCheckingSession(false);\n      }\n    }\n    checkExistingSession();\n  }, [router]);\n\n  async function handleSubmit(e: React.FormEvent) {\n    e.preventDefault();\n    setErrorMsg(null);\n    setLoading(true);\n\n    try {\n      await signInWithEmail(email, password);\n      router.replace('/app/hr/tasks');\n    } catch (error: unknown) {\n      console.error(error);\n      let message = 'Failed to sign in.';\n      if (error instanceof Error) {\n        if (error.message === 'Failed to fetch' || error.message.includes('NetworkError')) {\n          message = 'Unable to connect to authentication service. Please try again in a moment.';\n        } else if (error.message.includes('placeholder')) {\n          message = 'Authentication service is not configured. Please contact support.';\n        } else {\n          message = error.message;\n        }\n      }\n      setErrorMsg(message);\n      setLoading(false);\n    }\n  }\n\n  if (checkingSession) {\n    return (\n      <main className=\"hr-page\" style={{ maxWidth: 420, margin: '0 auto', paddingTop: 80 }}>\n        <p className=\"hr-page__subtitle\">Loading...</p>\n      </main>\n    );\n  }\n\n  return (\n    <main className=\"hr-page\" style={{ maxWidth: 420, margin: '0 auto', paddingTop: 80 }}>\n      <h1 className=\"hr-page__title\">Sign in</h1>\n      <p className=\"hr-page__subtitle\">\n        Use your Nadiplan account to access HR dashboards.\n      </p>\n\n      <form onSubmit={handleSubmit} className=\"hr-card\" style={{ marginTop: 16 }}>\n        <div className=\"hr-form-field\">\n          <label className=\"hr-form-label\">Email</label>\n          <input\n            type=\"email\"\n            className=\"hr-input\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            autoComplete=\"email\"\n            required\n            data-testid=\"input-email\"\n          />\n        </div>\n\n        <div className=\"hr-form-field\">\n          <label className=\"hr-form-label\">Password</label>\n          <input\n            type=\"password\"\n            className=\"hr-input\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            autoComplete=\"current-password\"\n            required\n            data-testid=\"input-password\"\n          />\n        </div>\n\n        {errorMsg && (\n          <p className=\"hr-error\" style={{ marginTop: 8 }} data-testid=\"error-message\">\n            {errorMsg}\n          </p>\n        )}\n\n        <button\n          type=\"submit\"\n          className=\"hr-button hr-button--primary\"\n          disabled={loading}\n          style={{ marginTop: 12, width: '100%' }}\n          data-testid=\"button-signin\"\n        >\n          {loading ? 'Signing inâ€¦' : 'Sign in'}\n        </button>\n      </form>\n    </main>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMe,SAAS;;IACtB,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAgB;IACxD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAC;IAEvD,IAAA,0KAAS;+BAAC;YACR,eAAe;gBACb,IAAI;oBACF,MAAM,UAAU,MAAM,IAAA,iIAAU;oBAChC,IAAI,SAAS,MAAM;wBACjB,OAAO,OAAO,CAAC;oBACjB,OAAO;wBACL,mBAAmB;oBACrB;gBACF,EAAE,OAAO,KAAK;oBACZ,QAAQ,KAAK,CAAC,yBAAyB;oBACvC,mBAAmB;gBACrB;YACF;YACA;QACF;8BAAG;QAAC;KAAO;IAEX,eAAe,aAAa,CAAkB;QAC5C,EAAE,cAAc;QAChB,YAAY;QACZ,WAAW;QAEX,IAAI;YACF,MAAM,IAAA,sIAAe,EAAC,OAAO;YAC7B,OAAO,OAAO,CAAC;QACjB,EAAE,OAAO,OAAgB;YACvB,QAAQ,KAAK,CAAC;YACd,IAAI,UAAU;YACd,IAAI,iBAAiB,OAAO;gBAC1B,IAAI,MAAM,OAAO,KAAK,qBAAqB,MAAM,OAAO,CAAC,QAAQ,CAAC,iBAAiB;oBACjF,UAAU;gBACZ,OAAO,IAAI,MAAM,OAAO,CAAC,QAAQ,CAAC,gBAAgB;oBAChD,UAAU;gBACZ,OAAO;oBACL,UAAU,MAAM,OAAO;gBACzB;YACF;YACA,YAAY;YACZ,WAAW;QACb;IACF;IAEA,IAAI,iBAAiB;QACnB,qBACE,6LAAC;YAAK,WAAU;YAAU,OAAO;gBAAE,UAAU;gBAAK,QAAQ;gBAAU,YAAY;YAAG;sBACjF,cAAA,6LAAC;gBAAE,WAAU;0BAAoB;;;;;;;;;;;IAGvC;IAEA,qBACE,6LAAC;QAAK,WAAU;QAAU,OAAO;YAAE,UAAU;YAAK,QAAQ;YAAU,YAAY;QAAG;;0BACjF,6LAAC;gBAAG,WAAU;0BAAiB;;;;;;0BAC/B,6LAAC;gBAAE,WAAU;0BAAoB;;;;;;0BAIjC,6LAAC;gBAAK,UAAU;gBAAc,WAAU;gBAAU,OAAO;oBAAE,WAAW;gBAAG;;kCACvE,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAM,WAAU;0CAAgB;;;;;;0CACjC,6LAAC;gCACC,MAAK;gCACL,WAAU;gCACV,OAAO;gCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gCACxC,cAAa;gCACb,QAAQ;gCACR,eAAY;;;;;;;;;;;;kCAIhB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAM,WAAU;0CAAgB;;;;;;0CACjC,6LAAC;gCACC,MAAK;gCACL,WAAU;gCACV,OAAO;gCACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;gCAC3C,cAAa;gCACb,QAAQ;gCACR,eAAY;;;;;;;;;;;;oBAIf,0BACC,6LAAC;wBAAE,WAAU;wBAAW,OAAO;4BAAE,WAAW;wBAAE;wBAAG,eAAY;kCAC1D;;;;;;kCAIL,6LAAC;wBACC,MAAK;wBACL,WAAU;wBACV,UAAU;wBACV,OAAO;4BAAE,WAAW;4BAAI,OAAO;wBAAO;wBACtC,eAAY;kCAEX,UAAU,gBAAgB;;;;;;;;;;;;;;;;;;AAKrC;GA9GwB;;QACP,kJAAS;;;KADF"}}]
}