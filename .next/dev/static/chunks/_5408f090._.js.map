{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/services/competence.ts"],"sourcesContent":["// services/competence.ts\nimport { supabase } from \"@/lib/supabaseClient\";\n\nexport type EmployeeCompetenceItem = {\n  competenceId: string;\n  competenceName: string;\n  competenceCode: string | null;\n  groupName: string | null;\n  requiredLevel: number | null;\n  mandatory: boolean;\n  employeeLevel: number | null;\n  validTo: string | null;\n  status: \"OK\" | \"RISK\" | \"N/A\";\n  riskReason: string | null;\n  isSafetyCritical: boolean;\n};\n\nexport type EmployeeCompetenceSummary = {\n  riskLevel: \"LOW\" | \"MEDIUM\" | \"HIGH\";\n  gapCount: number;\n  totalRequired: number;\n  coveragePercent: number; // 0–100\n  expiredCount: number;\n};\n\nexport type EmployeeCompetenceProfile = {\n  employee: {\n    id: string;\n    name: string;\n    positionName: string | null;\n  };\n  summary: EmployeeCompetenceSummary;\n  items: EmployeeCompetenceItem[];\n};\n\nexport type PositionSummary = {\n  id: string;\n  name: string;\n  site: string | null;\n  department: string | null;\n};\n\nexport type SimpleEmployee = {\n  id: string;\n  name: string;\n};\n\nexport type MatrixColumn = {\n  competenceId: string;\n  label: string;\n  groupName: string | null;\n  requiredLevel: number | null;\n};\n\nexport type MatrixCellStatus = 'OK' | 'RISK' | 'N/A';\n\nexport type MatrixRow = {\n  employeeId: string;\n  employeeName: string;\n  riskLevel: 'LOW' | 'MEDIUM' | 'HIGH';\n  items: {\n    competenceId: string;\n    status: MatrixCellStatus;\n    level: number | null;\n  }[];\n};\n\nexport async function getAllPositions(): Promise<PositionSummary[]> {\n  const { data, error } = await supabase\n    .from('positions')\n    .select('id, name, site, department')\n    .order('name', { ascending: true });\n\n  if (error) throw error;\n  return (data ?? []) as PositionSummary[];\n}\n\nexport async function getEmployeesForPosition(positionId: string): Promise<SimpleEmployee[]> {\n  const { data, error } = await supabase\n    .from('employees')\n    .select('id, name')\n    .eq('position_id', positionId);\n\n  if (error) throw error;\n\n  return (data ?? []).map((row: any) => ({\n    id: row.id,\n    name: row.name ?? 'Employee',\n  }));\n}\n\ntype EmployeeRow = {\n  id: string;\n  name?: string | null;\n  position_id?: string | null;\n};\n\ntype RequirementRow = {\n  id: string;\n  position_id: string;\n  competence_id: string;\n  required_level: number;\n  mandatory: boolean;\n};\n\ntype EmployeeCompetenceRow = {\n  id: string;\n  employee_id: string;\n  competence_id: string;\n  level: number;\n  valid_from: string | null;\n  valid_to: string | null;\n};\n\ntype CompetenceRow = {\n  id: string;\n  name: string;\n  description?: string | null;\n  code?: string | null;\n  group_id?: string | null;\n  is_safety_critical: boolean;\n};\n\ntype GroupRow = {\n  id: string;\n  name: string;\n};\n\nexport async function getEmployeeCompetenceProfile(\n  employeeId: string,\n  effectiveDate?: string\n): Promise<EmployeeCompetenceProfile> {\n  // Use provided date or default to today\n  const effectiveDateStr =\n    effectiveDate ?? new Date().toISOString().slice(0, 10);\n\n  // 1) Employee\n  const { data: employeeRow, error: empError } = await supabase\n    .from(\"employees\")\n    .select(\"id, name, position_id\")\n    .eq(\"id\", employeeId)\n    .single<EmployeeRow>();\n\n  if (empError || !employeeRow) {\n    console.error(empError);\n    throw empError ?? new Error(\"Employee not found\");\n  }\n\n  const employeeName = employeeRow.name ?? \"Employee\";\n\n  // 2) Position (optional)\n  let positionName: string | null = null;\n  const positionId = employeeRow.position_id ?? null;\n\n  if (positionId) {\n    const { data: posRows } = await supabase\n      .from(\"positions\")\n      .select(\"id, name\")\n      .eq(\"id\", positionId)\n      .limit(1);\n\n    const pos = posRows?.[0] as { id: string; name: string } | undefined;\n    if (pos) {\n      positionName = pos.name;\n    }\n  }\n\n  // 3) Requirements for this position\n  let requirementRows: RequirementRow[] = [];\n  if (positionId) {\n    const { data: reqData, error: reqError } = await supabase\n      .from(\"position_competence_requirements\")\n      .select(\"id, position_id, competence_id, required_level, mandatory\")\n      .eq(\"position_id\", positionId);\n\n    if (reqError) {\n      console.error(reqError);\n      throw reqError;\n    }\n    requirementRows = (reqData ?? []) as RequirementRow[];\n  }\n\n  // 4) Employee competences\n  const { data: empCompData, error: empCompError } = await supabase\n    .from(\"employee_competences\")\n    .select(\"id, employee_id, competence_id, level, valid_from, valid_to\")\n    .eq(\"employee_id\", employeeId);\n\n  if (empCompError) {\n    console.error(empCompError);\n    throw empCompError;\n  }\n\n  const employeeCompRows = (empCompData ?? []) as EmployeeCompetenceRow[];\n  const empCompByCompetenceId = new Map<string, EmployeeCompetenceRow>();\n  for (const row of employeeCompRows) {\n    empCompByCompetenceId.set(row.competence_id, row);\n  }\n\n  // 5) Load all involved competences + groups\n  const competenceIds = new Set<string>();\n  requirementRows.forEach((r) => competenceIds.add(r.competence_id));\n  employeeCompRows.forEach((r) => competenceIds.add(r.competence_id));\n\n  const competencesById = new Map<\n    string,\n    CompetenceRow & { groupName: string | null }\n  >();\n\n  if (competenceIds.size > 0) {\n    const { data: compData, error: compError } = await supabase\n      .from(\"competences\")\n      .select(\"id, name, description, code, group_id, is_safety_critical\")\n      .in(\"id\", Array.from(competenceIds));\n\n    if (compError) {\n      console.error(compError);\n      throw compError;\n    }\n\n    const comps = (compData ?? []) as CompetenceRow[];\n\n    const groupIds = new Set<string>();\n    comps.forEach((c) => {\n      if (c.group_id) groupIds.add(c.group_id);\n    });\n\n    let groupById = new Map<string, string>();\n    if (groupIds.size > 0) {\n      const { data: groupData, error: groupError } = await supabase\n        .from(\"competence_groups\")\n        .select(\"id, name\")\n        .in(\"id\", Array.from(groupIds));\n\n      if (groupError) {\n        console.error(groupError);\n      } else {\n        (groupData ?? []).forEach((g) => {\n          const gr = g as GroupRow;\n          groupById.set(gr.id, gr.name);\n        });\n      }\n    }\n\n    comps.forEach((c) => {\n      competencesById.set(c.id, {\n        ...c,\n        groupName: c.group_id ? (groupById.get(c.group_id) ?? null) : null,\n      });\n    });\n  }\n\n  function isExpired(validTo: string | null): boolean {\n    if (!validTo) return false;\n    return validTo < effectiveDateStr;\n  }\n\n  const items: EmployeeCompetenceItem[] = [];\n  let totalRequired = 0;\n  let gapCount = 0;\n  let expiredCount = 0;\n\n  const usedCompetenceIds = new Set<string>();\n\n  // 6) Build items for all requirements (rollkrav)\n  for (const req of requirementRows) {\n    const compInfo = competencesById.get(req.competence_id);\n    if (!compInfo) continue;\n\n    const empComp = empCompByCompetenceId.get(req.competence_id) ?? null;\n\n    let status: \"OK\" | \"RISK\" | \"N/A\" = \"N/A\";\n    let riskReason: string | null = null;\n    let empLevel: number | null = empComp ? empComp.level : null;\n    const validTo = empComp?.valid_to ?? null;\n\n    if (req.mandatory) {\n      totalRequired += 1;\n\n      if (!empComp) {\n        status = \"RISK\";\n        riskReason = \"Saknar kompetens\";\n        gapCount += 1;\n      } else if (isExpired(validTo)) {\n        status = \"RISK\";\n        riskReason = \"Utgången giltighet\";\n        gapCount += 1;\n        expiredCount += 1;\n      } else if (empLevel! < req.required_level) {\n        status = \"RISK\";\n        riskReason = \"För låg nivå\";\n        gapCount += 1;\n      } else {\n        status = \"OK\";\n      }\n    } else {\n      // ej obligatorisk men definierad\n      status = empComp ? \"OK\" : \"N/A\";\n    }\n\n    items.push({\n      competenceId: compInfo.id,\n      competenceName: compInfo.name,\n      competenceCode: compInfo.code ?? null,\n      groupName: compInfo.groupName,\n      requiredLevel: req.required_level,\n      mandatory: req.mandatory,\n      employeeLevel: empLevel,\n      validTo,\n      status,\n      riskReason,\n      isSafetyCritical: compInfo.is_safety_critical,\n    });\n\n    usedCompetenceIds.add(compInfo.id);\n  }\n\n  // 7) Extra kompetenser som inte finns i rollkraven (nice-to-have / historik)\n  for (const empComp of employeeCompRows) {\n    if (usedCompetenceIds.has(empComp.competence_id)) continue;\n    const compInfo = competencesById.get(empComp.competence_id);\n    if (!compInfo) continue;\n\n    items.push({\n      competenceId: compInfo.id,\n      competenceName: compInfo.name,\n      competenceCode: compInfo.code ?? null,\n      groupName: compInfo.groupName,\n      requiredLevel: null,\n      mandatory: false,\n      employeeLevel: empComp.level,\n      validTo: empComp.valid_to,\n      status: isExpired(empComp.valid_to) ? \"RISK\" : \"N/A\",\n      riskReason: isExpired(empComp.valid_to) ? \"Utgången giltighet\" : null,\n      isSafetyCritical: compInfo.is_safety_critical,\n    });\n  }\n\n  // 8) Summary / risk score\n  const coveragePercent =\n    totalRequired === 0\n      ? 100\n      : Math.round(((totalRequired - gapCount) / totalRequired) * 100);\n\n  let riskLevel: \"LOW\" | \"MEDIUM\" | \"HIGH\" = \"LOW\";\n  if (gapCount === 0) {\n    riskLevel = \"LOW\";\n  } else if (gapCount <= 2) {\n    riskLevel = \"MEDIUM\";\n  } else {\n    riskLevel = \"HIGH\";\n  }\n\n  // Sortera per grupp + namn\n  items.sort((a, b) => {\n    const g1 = a.groupName ?? \"\";\n    const g2 = b.groupName ?? \"\";\n    if (g1 !== g2) return g1.localeCompare(g2);\n    return a.competenceName.localeCompare(b.competenceName);\n  });\n\n  return {\n    employee: {\n      id: employeeRow.id,\n      name: employeeName,\n      positionName,\n    },\n    summary: {\n      riskLevel,\n      gapCount,\n      totalRequired,\n      coveragePercent,\n      expiredCount,\n    },\n    items,\n  };\n}\n\nexport type PositionCoverageSummary = {\n  positionId: string;\n  positionName: string;\n  site: string | null;\n  department: string | null;\n  minHeadcount: number;\n  availableCount: number;\n  gap: number;\n  riskLevel: 'LOW' | 'MEDIUM' | 'HIGH';\n};\n\nexport async function getPositionCoverageForDate(\n  effectiveDate: string\n): Promise<PositionCoverageSummary[]> {\n  let positions: {\n    id: string;\n    name: string;\n    site: string | null;\n    department: string | null;\n    minHeadcount: number;\n  }[] = [];\n\n  const result = await supabase\n    .from('positions')\n    .select('id, name, site, department, min_headcount')\n    .gt('min_headcount', 0);\n\n  if (result.error) {\n    const errorCode = (result.error as any).code;\n    if (errorCode === '42703' || result.error.message?.includes('min_headcount')) {\n      console.warn('min_headcount column not found, returning empty positions list');\n      return [];\n    }\n    throw result.error;\n  }\n\n  positions = (result.data ?? []).map((p: any) => ({\n    id: p.id as string,\n    name: p.name as string,\n    site: (p.site ?? null) as string | null,\n    department: (p.department ?? null) as string | null,\n    minHeadcount: p.min_headcount as number,\n  }));\n\n  const results: PositionCoverageSummary[] = [];\n\n  for (const pos of positions) {\n    const employees = await getEmployeesForPosition(pos.id);\n\n    if (employees.length === 0) {\n      results.push({\n        positionId: pos.id,\n        positionName: pos.name,\n        site: pos.site,\n        department: pos.department,\n        minHeadcount: pos.minHeadcount,\n        availableCount: 0,\n        gap: pos.minHeadcount,\n        riskLevel: 'HIGH',\n      });\n      continue;\n    }\n\n    let availableCount = 0;\n\n    for (const emp of employees) {\n      const profile = await getEmployeeCompetenceProfile(\n        emp.id,\n        effectiveDate\n      );\n\n      const isFullyCompetent = profile.summary.gapCount === 0;\n\n      if (isFullyCompetent) {\n        availableCount += 1;\n      }\n    }\n\n    const gap = Math.max(0, pos.minHeadcount - availableCount);\n\n    let riskLevel: 'LOW' | 'MEDIUM' | 'HIGH' = 'LOW';\n    if (gap > 0 && availableCount === 0) {\n      riskLevel = 'HIGH';\n    } else if (gap > 0) {\n      riskLevel = 'MEDIUM';\n    } else {\n      riskLevel = 'LOW';\n    }\n\n    results.push({\n      positionId: pos.id,\n      positionName: pos.name,\n      site: pos.site,\n      department: pos.department,\n      minHeadcount: pos.minHeadcount,\n      availableCount,\n      gap,\n      riskLevel,\n    });\n  }\n\n  const riskRank: Record<'LOW' | 'MEDIUM' | 'HIGH', number> = {\n    HIGH: 0,\n    MEDIUM: 1,\n    LOW: 2,\n  };\n\n  results.sort((a, b) => {\n    const rDiff = riskRank[a.riskLevel] - riskRank[b.riskLevel];\n    if (rDiff !== 0) return rDiff;\n    return a.positionName.localeCompare(b.positionName);\n  });\n\n  return results;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 296, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB"}},
    {"offset": {"line": 314, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/ui/progress.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-2 w-full overflow-hidden rounded-full bg-primary/20\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMA,MAAM,yBAAW,2KAAgB,MAG/B,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE,oBACjC,6LAAC,+KAAsB;QACrB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,kEACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,oLAA2B;YAC1B,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;;AAIhE,SAAS,WAAW,GAAG,+KAAsB,CAAC,WAAW"}},
    {"offset": {"line": 359, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/app/tomorrows-gaps/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { getPositionCoverageForDate, PositionCoverageSummary } from \"@/services/competence\";\nimport { Loader2, AlertTriangle } from \"lucide-react\";\nimport { Progress } from \"@/components/ui/progress\";\nimport Link from \"next/link\";\n\nfunction getTomorrowDateString(): string {\n  const today = new Date();\n  const tomorrow = new Date(today);\n  tomorrow.setDate(today.getDate() + 1);\n  return tomorrow.toISOString().slice(0, 10);\n}\n\nfunction RiskBadge({ risk }: { risk: string }) {\n  const variants: Record<string, string> = {\n    HIGH: \"hr-risk-pill hr-risk-pill--high\",\n    MEDIUM: \"hr-risk-pill hr-risk-pill--medium\",\n    LOW: \"hr-risk-pill hr-risk-pill--low\",\n  };\n\n  return (\n    <span className={variants[risk] || \"hr-risk-pill\"} data-testid={`risk-badge-${risk.toLowerCase()}`}>\n      {risk}\n    </span>\n  );\n}\n\nfunction PositionCoverageCard({ position }: { position: PositionCoverageSummary }) {\n  const coveragePercent = position.minHeadcount > 0 \n    ? Math.round((position.availableCount / position.minHeadcount) * 100) \n    : 100;\n\n  return (\n    <div className=\"hr-card\" data-testid={`card-position-${position.positionId}`}>\n      <div className=\"flex items-center justify-between gap-2 flex-wrap mb-3\">\n        <h3 className=\"hr-card__title\">{position.positionName}</h3>\n        <RiskBadge risk={position.riskLevel} />\n      </div>\n      \n      <div className=\"hr-emp-summary-grid\">\n        <div className=\"hr-emp-summary-card\">\n          <span className=\"hr-emp-summary-label\">Min Required</span>\n          <span className=\"hr-emp-summary-value\">{position.minHeadcount}</span>\n        </div>\n        <div className=\"hr-emp-summary-card\">\n          <span className=\"hr-emp-summary-label\">Fully Competent</span>\n          <span className=\"hr-emp-summary-value\">{position.availableCount}</span>\n        </div>\n        <div className=\"hr-emp-summary-card\">\n          <span className=\"hr-emp-summary-label\">Gap</span>\n          <span className={`hr-emp-summary-value ${position.gap > 0 ? 'text-red-600 dark:text-red-400' : ''}`}>\n            {position.gap}\n          </span>\n        </div>\n      </div>\n\n      <div className=\"mt-4\">\n        <div className=\"flex items-center justify-between gap-2 mb-1\">\n          <span className=\"text-sm text-muted-foreground\">Coverage</span>\n          <span className=\"text-sm font-medium\">{coveragePercent}%</span>\n        </div>\n        <Progress value={coveragePercent} className=\"h-2\" />\n      </div>\n\n      {(position.site || position.department) && (\n        <div className=\"flex items-center gap-2 mt-3 text-sm text-muted-foreground\">\n          {position.site && <span>{position.site}</span>}\n          {position.site && position.department && <span>/</span>}\n          {position.department && <span>{position.department}</span>}\n        </div>\n      )}\n\n      <div className=\"mt-4 pt-3 border-t border-border\">\n        <Link \n          href=\"/competence/matrix\" \n          className=\"text-sm text-primary hover:underline\"\n          data-testid={`link-matrix-${position.positionId}`}\n        >\n          View competence matrix\n        </Link>\n      </div>\n    </div>\n  );\n}\n\nexport default function TomorrowsGapsPage() {\n  const [positions, setPositions] = useState<PositionCoverageSummary[]>([]);\n  const [effectiveDate, setEffectiveDate] = useState<string>(\"\");\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    async function fetchData() {\n      setLoading(true);\n      setError(null);\n      \n      const tomorrow = getTomorrowDateString();\n      setEffectiveDate(tomorrow);\n      \n      try {\n        const coverageData = await getPositionCoverageForDate(tomorrow);\n        setPositions(coverageData);\n      } catch (err) {\n        console.error(\"Failed to load coverage data:\", err);\n        setError(\"Failed to load gap analysis data. Please try again.\");\n      } finally {\n        setLoading(false);\n      }\n    }\n    \n    fetchData();\n  }, []);\n\n  const totalPositions = positions.length;\n  const highRiskCount = positions.filter(p => p.riskLevel === \"HIGH\").length;\n  const mediumRiskCount = positions.filter(p => p.riskLevel === \"MEDIUM\").length;\n  const lowRiskCount = positions.filter(p => p.riskLevel === \"LOW\").length;\n  const totalGap = positions.reduce((sum, p) => sum + p.gap, 0);\n\n  if (loading) {\n    return (\n      <main className=\"hr-page\">\n        <header className=\"hr-page__header\">\n          <div>\n            <h1 className=\"hr-page__title\">Tomorrow&apos;s Gaps</h1>\n            <p className=\"hr-page__subtitle\">\n              Coverage and risk per position based on minimum headcount and competence.\n            </p>\n          </div>\n        </header>\n        <div className=\"flex items-center justify-center gap-3 p-12\">\n          <Loader2 className=\"h-5 w-5 animate-spin\" data-testid=\"loading-spinner\" />\n          <span className=\"text-muted-foreground\">Calculating tomorrow&apos;s gaps...</span>\n        </div>\n      </main>\n    );\n  }\n\n  if (error) {\n    return (\n      <main className=\"hr-page\">\n        <header className=\"hr-page__header\">\n          <div>\n            <h1 className=\"hr-page__title\">Tomorrow&apos;s Gaps</h1>\n            <p className=\"hr-page__subtitle\">\n              Coverage and risk per position based on minimum headcount and competence.\n            </p>\n          </div>\n        </header>\n        <div className=\"hr-error\" data-testid=\"error-message\">\n          <AlertTriangle className=\"h-4 w-4 inline-block mr-2\" />\n          {error}\n        </div>\n      </main>\n    );\n  }\n\n  if (positions.length === 0) {\n    return (\n      <main className=\"hr-page\">\n        <header className=\"hr-page__header\">\n          <div>\n            <h1 className=\"hr-page__title\">Tomorrow&apos;s Gaps</h1>\n            <p className=\"hr-page__subtitle\">\n              Coverage and risk per position based on minimum headcount and competence.\n            </p>\n          </div>\n          <div className=\"tg-date-pill\" data-testid=\"date-pill\">\n            Analyzing: {effectiveDate}\n          </div>\n        </header>\n        <div className=\"hr-empty\" data-testid=\"empty-state\">\n          <p className=\"font-medium mb-2\">No positions with minimum headcount defined</p>\n          <p className=\"text-sm text-muted-foreground\">\n            Add min_headcount to positions to see Tomorrow&apos;s Gaps analysis.\n          </p>\n        </div>\n      </main>\n    );\n  }\n\n  return (\n    <main className=\"hr-page\">\n      <header className=\"hr-page__header\">\n        <div>\n          <h1 className=\"hr-page__title\">Tomorrow&apos;s Gaps</h1>\n          <p className=\"hr-page__subtitle\">\n            Coverage and risk per position based on minimum headcount and competence.\n          </p>\n        </div>\n        <div className=\"tg-date-pill\" data-testid=\"date-pill\">\n          Analyzing: {effectiveDate}\n        </div>\n      </header>\n\n      <div className=\"hr-kpi-grid\" data-testid=\"summary-kpis\">\n        <div className=\"hr-kpi\">\n          <span className=\"hr-kpi__label\">Total Positions</span>\n          <span className=\"hr-kpi__value\">{totalPositions}</span>\n        </div>\n        <div className=\"hr-kpi\">\n          <span className=\"hr-kpi__label\">High Risk</span>\n          <span className={`hr-kpi__value ${highRiskCount > 0 ? 'hr-kpi__value--danger' : ''}`}>\n            {highRiskCount}\n          </span>\n        </div>\n        <div className=\"hr-kpi\">\n          <span className=\"hr-kpi__label\">Medium Risk</span>\n          <span className={`hr-kpi__value ${mediumRiskCount > 0 ? 'hr-kpi__value--warn' : ''}`}>\n            {mediumRiskCount}\n          </span>\n        </div>\n        <div className=\"hr-kpi\">\n          <span className=\"hr-kpi__label\">Low Risk</span>\n          <span className=\"hr-kpi__value hr-kpi__value--ok\">{lowRiskCount}</span>\n        </div>\n        <div className=\"hr-kpi\">\n          <span className=\"hr-kpi__label\">Total Missing Headcount</span>\n          <span className={`hr-kpi__value ${totalGap > 0 ? 'hr-kpi__value--danger' : ''}`}>\n            {totalGap}\n          </span>\n        </div>\n      </div>\n\n      <div className=\"hr-grid mt-6\" data-testid=\"positions-grid\">\n        {positions.map((position) => (\n          <PositionCoverageCard key={position.positionId} position={position} />\n        ))}\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}