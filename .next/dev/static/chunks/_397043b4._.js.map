{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/app/org/select/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useOrg } from '@/hooks/useOrg';\nimport { supabase } from '@/lib/supabaseClient';\nimport { Building2, Plus, ArrowRight, Loader2 } from 'lucide-react';\n\nexport default function OrgSelectPage() {\n  const { memberships, isLoading, selectOrg, refreshMemberships } = useOrg();\n  const router = useRouter();\n  const [showCreate, setShowCreate] = useState(false);\n  const [creating, setCreating] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [name, setName] = useState('');\n  const [slug, setSlug] = useState('');\n\n  const handleSelectOrg = (orgId: string) => {\n    selectOrg(orgId);\n    router.push('/app');\n  };\n\n  const handleCreateOrg = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    setCreating(true);\n\n    try {\n      const { data: { session } } = await supabase.auth.getSession();\n      if (!session?.access_token) {\n        setError('Not authenticated');\n        setCreating(false);\n        return;\n      }\n\n      const res = await fetch('/api/org/create', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${session.access_token}`,\n        },\n        body: JSON.stringify({ name, slug }),\n      });\n\n      const data = await res.json();\n\n      if (!res.ok) {\n        setError(data.error || 'Failed to create organization');\n        setCreating(false);\n        return;\n      }\n\n      // Refresh memberships and select new org\n      await refreshMemberships();\n      selectOrg(data.organization.id);\n      router.push('/app');\n    } catch (err) {\n      console.error('Create org error:', err);\n      setError('Failed to create organization');\n      setCreating(false);\n    }\n  };\n\n  const generateSlug = (value: string) => {\n    return value\n      .toLowerCase()\n      .replace(/[^a-z0-9\\s-]/g, '')\n      .replace(/\\s+/g, '-')\n      .replace(/-+/g, '-')\n      .substring(0, 50);\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-background\" data-testid=\"loading-orgs\">\n        <Loader2 className=\"w-6 h-6 animate-spin text-muted-foreground\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-background p-4\">\n      <div className=\"w-full max-w-md space-y-6\">\n        <div className=\"text-center\">\n          <Building2 className=\"w-12 h-12 mx-auto text-muted-foreground mb-4\" />\n          <h1 className=\"text-2xl font-semibold text-foreground\" data-testid=\"text-page-title\">\n            Select Organization\n          </h1>\n          <p className=\"text-muted-foreground mt-2\">\n            Choose an organization to continue\n          </p>\n        </div>\n\n        {memberships.length > 0 && (\n          <div className=\"space-y-2\">\n            {memberships.map((membership) => (\n              <button\n                key={membership.org_id}\n                onClick={() => handleSelectOrg(membership.org_id)}\n                className=\"w-full p-4 rounded-lg border border-border bg-card hover-elevate flex items-center justify-between group\"\n                data-testid={`button-select-org-${membership.org_id}`}\n              >\n                <div className=\"text-left\">\n                  <div className=\"font-medium text-foreground\">\n                    {membership.organization?.name}\n                  </div>\n                  <div className=\"text-sm text-muted-foreground\">\n                    {membership.role.charAt(0).toUpperCase() + membership.role.slice(1)}\n                  </div>\n                </div>\n                <ArrowRight className=\"w-5 h-5 text-muted-foreground group-hover:text-foreground transition-colors\" />\n              </button>\n            ))}\n          </div>\n        )}\n\n        <div className=\"border-t border-border pt-6\">\n          {!showCreate ? (\n            <button\n              onClick={() => setShowCreate(true)}\n              className=\"w-full p-4 rounded-lg border border-dashed border-border hover-elevate flex items-center justify-center gap-2 text-muted-foreground hover:text-foreground\"\n              data-testid=\"button-show-create-org\"\n            >\n              <Plus className=\"w-5 h-5\" />\n              Create New Organization\n            </button>\n          ) : (\n            <form onSubmit={handleCreateOrg} className=\"space-y-4\">\n              <div>\n                <label htmlFor=\"org-name\" className=\"block text-sm font-medium text-foreground mb-1\">\n                  Organization Name\n                </label>\n                <input\n                  id=\"org-name\"\n                  type=\"text\"\n                  value={name}\n                  onChange={(e) => {\n                    setName(e.target.value);\n                    if (!slug || slug === generateSlug(name)) {\n                      setSlug(generateSlug(e.target.value));\n                    }\n                  }}\n                  placeholder=\"Acme Corporation\"\n                  className=\"w-full px-3 py-2 rounded-md border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring\"\n                  required\n                  data-testid=\"input-org-name\"\n                />\n              </div>\n\n              <div>\n                <label htmlFor=\"org-slug\" className=\"block text-sm font-medium text-foreground mb-1\">\n                  URL Slug\n                </label>\n                <input\n                  id=\"org-slug\"\n                  type=\"text\"\n                  value={slug}\n                  onChange={(e) => setSlug(generateSlug(e.target.value))}\n                  placeholder=\"acme-corp\"\n                  className=\"w-full px-3 py-2 rounded-md border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring\"\n                  required\n                  pattern=\"^[a-z0-9-]+$\"\n                  data-testid=\"input-org-slug\"\n                />\n                <p className=\"text-xs text-muted-foreground mt-1\">\n                  Lowercase letters, numbers, and hyphens only\n                </p>\n              </div>\n\n              {error && (\n                <p className=\"text-sm text-destructive\" data-testid=\"text-error\">\n                  {error}\n                </p>\n              )}\n\n              <div className=\"flex gap-2\">\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setShowCreate(false);\n                    setError(null);\n                  }}\n                  className=\"flex-1 px-4 py-2 rounded-md border border-border text-foreground hover-elevate\"\n                  data-testid=\"button-cancel-create\"\n                >\n                  Cancel\n                </button>\n                <button\n                  type=\"submit\"\n                  disabled={creating}\n                  className=\"flex-1 px-4 py-2 rounded-md bg-primary text-primary-foreground hover-elevate disabled:opacity-50 flex items-center justify-center gap-2\"\n                  data-testid=\"button-create-org\"\n                >\n                  {creating ? (\n                    <>\n                      <Loader2 className=\"w-4 h-4 animate-spin\" />\n                      Creating...\n                    </>\n                  ) : (\n                    'Create'\n                  )}\n                </button>\n              </div>\n            </form>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 377, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/lucide-react/dist/esm/icons/plus.js","sources":["file:///home/runner/workspace/node_modules/lucide-react/src/icons/plus.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Plus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSAxMmgxNCIgLz4KICA8cGF0aCBkPSJNMTIgNXYxNCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/plus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Plus = createLucideIcon('Plus', [\n  ['path', { d: 'M5 12h14', key: '1ays0h' }],\n  ['path', { d: 'M12 5v14', key: 's699le' }],\n]);\n\nexport default Plus;\n"],"names":[],"mappings":";;;;;;;;;;;AAaM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAO,gLAAA,EAAiB,MAAQ,CAAA,CAAA,CAAA;IACpC;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA;QAAA,CAAA;YAAE,GAAG,CAAY,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAA,CAAA,CAAA,CAAA,CAAA,CAAK;QAAA,CAAU;KAAA,CAAA;IACzC;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA;QAAA,CAAA;YAAE,GAAG,CAAY,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAA,CAAA,CAAA,CAAA,CAAA,CAAK;QAAA,CAAU;KAAA;CAC1C,CAAA,CAAA"}},
    {"offset": {"line": 419, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/lucide-react/dist/esm/icons/arrow-right.js","sources":["file:///home/runner/workspace/node_modules/lucide-react/src/icons/arrow-right.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ArrowRight\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSAxMmgxNCIgLz4KICA8cGF0aCBkPSJtMTIgNSA3IDctNyA3IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/arrow-right\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowRight = createLucideIcon('ArrowRight', [\n  ['path', { d: 'M5 12h14', key: '1ays0h' }],\n  ['path', { d: 'm12 5 7 7-7 7', key: 'xquz4c' }],\n]);\n\nexport default ArrowRight;\n"],"names":[],"mappings":";;;;;;;;;;;AAaM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAa,gLAAA,EAAiB,YAAc,CAAA,CAAA,CAAA;IAChD;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA;QAAA,CAAA;YAAE,GAAG,CAAY,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAA,CAAA,CAAA,CAAA,CAAA,CAAK;QAAA,CAAU;KAAA,CAAA;IACzC;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA;QAAA,CAAA;YAAE,GAAG,CAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAA,CAAA,CAAA,CAAA,CAAA,CAAK;QAAA,CAAU;KAAA;CAC/C,CAAA,CAAA"}},
    {"offset": {"line": 461, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/lucide-react/dist/esm/icons/loader-circle.js","sources":["file:///home/runner/workspace/node_modules/lucide-react/src/icons/loader-circle.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name LoaderCircle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTJhOSA5IDAgMSAxLTYuMjE5LTguNTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/loader-circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst LoaderCircle = createLucideIcon('LoaderCircle', [\n  ['path', { d: 'M21 12a9 9 0 1 1-6.219-8.56', key: '13zald' }],\n]);\n\nexport default LoaderCircle;\n"],"names":[],"mappings":";;;;;;;;;;;AAaM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAe,gLAAA,EAAiB,cAAgB,CAAA,CAAA,CAAA;IACpD;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA;QAAA,CAAA;YAAE,GAAG,CAA+B,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAA,CAAA,CAAA,CAAA,CAAA,CAAK;QAAA,CAAU;KAAA;CAC7D,CAAA,CAAA"}}]
}