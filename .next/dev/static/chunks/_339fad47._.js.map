{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/env.ts"],"sourcesContent":["/**\n * Environment variable helper with fail-fast behavior\n * Ensures Supabase credentials are always available\n */\n\nexport interface PublicEnv {\n  supabaseUrl: string;\n  supabaseAnonKey: string;\n}\n\n// Hardcoded fallback values for production builds\nconst FALLBACK_SUPABASE_URL = \"https://bmvawfrnlpdvcmffqrzc.supabase.co\";\nconst FALLBACK_SUPABASE_ANON_KEY = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJtdmF3ZnJubHBkdmNtZmZxcnpjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU1MTEwOTAsImV4cCI6MjA4MTA4NzA5MH0.DHLJ4aMn1dORfbNPt1XrJtcdIjYN81YQbJ19Q89A_pM\";\n\n/**\n * Get public environment variables with fail-fast behavior\n * Throws if credentials are not available\n */\nexport function getPublicEnv(): PublicEnv {\n  const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || FALLBACK_SUPABASE_URL;\n  const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || FALLBACK_SUPABASE_ANON_KEY;\n\n  const missing: string[] = [];\n  \n  if (!supabaseUrl || supabaseUrl.includes('placeholder')) {\n    missing.push('NEXT_PUBLIC_SUPABASE_URL');\n  }\n  if (!supabaseAnonKey || supabaseAnonKey.includes('placeholder')) {\n    missing.push('NEXT_PUBLIC_SUPABASE_ANON_KEY');\n  }\n\n  if (missing.length > 0) {\n    throw new Error(`Supabase env missing: ${missing.join(', ')}`);\n  }\n\n  return {\n    supabaseUrl,\n    supabaseAnonKey,\n  };\n}\n\n/**\n * Check if public environment is properly configured\n * Returns validation result without throwing\n */\nexport function validatePublicEnv(): { valid: boolean; missing: string[] } {\n  const missing: string[] = [];\n  \n  const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || FALLBACK_SUPABASE_URL;\n  const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || FALLBACK_SUPABASE_ANON_KEY;\n\n  if (!supabaseUrl || supabaseUrl.includes('placeholder')) {\n    missing.push('NEXT_PUBLIC_SUPABASE_URL');\n  }\n  if (!supabaseAnonKey || supabaseAnonKey.includes('placeholder')) {\n    missing.push('NEXT_PUBLIC_SUPABASE_ANON_KEY');\n  }\n\n  return {\n    valid: missing.length === 0,\n    missing,\n  };\n}\n\n/**\n * Get the service role key (server-side only)\n * Never expose this to client code\n */\nexport function getServiceRoleKey(): string {\n  if (typeof window !== 'undefined') {\n    throw new Error('Service role key must never be accessed on the client');\n  }\n  \n  const key = process.env.SUPABASE_SERVICE_ROLE_KEY;\n  if (!key) {\n    throw new Error('SUPABASE_SERVICE_ROLE_KEY is not configured');\n  }\n  \n  return key;\n}\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;AAgBqB;AATtB,kDAAkD;AAClD,MAAM,wBAAwB;AAC9B,MAAM,6BAA6B;AAM5B,SAAS;IACd,MAAM,cAAc,gFAAwC;IAC5D,MAAM,kBAAkB,wPAA6C;IAErE,MAAM,UAAoB,EAAE;IAE5B,IAAI,CAAC,eAAe,YAAY,QAAQ,CAAC,gBAAgB;QACvD,QAAQ,IAAI,CAAC;IACf;IACA,IAAI,CAAC,mBAAmB,gBAAgB,QAAQ,CAAC,gBAAgB;QAC/D,QAAQ,IAAI,CAAC;IACf;IAEA,IAAI,QAAQ,MAAM,GAAG,GAAG;QACtB,MAAM,IAAI,MAAM,CAAC,sBAAsB,EAAE,QAAQ,IAAI,CAAC,OAAO;IAC/D;IAEA,OAAO;QACL;QACA;IACF;AACF;AAMO,SAAS;IACd,MAAM,UAAoB,EAAE;IAE5B,MAAM,cAAc,gFAAwC;IAC5D,MAAM,kBAAkB,wPAA6C;IAErE,IAAI,CAAC,eAAe,YAAY,QAAQ,CAAC,gBAAgB;QACvD,QAAQ,IAAI,CAAC;IACf;IACA,IAAI,CAAC,mBAAmB,gBAAgB,QAAQ,CAAC,gBAAgB;QAC/D,QAAQ,IAAI,CAAC;IACf;IAEA,OAAO;QACL,OAAO,QAAQ,MAAM,KAAK;QAC1B;IACF;AACF;AAMO,SAAS;IACd,wCAAmC;QACjC,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,MAAM,2KAAO,CAAC,GAAG,CAAC,yBAAyB;IACjD,IAAI,CAAC,KAAK;QACR,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO;AACT"}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/supabaseClient.ts"],"sourcesContent":["import { createClient, SupabaseClient } from \"@supabase/supabase-js\";\nimport { getPublicEnv, validatePublicEnv } from \"./env\";\n\nlet supabaseInstance: SupabaseClient | null = null;\n\nfunction createSupabaseClient(): SupabaseClient {\n  const env = getPublicEnv();\n  return createClient(env.supabaseUrl, env.supabaseAnonKey, {\n    auth: {\n      persistSession: true,\n      autoRefreshToken: true,\n      detectSessionInUrl: true,\n    },\n  });\n}\n\nexport function getSupabaseClient(): SupabaseClient {\n  if (!supabaseInstance) {\n    supabaseInstance = createSupabaseClient();\n  }\n  return supabaseInstance;\n}\n\nexport const supabase: SupabaseClient = createSupabaseClient();\n\nexport function isSupabaseReady(): boolean {\n  const validation = validatePublicEnv();\n  return validation.valid;\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAEA,IAAI,mBAA0C;AAE9C,SAAS;IACP,MAAM,MAAM,IAAA,6HAAY;IACxB,OAAO,IAAA,0LAAY,EAAC,IAAI,WAAW,EAAE,IAAI,eAAe,EAAE;QACxD,MAAM;YACJ,gBAAgB;YAChB,kBAAkB;YAClB,oBAAoB;QACtB;IACF;AACF;AAEO,SAAS;IACd,IAAI,CAAC,kBAAkB;QACrB,mBAAmB;IACrB;IACA,OAAO;AACT;AAEO,MAAM,WAA2B;AAEjC,SAAS;IACd,MAAM,aAAa,IAAA,kIAAiB;IACpC,OAAO,WAAW,KAAK;AACzB"}},
    {"offset": {"line": 110, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/services/auth.ts"],"sourcesContent":["import { supabase } from \"@/lib/supabaseClient\";\n\nexport async function signInWithEmail(email: string, password: string) {\n  const { data, error } = await supabase.auth.signInWithPassword({\n    email,\n    password,\n  });\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function signOut() {\n  const { error } = await supabase.auth.signOut();\n  if (error) throw error;\n}\n\nexport async function getAuthUser() {\n  const { data, error } = await supabase.auth.getUser();\n  if (error) return null;\n  return data.user;\n}\n\nexport async function getSession() {\n  const { data, error } = await supabase.auth.getSession();\n  if (error) return null;\n  return data.session;\n}\n\nexport function onAuthStateChange(callback: (event: string, session: unknown) => void) {\n  return supabase.auth.onAuthStateChange(callback);\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;AAEO,eAAe,gBAAgB,KAAa,EAAE,QAAgB;IACnE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,oIAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC;QAC7D;QACA;IACF;IAEA,IAAI,OAAO,MAAM;IACjB,OAAO;AACT;AAEO,eAAe;IACpB,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,oIAAQ,CAAC,IAAI,CAAC,OAAO;IAC7C,IAAI,OAAO,MAAM;AACnB;AAEO,eAAe;IACpB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,oIAAQ,CAAC,IAAI,CAAC,OAAO;IACnD,IAAI,OAAO,OAAO;IAClB,OAAO,KAAK,IAAI;AAClB;AAEO,eAAe;IACpB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,oIAAQ,CAAC,IAAI,CAAC,UAAU;IACtD,IAAI,OAAO,OAAO;IAClB,OAAO,KAAK,OAAO;AACrB;AAEO,SAAS,kBAAkB,QAAmD;IACnF,OAAO,oIAAQ,CAAC,IAAI,CAAC,iBAAiB,CAAC;AACzC"}},
    {"offset": {"line": 156, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/hooks/useProfile.ts"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useCallback } from \"react\";\nimport { supabase } from \"@/lib/supabaseClient\";\n\nexport interface UserProfile {\n  id: string;\n  email: string | null;\n  role: \"admin\" | \"hr\" | \"manager\" | \"user\" | null;\n}\n\nexport interface UseProfileResult {\n  profile: UserProfile | null;\n  loading: boolean;\n  error: string | null;\n  refresh: () => Promise<void>;\n  runBootstrap: () => Promise<{ success: boolean; message: string }>;\n  canBootstrap: boolean;\n}\n\nexport function useProfile(): UseProfileResult {\n  const [profile, setProfile] = useState<UserProfile | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [canBootstrap, setCanBootstrap] = useState(false);\n\n  const fetchProfile = useCallback(async () => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      const { data: { session } } = await supabase.auth.getSession();\n      \n      if (!session?.user) {\n        setProfile(null);\n        setLoading(false);\n        return;\n      }\n\n      // Try to get the user's profile\n      const { data: profileData, error: profileError } = await supabase\n        .from(\"profiles\")\n        .select(\"id, email, role\")\n        .eq(\"id\", session.user.id)\n        .single();\n\n      if (profileError) {\n        // Check if table exists by looking for any profiles\n        const { data: anyProfiles, error: countError } = await supabase\n          .from(\"profiles\")\n          .select(\"id\")\n          .limit(1);\n\n        if (countError?.code === \"PGRST116\" || countError?.message?.includes(\"does not exist\")) {\n          // Table doesn't exist\n          setCanBootstrap(true);\n          setProfile({\n            id: session.user.id,\n            email: session.user.email || null,\n            role: null,\n          });\n        } else if (!anyProfiles || anyProfiles.length === 0) {\n          // Table exists but empty - user can bootstrap\n          setCanBootstrap(true);\n          setProfile({\n            id: session.user.id,\n            email: session.user.email || null,\n            role: null,\n          });\n        } else {\n          // Table exists with profiles but user not found\n          setProfile({\n            id: session.user.id,\n            email: session.user.email || null,\n            role: null,\n          });\n        }\n      } else {\n        setProfile(profileData as UserProfile);\n        setCanBootstrap(false);\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : \"Failed to load profile\");\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  const runBootstrap = useCallback(async (): Promise<{ success: boolean; message: string }> => {\n    try {\n      const { data: { session } } = await supabase.auth.getSession();\n      \n      if (!session) {\n        return { success: false, message: \"Not authenticated\" };\n      }\n\n      const response = await fetch(\"/api/bootstrap\", {\n        method: \"POST\",\n        headers: {\n          \"Authorization\": `Bearer ${session.access_token}`,\n          \"Content-Type\": \"application/json\",\n        },\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        return { success: false, message: data.error || \"Bootstrap failed\" };\n      }\n\n      // Refresh profile after bootstrap\n      await fetchProfile();\n      \n      return { success: true, message: data.message || \"Bootstrap complete\" };\n    } catch (err) {\n      return { \n        success: false, \n        message: err instanceof Error ? err.message : \"Bootstrap failed\" \n      };\n    }\n  }, [fetchProfile]);\n\n  useEffect(() => {\n    fetchProfile();\n  }, [fetchProfile]);\n\n  return {\n    profile,\n    loading,\n    error,\n    refresh: fetchProfile,\n    runBootstrap,\n    canBootstrap,\n  };\n}\n\n/**\n * Get the redirect path based on user role\n */\nexport function getRoleRedirectPath(role: string | null): string {\n  switch (role) {\n    case \"admin\":\n      return \"/app/admin\";\n    case \"hr\":\n      return \"/app/hr/tasks\";\n    case \"manager\":\n      return \"/app/manager\";\n    case \"user\":\n    default:\n      return \"/app/hr/tasks\"; // Default workspace for regular users\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 302, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/login/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { signInWithEmail, getSession } from '@/services/auth';\nimport { isSupabaseReady, supabase } from '@/lib/supabaseClient';\nimport { getRoleRedirectPath } from '@/hooks/useProfile';\nimport { Loader2 } from 'lucide-react';\n\nexport default function LoginPage() {\n  const router = useRouter();\n  const [email, setEmail] = useState('admin@nadiplan.test');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [errorMsg, setErrorMsg] = useState<string | null>(null);\n  const [checkingSession, setCheckingSession] = useState(true);\n  const [supabaseConfigured, setSupabaseConfigured] = useState(true);\n  const [bootstrapStatus, setBootstrapStatus] = useState<'idle' | 'loading' | 'success' | 'error'>('idle');\n  const [bootstrapMessage, setBootstrapMessage] = useState<string | null>(null);\n  const [showBootstrap, setShowBootstrap] = useState(false);\n\n  useEffect(() => {\n    const configured = isSupabaseReady();\n    setSupabaseConfigured(configured);\n    \n    if (!configured) {\n      console.error('Supabase not configured - env vars missing');\n      setCheckingSession(false);\n      return;\n    }\n\n    async function checkExistingSession() {\n      try {\n        const session = await getSession();\n        if (session?.user) {\n          // Get user role and redirect accordingly\n          const { data: profile } = await supabase\n            .from('profiles')\n            .select('role')\n            .eq('id', session.user.id)\n            .single();\n          \n          const redirectPath = getRoleRedirectPath(profile?.role || null);\n          router.replace(redirectPath);\n        } else {\n          setCheckingSession(false);\n        }\n      } catch (err) {\n        console.error('Session check failed:', err);\n        setCheckingSession(false);\n      }\n    }\n    checkExistingSession();\n  }, [router]);\n\n  async function checkBootstrapStatus(userId: string): Promise<{ needsBootstrap: boolean; role: string | null }> {\n    try {\n      // Check if profiles table has any entries\n      const { data: profiles, error } = await supabase\n        .from('profiles')\n        .select('id')\n        .limit(1);\n\n      if (error) {\n        // Table might not exist - needs bootstrap\n        return { needsBootstrap: true, role: null };\n      }\n\n      if (!profiles || profiles.length === 0) {\n        // No profiles exist - this user can bootstrap\n        return { needsBootstrap: true, role: null };\n      }\n\n      // Check if current user has a profile\n      const { data: userProfile } = await supabase\n        .from('profiles')\n        .select('role')\n        .eq('id', userId)\n        .single();\n\n      return { needsBootstrap: false, role: userProfile?.role || null };\n    } catch {\n      return { needsBootstrap: false, role: null };\n    }\n  }\n\n  async function handleSubmit(e: React.FormEvent) {\n    e.preventDefault();\n    setErrorMsg(null);\n    \n    if (!supabaseConfigured) {\n      setErrorMsg('Authentication service is not configured. Environment variables are missing.');\n      return;\n    }\n    \n    setLoading(true);\n\n    try {\n      const session = await signInWithEmail(email, password);\n      \n      if (session?.user) {\n        // Check if bootstrap is needed or get role\n        const { needsBootstrap, role } = await checkBootstrapStatus(session.user.id);\n        \n        if (needsBootstrap) {\n          // Stay on login page to show bootstrap option\n          setShowBootstrap(true);\n          setLoading(false);\n          return;\n        }\n\n        // Redirect based on role\n        const redirectPath = getRoleRedirectPath(role);\n        router.replace(redirectPath);\n      }\n    } catch (error: unknown) {\n      console.error('Sign in error:', error);\n      let message = 'Failed to sign in.';\n      if (error instanceof Error) {\n        if (error.message === 'Failed to fetch' || error.message.includes('NetworkError')) {\n          message = 'Unable to connect to authentication service. Please check your internet connection.';\n        } else if (error.message.includes('placeholder')) {\n          message = 'Authentication service is not configured. Please contact support.';\n        } else if (error.message.includes('Invalid login credentials')) {\n          message = 'Invalid email or password. Please try again.';\n        } else {\n          message = error.message;\n        }\n      }\n      setErrorMsg(message);\n      setLoading(false);\n    }\n  }\n\n  async function handleBootstrap() {\n    setBootstrapStatus('loading');\n    setBootstrapMessage(null);\n\n    try {\n      const { data: { session } } = await supabase.auth.getSession();\n      \n      if (!session) {\n        setBootstrapStatus('error');\n        setBootstrapMessage('Not authenticated');\n        return;\n      }\n\n      const response = await fetch('/api/bootstrap', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${session.access_token}`,\n          'Content-Type': 'application/json',\n        },\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        setBootstrapStatus('error');\n        setBootstrapMessage(data.error || 'Bootstrap failed');\n        return;\n      }\n\n      setBootstrapStatus('success');\n      setBootstrapMessage(data.message);\n      setShowBootstrap(false);\n\n      // Redirect to admin dashboard\n      setTimeout(() => {\n        router.replace('/app/admin');\n      }, 1500);\n    } catch (err) {\n      setBootstrapStatus('error');\n      setBootstrapMessage(err instanceof Error ? err.message : 'Bootstrap failed');\n    }\n  }\n\n  if (checkingSession) {\n    return (\n      <main className=\"hr-page\" style={{ maxWidth: 420, margin: '0 auto', paddingTop: 80 }}>\n        <div className=\"flex items-center justify-center gap-2\">\n          <Loader2 className=\"w-4 h-4 animate-spin\" />\n          <p className=\"hr-page__subtitle\">Loading...</p>\n        </div>\n      </main>\n    );\n  }\n\n  return (\n    <main className=\"hr-page\" style={{ maxWidth: 420, margin: '0 auto', paddingTop: 80 }}>\n      <h1 className=\"hr-page__title\">Sign in</h1>\n      <p className=\"hr-page__subtitle\">\n        Use your Nadiplan account to access HR dashboards.\n      </p>\n\n      <form onSubmit={handleSubmit} className=\"hr-card\" style={{ marginTop: 16 }}>\n        <div className=\"hr-form-field\">\n          <label className=\"hr-form-label\">Email</label>\n          <input\n            type=\"email\"\n            className=\"hr-input\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            autoComplete=\"email\"\n            required\n            data-testid=\"input-email\"\n          />\n        </div>\n\n        <div className=\"hr-form-field\">\n          <label className=\"hr-form-label\">Password</label>\n          <input\n            type=\"password\"\n            className=\"hr-input\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            autoComplete=\"current-password\"\n            required\n            data-testid=\"input-password\"\n          />\n        </div>\n\n        {errorMsg && (\n          <p className=\"hr-error\" style={{ marginTop: 8 }} data-testid=\"error-message\">\n            {errorMsg}\n          </p>\n        )}\n\n        <button\n          type=\"submit\"\n          className=\"hr-button hr-button--primary\"\n          disabled={loading}\n          style={{ marginTop: 12, width: '100%' }}\n          data-testid=\"button-signin\"\n        >\n          {loading ? 'Signing inâ€¦' : 'Sign in'}\n        </button>\n      </form>\n\n      {showBootstrap && (\n        <div className=\"hr-card\" style={{ marginTop: 16, padding: 16 }} data-testid=\"bootstrap-section\">\n          <h3 style={{ fontSize: 14, fontWeight: 600, marginBottom: 8 }}>\n            Admin Setup Required\n          </h3>\n          <p style={{ fontSize: 13, color: 'var(--color-text-secondary)', marginBottom: 12 }}>\n            No admin user exists. Click below to become the first admin.\n          </p>\n          \n          {bootstrapMessage && (\n            <p \n              className={bootstrapStatus === 'error' ? 'hr-error' : 'hr-success'}\n              style={{ marginBottom: 8, fontSize: 13 }}\n              data-testid=\"bootstrap-message\"\n            >\n              {bootstrapMessage}\n            </p>\n          )}\n          \n          <button\n            onClick={handleBootstrap}\n            disabled={bootstrapStatus === 'loading' || bootstrapStatus === 'success'}\n            className=\"hr-button hr-button--secondary\"\n            style={{ width: '100%' }}\n            data-testid=\"button-bootstrap\"\n          >\n            {bootstrapStatus === 'loading' ? (\n              <span className=\"flex items-center justify-center gap-2\">\n                <Loader2 className=\"w-4 h-4 animate-spin\" />\n                Running Bootstrap...\n              </span>\n            ) : bootstrapStatus === 'success' ? (\n              'Bootstrap Complete!'\n            ) : (\n              'Run Admin Bootstrap'\n            )}\n          </button>\n        </div>\n      )}\n\n      <p style={{ marginTop: 16, fontSize: 12, color: 'var(--color-text-tertiary)', textAlign: 'center' }}>\n        <a href=\"/health\" style={{ textDecoration: 'underline' }} data-testid=\"link-health\">\n          System Health Check\n        </a>\n      </p>\n    </main>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}