{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/supabaseClient.ts"],"sourcesContent":["import { createClient, SupabaseClient } from \"@supabase/supabase-js\";\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || \"\";\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || \"\";\n\nfunction createSupabaseClient(): SupabaseClient {\n  if (!supabaseUrl || !supabaseAnonKey) {\n    if (typeof window === \"undefined\" && process.env.NODE_ENV === \"production\") {\n      console.warn(\n        \"Supabase environment variables not set. \" +\n        \"Please ensure NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY are configured.\"\n      );\n    }\n  }\n  return createClient(supabaseUrl || \"https://placeholder.supabase.co\", supabaseAnonKey || \"placeholder\");\n}\n\nexport const supabase: SupabaseClient = createSupabaseClient();\n\nexport function getSupabaseClient(): SupabaseClient {\n  if (!supabaseUrl || !supabaseAnonKey) {\n    throw new Error(\n      \"Missing Supabase environment variables. \" +\n      \"Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY.\"\n    );\n  }\n  return supabase;\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,cAAc,gFAAwC;AAC5D,MAAM,kBAAkB,wPAA6C;AAErE,SAAS;IACP;;IAQA,OAAO,IAAA,uLAAY,EAAC,eAAe,mCAAmC,mBAAmB;AAC3F;AAEO,MAAM,WAA2B;AAEjC,SAAS;IACd;;IAMA,OAAO;AACT"}},
    {"offset": {"line": 43, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/services/competenceService.ts"],"sourcesContent":["import { supabase } from \"@/lib/supabaseClient\";\nimport type { Employee, Skill, EmployeeSkill, CompetenceLevel } from \"@/types/domain\";\n\nconst demoEmployees: Omit<Employee, \"id\">[] = [\n  { name: \"Anna Lindberg\", employeeNumber: \"E1001\", role: \"Operator\", line: \"Pressline 1\", team: \"Day\", isActive: true },\n  { name: \"Erik Johansson\", employeeNumber: \"E1002\", role: \"Operator\", line: \"Pressline 1\", team: \"Night\", isActive: true },\n  { name: \"Maria Svensson\", employeeNumber: \"E1003\", role: \"Team Leader\", line: \"Assembly\", team: \"Day\", isActive: true },\n  { name: \"Karl Andersson\", employeeNumber: \"E1004\", role: \"Operator\", line: \"Assembly\", team: \"Night\", isActive: true },\n];\n\nconst demoSkills: Omit<Skill, \"id\">[] = [\n  { code: \"PRESS_A\", name: \"Pressline A\", category: \"Production\" },\n  { code: \"PRESS_B\", name: \"Pressline B\", category: \"Production\" },\n  { code: \"5S\", name: \"5S Basics\", category: \"Lean\" },\n  { code: \"SAFETY_BASIC\", name: \"Safety Basic\", category: \"Safety\" },\n  { code: \"TRUCK_A1\", name: \"Truck A1 License\", category: \"Logistics\" },\n];\n\nconst demoSkillLevels: Record<string, Record<string, CompetenceLevel[\"value\"]>> = {\n  \"E1001\": { \"PRESS_A\": 3, \"PRESS_B\": 2, \"5S\": 4, \"SAFETY_BASIC\": 3, \"TRUCK_A1\": 1 },\n  \"E1002\": { \"PRESS_A\": 2, \"PRESS_B\": 1, \"5S\": 3, \"SAFETY_BASIC\": 2, \"TRUCK_A1\": 0 },\n  \"E1003\": { \"PRESS_A\": 4, \"PRESS_B\": 3, \"5S\": 4, \"SAFETY_BASIC\": 4, \"TRUCK_A1\": 2 },\n  \"E1004\": { \"PRESS_A\": 1, \"PRESS_B\": 0, \"5S\": 2, \"SAFETY_BASIC\": 1, \"TRUCK_A1\": 0 },\n};\n\nexport async function seedDemoDataIfEmpty(): Promise<void> {\n  const { data: existingEmployees, error: checkError } = await supabase\n    .from(\"employees\")\n    .select(\"id\")\n    .limit(1);\n\n  if (checkError) {\n    throw new Error(`Failed to check employees table: ${checkError.message}`);\n  }\n\n  if (existingEmployees && existingEmployees.length > 0) {\n    return;\n  }\n\n  const { data: insertedEmployees, error: employeesError } = await supabase\n    .from(\"employees\")\n    .insert(\n      demoEmployees.map((emp) => ({\n        name: emp.name,\n        employee_number: emp.employeeNumber,\n        role: emp.role,\n        line: emp.line,\n        team: emp.team,\n        is_active: emp.isActive,\n      }))\n    )\n    .select();\n\n  if (employeesError) {\n    throw new Error(`Failed to insert employees: ${employeesError.message}`);\n  }\n\n  const { data: insertedSkills, error: skillsError } = await supabase\n    .from(\"skills\")\n    .insert(\n      demoSkills.map((skill) => ({\n        code: skill.code,\n        name: skill.name,\n        category: skill.category,\n      }))\n    )\n    .select();\n\n  if (skillsError) {\n    throw new Error(`Failed to insert skills: ${skillsError.message}`);\n  }\n\n  if (!insertedEmployees || !insertedSkills) {\n    throw new Error(\"Failed to get inserted employee or skill IDs\");\n  }\n\n  const employeeByNumber = new Map<string, string>();\n  for (const emp of insertedEmployees) {\n    employeeByNumber.set(emp.employee_number, emp.id);\n  }\n\n  const skillByCode = new Map<string, string>();\n  for (const skill of insertedSkills) {\n    skillByCode.set(skill.code, skill.id);\n  }\n\n  const employeeSkillsToInsert: { employee_id: string; skill_id: string; level: number }[] = [];\n\n  for (const [empNumber, skills] of Object.entries(demoSkillLevels)) {\n    const employeeId = employeeByNumber.get(empNumber);\n    if (!employeeId) continue;\n\n    for (const [skillCode, level] of Object.entries(skills)) {\n      const skillId = skillByCode.get(skillCode);\n      if (!skillId) continue;\n\n      employeeSkillsToInsert.push({\n        employee_id: employeeId,\n        skill_id: skillId,\n        level,\n      });\n    }\n  }\n\n  const { error: employeeSkillsError } = await supabase\n    .from(\"employee_skills\")\n    .insert(employeeSkillsToInsert);\n\n  if (employeeSkillsError) {\n    throw new Error(`Failed to insert employee_skills: ${employeeSkillsError.message}`);\n  }\n}\n\nexport async function getFilterOptions(): Promise<{\n  lines: string[];\n  teams: string[];\n}> {\n  const { data, error } = await supabase\n    .from(\"employees\")\n    .select(\"line, team\");\n\n  if (error) {\n    throw new Error(`Failed to fetch filter options: ${error.message}`);\n  }\n\n  const lines = [...new Set((data || []).map((row) => row.line).filter(Boolean))].sort();\n  const teams = [...new Set((data || []).map((row) => row.team).filter(Boolean))].sort();\n\n  return { lines, teams };\n}\n\nexport async function getEmployeesWithSkills(filters?: {\n  line?: string;\n  team?: string;\n}): Promise<{\n  employees: Employee[];\n  skills: Skill[];\n  employeeSkills: EmployeeSkill[];\n}> {\n  let employeesQuery = supabase.from(\"employees\").select(\"*\");\n  \n  if (filters?.line) {\n    employeesQuery = employeesQuery.eq(\"line\", filters.line);\n  }\n  if (filters?.team) {\n    employeesQuery = employeesQuery.eq(\"team\", filters.team);\n  }\n\n  const [employeesResult, skillsResult, employeeSkillsResult] = await Promise.all([\n    employeesQuery,\n    supabase.from(\"skills\").select(\"*\"),\n    supabase.from(\"employee_skills\").select(\"*\"),\n  ]);\n\n  if (employeesResult.error) {\n    throw new Error(`Failed to fetch employees: ${employeesResult.error.message}`);\n  }\n\n  if (skillsResult.error) {\n    throw new Error(`Failed to fetch skills: ${skillsResult.error.message}`);\n  }\n\n  if (employeeSkillsResult.error) {\n    throw new Error(`Failed to fetch employee_skills: ${employeeSkillsResult.error.message}`);\n  }\n\n  const employees: Employee[] = (employeesResult.data || []).map((row) => ({\n    id: row.id,\n    name: row.name,\n    employeeNumber: row.employee_number,\n    role: row.role,\n    line: row.line,\n    team: row.team,\n    isActive: row.is_active,\n  }));\n\n  const skills: Skill[] = (skillsResult.data || []).map((row) => ({\n    id: row.id,\n    code: row.code,\n    name: row.name,\n    category: row.category,\n    description: row.description,\n  }));\n\n  const employeeSkills: EmployeeSkill[] = (employeeSkillsResult.data || []).map((row) => ({\n    employeeId: row.employee_id,\n    skillId: row.skill_id,\n    level: row.level as CompetenceLevel[\"value\"],\n  }));\n\n  return { employees, skills, employeeSkills };\n}\n\nexport interface CompetenceGap {\n  line: string;\n  team: string;\n  skillName: string;\n  skillCode: string;\n  requiredLevel: number;\n  requiredHeadcount: number;\n  actualHeadcount: number;\n  missingHeadcount: number;\n}\n\nexport async function getTomorrowsGaps(): Promise<CompetenceGap[]> {\n  const targetDate = new Date();\n  targetDate.setDate(targetDate.getDate() + 1);\n  const targetDateStr = targetDate.toISOString().split(\"T\")[0];\n\n  const { data: requirements, error: reqError } = await supabase\n    .from(\"competence_requirements\")\n    .select(\"*\")\n    .lte(\"effective_date\", targetDateStr);\n\n  if (reqError) {\n    throw new Error(`Failed to fetch competence_requirements: ${reqError.message}`);\n  }\n\n  if (!requirements || requirements.length === 0) {\n    return [];\n  }\n\n  const [employeesResult, skillsResult, employeeSkillsResult] = await Promise.all([\n    supabase.from(\"employees\").select(\"*\").eq(\"is_active\", true),\n    supabase.from(\"skills\").select(\"*\"),\n    supabase.from(\"employee_skills\").select(\"*\"),\n  ]);\n\n  if (employeesResult.error) {\n    throw new Error(`Failed to fetch employees: ${employeesResult.error.message}`);\n  }\n  if (skillsResult.error) {\n    throw new Error(`Failed to fetch skills: ${skillsResult.error.message}`);\n  }\n  if (employeeSkillsResult.error) {\n    throw new Error(`Failed to fetch employee_skills: ${employeeSkillsResult.error.message}`);\n  }\n\n  const employees = employeesResult.data || [];\n  const skills = skillsResult.data || [];\n  const employeeSkills = employeeSkillsResult.data || [];\n\n  const skillMap = new Map<string, { code: string; name: string }>();\n  for (const skill of skills) {\n    skillMap.set(skill.id, { code: skill.code, name: skill.name });\n  }\n\n  const employeeSkillMap = new Map<string, Map<string, number>>();\n  for (const es of employeeSkills) {\n    if (!employeeSkillMap.has(es.employee_id)) {\n      employeeSkillMap.set(es.employee_id, new Map());\n    }\n    employeeSkillMap.get(es.employee_id)!.set(es.skill_id, es.level);\n  }\n\n  const gaps: CompetenceGap[] = [];\n\n  for (const req of requirements) {\n    const { line, team, skill_id, min_level, required_headcount } = req;\n\n    const skillInfo = skillMap.get(skill_id);\n    if (!skillInfo) continue;\n\n    const matchingEmployees = employees.filter(\n      (emp) => emp.line === line && emp.team === team\n    );\n\n    let actualHeadcount = 0;\n    for (const emp of matchingEmployees) {\n      const empSkills = employeeSkillMap.get(emp.id);\n      const level = empSkills?.get(skill_id) ?? 0;\n      if (level >= min_level) {\n        actualHeadcount++;\n      }\n    }\n\n    const missingHeadcount = Math.max(0, required_headcount - actualHeadcount);\n\n    if (missingHeadcount > 0) {\n      gaps.push({\n        line,\n        team,\n        skillCode: skillInfo.code,\n        skillName: skillInfo.name,\n        requiredLevel: min_level,\n        requiredHeadcount: required_headcount,\n        actualHeadcount,\n        missingHeadcount,\n      });\n    }\n  }\n\n  return gaps;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 344, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/app/gaps/page.tsx"],"sourcesContent":["import { getTomorrowsGaps } from \"@/services/competenceService\";\n\nexport const dynamic = \"force-dynamic\";\n\nexport default async function GapsPage() {\n  const targetDate = new Date();\n  targetDate.setDate(targetDate.getDate() + 1);\n  const formattedDate = targetDate.toLocaleDateString(\"en-US\", {\n    weekday: \"long\",\n    year: \"numeric\",\n    month: \"long\",\n    day: \"numeric\",\n  });\n\n  const gaps = await getTomorrowsGaps();\n\n  return (\n    <div>\n      <h1\n        className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\"\n        data-testid=\"heading-tomorrows-gaps\"\n      >\n        Tomorrow's Gaps\n      </h1>\n      <p\n        className=\"text-sm text-gray-500 dark:text-gray-400 mb-6\"\n        data-testid=\"text-target-date\"\n      >\n        Target date: {formattedDate}\n      </p>\n\n      <div className=\"bg-white dark:bg-gray-800 rounded-md border border-gray-200 dark:border-gray-700 overflow-hidden\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\" data-testid=\"gaps-table\">\n            <thead>\n              <tr className=\"border-b border-gray-200 dark:border-gray-700\">\n                <th className=\"text-left p-3 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-50 dark:bg-gray-700/50\">\n                  Line\n                </th>\n                <th className=\"text-left p-3 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-50 dark:bg-gray-700/50\">\n                  Team\n                </th>\n                <th className=\"text-left p-3 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-50 dark:bg-gray-700/50\">\n                  Skill\n                </th>\n                <th className=\"text-center p-3 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-50 dark:bg-gray-700/50\">\n                  Required Level\n                </th>\n                <th className=\"text-center p-3 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-50 dark:bg-gray-700/50\">\n                  Required\n                </th>\n                <th className=\"text-center p-3 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-50 dark:bg-gray-700/50\">\n                  Actual\n                </th>\n                <th className=\"text-center p-3 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-50 dark:bg-gray-700/50\">\n                  Missing\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              {gaps.length === 0 ? (\n                <tr>\n                  <td\n                    colSpan={7}\n                    className=\"p-6 text-center text-gray-500 dark:text-gray-400\"\n                    data-testid=\"no-gaps-message\"\n                  >\n                    No competence gaps found for tomorrow.\n                  </td>\n                </tr>\n              ) : (\n                gaps.map((gap, index) => (\n                  <tr\n                    key={`${gap.line}-${gap.team}-${gap.skillCode}-${index}`}\n                    className={`${\n                      index < gaps.length - 1\n                        ? \"border-b border-gray-200 dark:border-gray-700\"\n                        : \"\"\n                    } ${\n                      gap.missingHeadcount > 0\n                        ? \"bg-red-50 dark:bg-red-900/20\"\n                        : \"\"\n                    }`}\n                    data-testid={`row-gap-${index}`}\n                  >\n                    <td className=\"p-3 text-sm text-gray-900 dark:text-white\">\n                      {gap.line}\n                    </td>\n                    <td className=\"p-3 text-sm text-gray-900 dark:text-white\">\n                      {gap.team}\n                    </td>\n                    <td className=\"p-3 text-sm\">\n                      <div className=\"text-gray-900 dark:text-white\">\n                        {gap.skillCode}\n                      </div>\n                      <div className=\"text-xs text-gray-500 dark:text-gray-400\">\n                        {gap.skillName}\n                      </div>\n                    </td>\n                    <td className=\"p-3 text-sm text-center text-gray-900 dark:text-white\">\n                      {gap.requiredLevel}\n                    </td>\n                    <td className=\"p-3 text-sm text-center text-gray-900 dark:text-white\">\n                      {gap.requiredHeadcount}\n                    </td>\n                    <td className=\"p-3 text-sm text-center text-gray-900 dark:text-white\">\n                      {gap.actualHeadcount}\n                    </td>\n                    <td className=\"p-3 text-sm text-center font-medium text-red-600 dark:text-red-400\">\n                      {gap.missingHeadcount}\n                    </td>\n                  </tr>\n                ))\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;;;AAAA;;;AAEO,MAAM,UAAU;AAER,eAAe;IAC5B,MAAM,aAAa,IAAI;IACvB,WAAW,OAAO,CAAC,WAAW,OAAO,KAAK;IAC1C,MAAM,gBAAgB,WAAW,kBAAkB,CAAC,SAAS;QAC3D,SAAS;QACT,MAAM;QACN,OAAO;QACP,KAAK;IACP;IAEA,MAAM,OAAO,MAAM,IAAA,iJAAgB;IAEnC,qBACE,8OAAC;;0BACC,8OAAC;gBACC,WAAU;gBACV,eAAY;0BACb;;;;;;0BAGD,8OAAC;gBACC,WAAU;gBACV,eAAY;;oBACb;oBACe;;;;;;;0BAGhB,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAM,WAAU;wBAAS,eAAY;;0CACpC,8OAAC;0CACC,cAAA,8OAAC;oCAAG,WAAU;;sDACZ,8OAAC;4CAAG,WAAU;sDAAoG;;;;;;sDAGlH,8OAAC;4CAAG,WAAU;sDAAoG;;;;;;sDAGlH,8OAAC;4CAAG,WAAU;sDAAoG;;;;;;sDAGlH,8OAAC;4CAAG,WAAU;sDAAsG;;;;;;sDAGpH,8OAAC;4CAAG,WAAU;sDAAsG;;;;;;sDAGpH,8OAAC;4CAAG,WAAU;sDAAsG;;;;;;sDAGpH,8OAAC;4CAAG,WAAU;sDAAsG;;;;;;;;;;;;;;;;;0CAKxH,8OAAC;0CACE,KAAK,MAAM,KAAK,kBACf,8OAAC;8CACC,cAAA,8OAAC;wCACC,SAAS;wCACT,WAAU;wCACV,eAAY;kDACb;;;;;;;;;;2CAKH,KAAK,GAAG,CAAC,CAAC,KAAK,sBACb,8OAAC;wCAEC,WAAW,GACT,QAAQ,KAAK,MAAM,GAAG,IAClB,kDACA,GACL,CAAC,EACA,IAAI,gBAAgB,GAAG,IACnB,iCACA,IACJ;wCACF,eAAa,CAAC,QAAQ,EAAE,OAAO;;0DAE/B,8OAAC;gDAAG,WAAU;0DACX,IAAI,IAAI;;;;;;0DAEX,8OAAC;gDAAG,WAAU;0DACX,IAAI,IAAI;;;;;;0DAEX,8OAAC;gDAAG,WAAU;;kEACZ,8OAAC;wDAAI,WAAU;kEACZ,IAAI,SAAS;;;;;;kEAEhB,8OAAC;wDAAI,WAAU;kEACZ,IAAI,SAAS;;;;;;;;;;;;0DAGlB,8OAAC;gDAAG,WAAU;0DACX,IAAI,aAAa;;;;;;0DAEpB,8OAAC;gDAAG,WAAU;0DACX,IAAI,iBAAiB;;;;;;0DAExB,8OAAC;gDAAG,WAAU;0DACX,IAAI,eAAe;;;;;;0DAEtB,8OAAC;gDAAG,WAAU;0DACX,IAAI,gBAAgB;;;;;;;uCApClB,GAAG,IAAI,IAAI,CAAC,CAAC,EAAE,IAAI,IAAI,CAAC,CAAC,EAAE,IAAI,SAAS,CAAC,CAAC,EAAE,OAAO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+C5E"}}]
}