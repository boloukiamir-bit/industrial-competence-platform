{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/env.ts"],"sourcesContent":["/**\n * Environment variable helper with fail-fast behavior\n * Ensures Supabase credentials are always available\n */\n\nexport interface PublicEnv {\n  supabaseUrl: string;\n  supabaseAnonKey: string;\n}\n\n// Hardcoded fallback values for production builds\nconst FALLBACK_SUPABASE_URL = \"https://bmvawfrnlpdvcmffqrzc.supabase.co\";\nconst FALLBACK_SUPABASE_ANON_KEY = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJtdmF3ZnJubHBkdmNtZmZxcnpjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU1MTEwOTAsImV4cCI6MjA4MTA4NzA5MH0.DHLJ4aMn1dORfbNPt1XrJtcdIjYN81YQbJ19Q89A_pM\";\n\n/**\n * Get public environment variables with fail-fast behavior\n * Throws if credentials are not available\n */\nexport function getPublicEnv(): PublicEnv {\n  const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || FALLBACK_SUPABASE_URL;\n  const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || FALLBACK_SUPABASE_ANON_KEY;\n\n  const missing: string[] = [];\n  \n  if (!supabaseUrl || supabaseUrl.includes('placeholder')) {\n    missing.push('NEXT_PUBLIC_SUPABASE_URL');\n  }\n  if (!supabaseAnonKey || supabaseAnonKey.includes('placeholder')) {\n    missing.push('NEXT_PUBLIC_SUPABASE_ANON_KEY');\n  }\n\n  if (missing.length > 0) {\n    throw new Error(`Supabase env missing: ${missing.join(', ')}`);\n  }\n\n  return {\n    supabaseUrl,\n    supabaseAnonKey,\n  };\n}\n\n/**\n * Check if public environment is properly configured\n * Returns validation result without throwing\n */\nexport function validatePublicEnv(): { valid: boolean; missing: string[] } {\n  const missing: string[] = [];\n  \n  const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || FALLBACK_SUPABASE_URL;\n  const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || FALLBACK_SUPABASE_ANON_KEY;\n\n  if (!supabaseUrl || supabaseUrl.includes('placeholder')) {\n    missing.push('NEXT_PUBLIC_SUPABASE_URL');\n  }\n  if (!supabaseAnonKey || supabaseAnonKey.includes('placeholder')) {\n    missing.push('NEXT_PUBLIC_SUPABASE_ANON_KEY');\n  }\n\n  return {\n    valid: missing.length === 0,\n    missing,\n  };\n}\n\n/**\n * Get the service role key (server-side only)\n * Never expose this to client code\n */\nexport function getServiceRoleKey(): string {\n  if (typeof window !== 'undefined') {\n    throw new Error('Service role key must never be accessed on the client');\n  }\n  \n  const key = process.env.SUPABASE_SERVICE_ROLE_KEY;\n  if (!key) {\n    throw new Error('SUPABASE_SERVICE_ROLE_KEY is not configured');\n  }\n  \n  return key;\n}\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;AAOD,kDAAkD;AAClD,MAAM,wBAAwB;AAC9B,MAAM,6BAA6B;AAM5B,SAAS;IACd,MAAM,cAAc,gFAAwC;IAC5D,MAAM,kBAAkB,wPAA6C;IAErE,MAAM,UAAoB,EAAE;IAE5B,IAAI,CAAC,eAAe,YAAY,QAAQ,CAAC,gBAAgB;QACvD,QAAQ,IAAI,CAAC;IACf;IACA,IAAI,CAAC,mBAAmB,gBAAgB,QAAQ,CAAC,gBAAgB;QAC/D,QAAQ,IAAI,CAAC;IACf;IAEA,IAAI,QAAQ,MAAM,GAAG,GAAG;QACtB,MAAM,IAAI,MAAM,CAAC,sBAAsB,EAAE,QAAQ,IAAI,CAAC,OAAO;IAC/D;IAEA,OAAO;QACL;QACA;IACF;AACF;AAMO,SAAS;IACd,MAAM,UAAoB,EAAE;IAE5B,MAAM,cAAc,gFAAwC;IAC5D,MAAM,kBAAkB,wPAA6C;IAErE,IAAI,CAAC,eAAe,YAAY,QAAQ,CAAC,gBAAgB;QACvD,QAAQ,IAAI,CAAC;IACf;IACA,IAAI,CAAC,mBAAmB,gBAAgB,QAAQ,CAAC,gBAAgB;QAC/D,QAAQ,IAAI,CAAC;IACf;IAEA,OAAO;QACL,OAAO,QAAQ,MAAM,KAAK;QAC1B;IACF;AACF;AAMO,SAAS;IACd;;IAIA,MAAM,MAAM,QAAQ,GAAG,CAAC,yBAAyB;IACjD,IAAI,CAAC,KAAK;QACR,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO;AACT"}},
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/supabaseClient.ts"],"sourcesContent":["import { createClient, SupabaseClient } from \"@supabase/supabase-js\";\nimport { getPublicEnv, validatePublicEnv } from \"./env\";\n\nlet supabaseInstance: SupabaseClient | null = null;\n\nfunction createSupabaseClient(): SupabaseClient {\n  const env = getPublicEnv();\n  return createClient(env.supabaseUrl, env.supabaseAnonKey, {\n    auth: {\n      persistSession: true,\n      autoRefreshToken: true,\n      detectSessionInUrl: true,\n    },\n  });\n}\n\nexport function getSupabaseClient(): SupabaseClient {\n  if (!supabaseInstance) {\n    supabaseInstance = createSupabaseClient();\n  }\n  return supabaseInstance;\n}\n\nexport const supabase: SupabaseClient = createSupabaseClient();\n\nexport function isSupabaseReady(): boolean {\n  const validation = validatePublicEnv();\n  return validation.valid;\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAEA,IAAI,mBAA0C;AAE9C,SAAS;IACP,MAAM,MAAM,IAAA,0HAAY;IACxB,OAAO,IAAA,uLAAY,EAAC,IAAI,WAAW,EAAE,IAAI,eAAe,EAAE;QACxD,MAAM;YACJ,gBAAgB;YAChB,kBAAkB;YAClB,oBAAoB;QACtB;IACF;AACF;AAEO,SAAS;IACd,IAAI,CAAC,kBAAkB;QACrB,mBAAmB;IACrB;IACA,OAAO;AACT;AAEO,MAAM,WAA2B;AAEjC,SAAS;IACd,MAAM,aAAa,IAAA,+HAAiB;IACpC,OAAO,WAAW,KAAK;AACzB"}},
    {"offset": {"line": 108, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/services/competence.ts"],"sourcesContent":["// services/competence.ts\nimport { supabase } from \"@/lib/supabaseClient\";\n\nexport type EmployeeCompetenceItem = {\n  competenceId: string;\n  competenceName: string;\n  competenceCode: string | null;\n  groupName: string | null;\n  requiredLevel: number | null;\n  mandatory: boolean;\n  employeeLevel: number | null;\n  validTo: string | null;\n  status: \"OK\" | \"GAP\" | \"RISK\" | \"N/A\";\n  riskReason: string | null;\n  isSafetyCritical: boolean;\n};\n\nexport type EmployeeCompetenceSummary = {\n  riskLevel: \"LOW\" | \"MEDIUM\" | \"HIGH\";\n  gapCount: number;\n  totalRequired: number;\n  coveragePercent: number; // 0–100\n  expiredCount: number;\n};\n\nexport type EmployeeCompetenceProfile = {\n  employee: {\n    id: string;\n    name: string;\n    positionName: string | null;\n  };\n  summary: EmployeeCompetenceSummary;\n  items: EmployeeCompetenceItem[];\n};\n\nexport type PositionSummary = {\n  id: string;\n  name: string;\n  site: string | null;\n  department: string | null;\n};\n\nexport type SimpleEmployee = {\n  id: string;\n  name: string;\n};\n\nexport type MatrixColumn = {\n  competenceId: string;\n  label: string;\n  groupName: string | null;\n  requiredLevel: number | null;\n};\n\nexport type MatrixCellStatus = 'OK' | 'GAP' | 'RISK' | 'N/A';\n\nexport type MatrixRow = {\n  employeeId: string;\n  employeeName: string;\n  riskLevel: 'LOW' | 'MEDIUM' | 'HIGH';\n  items: {\n    competenceId: string;\n    status: MatrixCellStatus;\n    level: number | null;\n    requiredLevel?: number | null;\n  }[];\n};\n\nexport async function getAllPositions(): Promise<PositionSummary[]> {\n  const { data, error } = await supabase\n    .from('positions')\n    .select('id, name, site, department')\n    .order('name', { ascending: true });\n\n  if (error) throw error;\n  return (data ?? []) as PositionSummary[];\n}\n\nexport async function getEmployeesForPosition(positionId: string): Promise<SimpleEmployee[]> {\n  const { data, error } = await supabase\n    .from('employees')\n    .select('id, name')\n    .eq('position_id', positionId);\n\n  if (error) throw error;\n\n  return (data ?? []).map((row: any) => ({\n    id: row.id,\n    name: row.name ?? 'Employee',\n  }));\n}\n\ntype EmployeeRow = {\n  id: string;\n  name?: string | null;\n  position_id?: string | null;\n};\n\ntype RequirementRow = {\n  id: string;\n  position_id: string;\n  competence_id: string;\n  required_level: number;\n  mandatory: boolean;\n};\n\ntype EmployeeCompetenceRow = {\n  id: string;\n  employee_id: string;\n  competence_id: string;\n  level: number;\n  valid_from: string | null;\n  valid_to: string | null;\n};\n\ntype CompetenceRow = {\n  id: string;\n  name: string;\n  description?: string | null;\n  code?: string | null;\n  group_id?: string | null;\n  is_safety_critical: boolean;\n};\n\ntype GroupRow = {\n  id: string;\n  name: string;\n};\n\nexport async function getEmployeeCompetenceProfile(\n  employeeId: string,\n  effectiveDate?: string\n): Promise<EmployeeCompetenceProfile> {\n  // Use provided date or default to today\n  const effectiveDateStr =\n    effectiveDate ?? new Date().toISOString().slice(0, 10);\n\n  // 1) Employee\n  const { data: employeeRow, error: empError } = await supabase\n    .from(\"employees\")\n    .select(\"id, name, position_id\")\n    .eq(\"id\", employeeId)\n    .single<EmployeeRow>();\n\n  if (empError || !employeeRow) {\n    console.error(empError);\n    throw empError ?? new Error(\"Employee not found\");\n  }\n\n  const employeeName = employeeRow.name ?? \"Employee\";\n\n  // 2) Position (optional)\n  let positionName: string | null = null;\n  const positionId = employeeRow.position_id ?? null;\n\n  if (positionId) {\n    const { data: posRows } = await supabase\n      .from(\"positions\")\n      .select(\"id, name\")\n      .eq(\"id\", positionId)\n      .limit(1);\n\n    const pos = posRows?.[0] as { id: string; name: string } | undefined;\n    if (pos) {\n      positionName = pos.name;\n    }\n  }\n\n  // 3) Requirements for this position\n  let requirementRows: RequirementRow[] = [];\n  if (positionId) {\n    const { data: reqData, error: reqError } = await supabase\n      .from(\"position_competence_requirements\")\n      .select(\"id, position_id, competence_id, required_level, mandatory\")\n      .eq(\"position_id\", positionId);\n\n    if (reqError) {\n      console.error(reqError);\n      throw reqError;\n    }\n    requirementRows = (reqData ?? []) as RequirementRow[];\n  }\n\n  // 4) Employee competences\n  const { data: empCompData, error: empCompError } = await supabase\n    .from(\"employee_competences\")\n    .select(\"id, employee_id, competence_id, level, valid_from, valid_to\")\n    .eq(\"employee_id\", employeeId);\n\n  if (empCompError) {\n    console.error(empCompError);\n    throw empCompError;\n  }\n\n  const employeeCompRows = (empCompData ?? []) as EmployeeCompetenceRow[];\n  const empCompByCompetenceId = new Map<string, EmployeeCompetenceRow>();\n  for (const row of employeeCompRows) {\n    empCompByCompetenceId.set(row.competence_id, row);\n  }\n\n  // 5) Load all involved competences + groups\n  const competenceIds = new Set<string>();\n  requirementRows.forEach((r) => competenceIds.add(r.competence_id));\n  employeeCompRows.forEach((r) => competenceIds.add(r.competence_id));\n\n  const competencesById = new Map<\n    string,\n    CompetenceRow & { groupName: string | null }\n  >();\n\n  if (competenceIds.size > 0) {\n    const { data: compData, error: compError } = await supabase\n      .from(\"competences\")\n      .select(\"id, name, description, code, group_id, is_safety_critical\")\n      .in(\"id\", Array.from(competenceIds));\n\n    if (compError) {\n      console.error(compError);\n      throw compError;\n    }\n\n    const comps = (compData ?? []) as CompetenceRow[];\n\n    const groupIds = new Set<string>();\n    comps.forEach((c) => {\n      if (c.group_id) groupIds.add(c.group_id);\n    });\n\n    let groupById = new Map<string, string>();\n    if (groupIds.size > 0) {\n      const { data: groupData, error: groupError } = await supabase\n        .from(\"competence_groups\")\n        .select(\"id, name\")\n        .in(\"id\", Array.from(groupIds));\n\n      if (groupError) {\n        console.error(groupError);\n      } else {\n        (groupData ?? []).forEach((g) => {\n          const gr = g as GroupRow;\n          groupById.set(gr.id, gr.name);\n        });\n      }\n    }\n\n    comps.forEach((c) => {\n      competencesById.set(c.id, {\n        ...c,\n        groupName: c.group_id ? (groupById.get(c.group_id) ?? null) : null,\n      });\n    });\n  }\n\n  function isExpired(validTo: string | null): boolean {\n    if (!validTo) return false;\n    return validTo < effectiveDateStr;\n  }\n\n  const items: EmployeeCompetenceItem[] = [];\n  let totalRequired = 0;\n  let gapCount = 0;\n  let expiredCount = 0;\n\n  const usedCompetenceIds = new Set<string>();\n\n  // 6) Build items for all requirements (rollkrav)\n  for (const req of requirementRows) {\n    const compInfo = competencesById.get(req.competence_id);\n    if (!compInfo) continue;\n\n    const empComp = empCompByCompetenceId.get(req.competence_id) ?? null;\n\n    let status: \"OK\" | \"GAP\" | \"RISK\" | \"N/A\" = \"N/A\";\n    let riskReason: string | null = null;\n    let empLevel: number | null = empComp ? empComp.level : null;\n    const validTo = empComp?.valid_to ?? null;\n\n    if (req.mandatory) {\n      totalRequired += 1;\n\n      if (!empComp) {\n        status = \"RISK\";\n        riskReason = \"Saknar kompetens\";\n        gapCount += 1;\n      } else if (isExpired(validTo)) {\n        status = \"RISK\";\n        riskReason = \"Utgången giltighet\";\n        gapCount += 1;\n        expiredCount += 1;\n      } else if (empLevel! < req.required_level) {\n        if (empLevel! >= req.required_level - 1) {\n          status = \"GAP\";\n          riskReason = \"En nivå under krav\";\n          gapCount += 1;\n        } else {\n          status = \"RISK\";\n          riskReason = \"För låg nivå\";\n          gapCount += 1;\n        }\n      } else {\n        status = \"OK\";\n      }\n    } else {\n      // ej obligatorisk men definierad\n      status = empComp ? \"OK\" : \"N/A\";\n    }\n\n    items.push({\n      competenceId: compInfo.id,\n      competenceName: compInfo.name,\n      competenceCode: compInfo.code ?? null,\n      groupName: compInfo.groupName,\n      requiredLevel: req.required_level,\n      mandatory: req.mandatory,\n      employeeLevel: empLevel,\n      validTo,\n      status,\n      riskReason,\n      isSafetyCritical: compInfo.is_safety_critical,\n    });\n\n    usedCompetenceIds.add(compInfo.id);\n  }\n\n  // 7) Extra kompetenser som inte finns i rollkraven (nice-to-have / historik)\n  for (const empComp of employeeCompRows) {\n    if (usedCompetenceIds.has(empComp.competence_id)) continue;\n    const compInfo = competencesById.get(empComp.competence_id);\n    if (!compInfo) continue;\n\n    items.push({\n      competenceId: compInfo.id,\n      competenceName: compInfo.name,\n      competenceCode: compInfo.code ?? null,\n      groupName: compInfo.groupName,\n      requiredLevel: null,\n      mandatory: false,\n      employeeLevel: empComp.level,\n      validTo: empComp.valid_to,\n      status: isExpired(empComp.valid_to) ? \"RISK\" : \"N/A\",\n      riskReason: isExpired(empComp.valid_to) ? \"Utgången giltighet\" : null,\n      isSafetyCritical: compInfo.is_safety_critical,\n    });\n  }\n\n  // 8) Summary / risk score\n  const coveragePercent =\n    totalRequired === 0\n      ? 100\n      : Math.round(((totalRequired - gapCount) / totalRequired) * 100);\n\n  let riskLevel: \"LOW\" | \"MEDIUM\" | \"HIGH\" = \"LOW\";\n  if (gapCount === 0) {\n    riskLevel = \"LOW\";\n  } else if (gapCount <= 2) {\n    riskLevel = \"MEDIUM\";\n  } else {\n    riskLevel = \"HIGH\";\n  }\n\n  // Sortera per grupp + namn\n  items.sort((a, b) => {\n    const g1 = a.groupName ?? \"\";\n    const g2 = b.groupName ?? \"\";\n    if (g1 !== g2) return g1.localeCompare(g2);\n    return a.competenceName.localeCompare(b.competenceName);\n  });\n\n  return {\n    employee: {\n      id: employeeRow.id,\n      name: employeeName,\n      positionName,\n    },\n    summary: {\n      riskLevel,\n      gapCount,\n      totalRequired,\n      coveragePercent,\n      expiredCount,\n    },\n    items,\n  };\n}\n\nexport type PositionCoverageSummary = {\n  positionId: string;\n  positionName: string;\n  site: string | null;\n  department: string | null;\n  minHeadcount: number;\n  availableCount: number;\n  gap: number;\n  riskLevel: 'LOW' | 'MEDIUM' | 'HIGH';\n};\n\nexport async function getPositionCoverageForDate(\n  effectiveDate: string\n): Promise<PositionCoverageSummary[]> {\n  let positions: {\n    id: string;\n    name: string;\n    site: string | null;\n    department: string | null;\n    minHeadcount: number;\n  }[] = [];\n\n  const result = await supabase\n    .from('positions')\n    .select('id, name, site, department, min_headcount')\n    .gt('min_headcount', 0);\n\n  if (result.error) {\n    const errorCode = (result.error as any).code;\n    if (errorCode === '42703' || result.error.message?.includes('min_headcount')) {\n      console.warn('min_headcount column not found, returning empty positions list');\n      return [];\n    }\n    throw result.error;\n  }\n\n  positions = (result.data ?? []).map((p: any) => ({\n    id: p.id as string,\n    name: p.name as string,\n    site: (p.site ?? null) as string | null,\n    department: (p.department ?? null) as string | null,\n    minHeadcount: p.min_headcount as number,\n  }));\n\n  const results: PositionCoverageSummary[] = [];\n\n  for (const pos of positions) {\n    const employees = await getEmployeesForPosition(pos.id);\n\n    if (employees.length === 0) {\n      results.push({\n        positionId: pos.id,\n        positionName: pos.name,\n        site: pos.site,\n        department: pos.department,\n        minHeadcount: pos.minHeadcount,\n        availableCount: 0,\n        gap: pos.minHeadcount,\n        riskLevel: 'HIGH',\n      });\n      continue;\n    }\n\n    let availableCount = 0;\n\n    for (const emp of employees) {\n      const profile = await getEmployeeCompetenceProfile(\n        emp.id,\n        effectiveDate\n      );\n\n      const isFullyCompetent = profile.summary.gapCount === 0;\n\n      if (isFullyCompetent) {\n        availableCount += 1;\n      }\n    }\n\n    const gap = Math.max(0, pos.minHeadcount - availableCount);\n\n    let riskLevel: 'LOW' | 'MEDIUM' | 'HIGH' = 'LOW';\n    if (gap > 0 && availableCount === 0) {\n      riskLevel = 'HIGH';\n    } else if (gap > 0) {\n      riskLevel = 'MEDIUM';\n    } else {\n      riskLevel = 'LOW';\n    }\n\n    results.push({\n      positionId: pos.id,\n      positionName: pos.name,\n      site: pos.site,\n      department: pos.department,\n      minHeadcount: pos.minHeadcount,\n      availableCount,\n      gap,\n      riskLevel,\n    });\n  }\n\n  const riskRank: Record<'LOW' | 'MEDIUM' | 'HIGH', number> = {\n    HIGH: 0,\n    MEDIUM: 1,\n    LOW: 2,\n  };\n\n  results.sort((a, b) => {\n    const rDiff = riskRank[a.riskLevel] - riskRank[b.riskLevel];\n    if (rDiff !== 0) return rDiff;\n    return a.positionName.localeCompare(b.positionName);\n  });\n\n  return results;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 403, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB"}},
    {"offset": {"line": 418, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/ui/select.tsx"],"sourcesContent":["\"use client\";\n\nimport * as SelectPrimitive from \"@radix-ui/react-select\";\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\nconst Select = SelectPrimitive.Root;\nconst SelectGroup = SelectPrimitive.Group;\nconst SelectValue = SelectPrimitive.Value;\n\nfunction SelectTrigger({\n  className,\n  children,\n  ...props\n}: React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>) {\n  return (\n    <SelectPrimitive.Trigger\n      className={cn(\n        \"flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <SelectPrimitive.Icon asChild>\n        <ChevronDown className=\"h-4 w-4 opacity-50\" />\n      </SelectPrimitive.Icon>\n    </SelectPrimitive.Trigger>\n  );\n}\n\nfunction SelectScrollUpButton({\n  className,\n  ...props\n}: React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>) {\n  return (\n    <SelectPrimitive.ScrollUpButton\n      className={cn(\"flex cursor-default items-center justify-center py-1\", className)}\n      {...props}\n    >\n      <ChevronUp className=\"h-4 w-4\" />\n    </SelectPrimitive.ScrollUpButton>\n  );\n}\n\nfunction SelectScrollDownButton({\n  className,\n  ...props\n}: React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>) {\n  return (\n    <SelectPrimitive.ScrollDownButton\n      className={cn(\"flex cursor-default items-center justify-center py-1\", className)}\n      {...props}\n    >\n      <ChevronDown className=\"h-4 w-4\" />\n    </SelectPrimitive.ScrollDownButton>\n  );\n}\n\nfunction SelectContent({\n  className,\n  children,\n  position = \"popper\",\n  ...props\n}: React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>) {\n  return (\n    <SelectPrimitive.Portal>\n      <SelectPrimitive.Content\n        className={cn(\n          \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n          position === \"popper\" &&\n            \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n          className\n        )}\n        position={position}\n        {...props}\n      >\n        <SelectScrollUpButton />\n        <SelectPrimitive.Viewport\n          className={cn(\n            \"p-1\",\n            position === \"popper\" &&\n              \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n          )}\n        >\n          {children}\n        </SelectPrimitive.Viewport>\n        <SelectScrollDownButton />\n      </SelectPrimitive.Content>\n    </SelectPrimitive.Portal>\n  );\n}\n\nfunction SelectLabel({\n  className,\n  ...props\n}: React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>) {\n  return (\n    <SelectPrimitive.Label\n      className={cn(\"px-2 py-1.5 text-sm font-semibold\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction SelectItem({\n  className,\n  children,\n  ...props\n}: React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>) {\n  return (\n    <SelectPrimitive.Item\n      className={cn(\n        \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <span className=\"absolute right-2 flex h-3.5 w-3.5 items-center justify-center\">\n        <SelectPrimitive.ItemIndicator>\n          <Check className=\"h-4 w-4\" />\n        </SelectPrimitive.ItemIndicator>\n      </span>\n      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n    </SelectPrimitive.Item>\n  );\n}\n\nfunction SelectSeparator({\n  className,\n  ...props\n}: React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>) {\n  return (\n    <SelectPrimitive.Separator\n      className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n      {...props}\n    />\n  );\n}\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AAAA;AAAA;AACA;AAJA;;;;;AAMA,MAAM,SAAS,0KAAoB;AACnC,MAAM,cAAc,2KAAqB;AACzC,MAAM,cAAc,2KAAqB;AAEzC,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,GAAG,OAC4D;IAC/D,qBACE,8OAAC,6KAAuB;QACtB,WAAW,IAAA,kHAAE,EACX,2TACA;QAED,GAAG,KAAK;;YAER;0BACD,8OAAC,0KAAoB;gBAAC,OAAO;0BAC3B,cAAA,8OAAC,mOAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI/B;AAEA,SAAS,qBAAqB,EAC5B,SAAS,EACT,GAAG,OACmE;IACtE,qBACE,8OAAC,oLAA8B;QAC7B,WAAW,IAAA,kHAAE,EAAC,wDAAwD;QACrE,GAAG,KAAK;kBAET,cAAA,8OAAC,6NAAS;YAAC,WAAU;;;;;;;;;;;AAG3B;AAEA,SAAS,uBAAuB,EAC9B,SAAS,EACT,GAAG,OACqE;IACxE,qBACE,8OAAC,sLAAgC;QAC/B,WAAW,IAAA,kHAAE,EAAC,wDAAwD;QACrE,GAAG,KAAK;kBAET,cAAA,8OAAC,mOAAW;YAAC,WAAU;;;;;;;;;;;AAG7B;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,WAAW,QAAQ,EACnB,GAAG,OAC4D;IAC/D,qBACE,8OAAC,4KAAsB;kBACrB,cAAA,8OAAC,6KAAuB;YACtB,WAAW,IAAA,kHAAE,EACX,ucACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,8OAAC;;;;;8BACD,8OAAC,8KAAwB;oBACvB,WAAW,IAAA,kHAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,8OAAC;;;;;;;;;;;;;;;;AAIT;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OAC0D;IAC7D,qBACE,8OAAC,2KAAqB;QACpB,WAAW,IAAA,kHAAE,EAAC,qCAAqC;QAClD,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,OACyD;IAC5D,qBACE,8OAAC,0KAAoB;QACnB,WAAW,IAAA,kHAAE,EACX,6NACA;QAED,GAAG,KAAK;;0BAET,8OAAC;gBAAK,WAAU;0BACd,cAAA,8OAAC,mLAA6B;8BAC5B,cAAA,8OAAC,6MAAK;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAGrB,8OAAC,8KAAwB;0BAAE;;;;;;;;;;;;AAGjC;AAEA,SAAS,gBAAgB,EACvB,SAAS,EACT,GAAG,OAC8D;IACjE,qBACE,8OAAC,+KAAyB;QACxB,WAAW,IAAA,kHAAE,EAAC,4BAA4B;QACzC,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 634, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/services/auth.ts"],"sourcesContent":["import { supabase } from \"@/lib/supabaseClient\";\n\nexport async function signInWithEmail(email: string, password: string) {\n  const { data, error } = await supabase.auth.signInWithPassword({\n    email,\n    password,\n  });\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function signOut() {\n  const { error } = await supabase.auth.signOut();\n  if (error) throw error;\n}\n\nexport async function getAuthUser() {\n  const { data, error } = await supabase.auth.getUser();\n  if (error) return null;\n  return data.user;\n}\n\nexport async function getSession() {\n  const { data, error } = await supabase.auth.getSession();\n  if (error) return null;\n  return data.session;\n}\n\nexport function onAuthStateChange(callback: (event: string, session: unknown) => void) {\n  return supabase.auth.onAuthStateChange(callback);\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;AAEO,eAAe,gBAAgB,KAAa,EAAE,QAAgB;IACnE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,iIAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC;QAC7D;QACA;IACF;IAEA,IAAI,OAAO,MAAM;IACjB,OAAO;AACT;AAEO,eAAe;IACpB,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,iIAAQ,CAAC,IAAI,CAAC,OAAO;IAC7C,IAAI,OAAO,MAAM;AACnB;AAEO,eAAe;IACpB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,iIAAQ,CAAC,IAAI,CAAC,OAAO;IACnD,IAAI,OAAO,OAAO;IAClB,OAAO,KAAK,IAAI;AAClB;AAEO,eAAe;IACpB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,iIAAQ,CAAC,IAAI,CAAC,UAAU;IACtD,IAAI,OAAO,OAAO;IAClB,OAAO,KAAK,OAAO;AACrB;AAEO,SAAS,kBAAkB,QAAmD;IACnF,OAAO,iIAAQ,CAAC,IAAI,CAAC,iBAAiB,CAAC;AACzC"}},
    {"offset": {"line": 677, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/hooks/useAuthGuard.ts"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { getAuthUser } from '@/services/auth';\n\nexport function useAuthGuard() {\n  const [loading, setLoading] = useState(true);\n  const router = useRouter();\n\n  useEffect(() => {\n    let isMounted = true;\n\n    async function check() {\n      try {\n        const user = await getAuthUser();\n        if (!user && isMounted) {\n          router.replace('/login');\n        } else if (isMounted) {\n          setLoading(false);\n        }\n      } catch (err) {\n        console.error('Error checking auth', err);\n        if (isMounted) {\n          router.replace('/login');\n        }\n      }\n    }\n\n    check();\n\n    return () => {\n      isMounted = false;\n    };\n  }, [router]);\n\n  return { loading };\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;AAMO,SAAS;IACd,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACR,IAAI,YAAY;QAEhB,eAAe;YACb,IAAI;gBACF,MAAM,OAAO,MAAM,IAAA,+HAAW;gBAC9B,IAAI,CAAC,QAAQ,WAAW;oBACtB,OAAO,OAAO,CAAC;gBACjB,OAAO,IAAI,WAAW;oBACpB,WAAW;gBACb;YACF,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,uBAAuB;gBACrC,IAAI,WAAW;oBACb,OAAO,OAAO,CAAC;gBACjB;YACF;QACF;QAEA;QAEA,OAAO;YACL,YAAY;QACd;IACF,GAAG;QAAC;KAAO;IAEX,OAAO;QAAE;IAAQ;AACnB"}},
    {"offset": {"line": 723, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/ui/tooltip.tsx"],"sourcesContent":["\"use client\"\n\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\nimport { cn } from \"@/lib/utils\"\nimport * as React from \"react\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Portal>\n    <TooltipPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 overflow-hidden rounded-md bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 border border-border\",\n        className\n      )}\n      {...props}\n    />\n  </TooltipPrimitive.Portal>\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n"],"names":[],"mappings":";;;;;;;;;;;AAEA;AACA;AACA;AAJA;;;;;AAMA,MAAM,kBAAkB,+KAAyB;AAEjD,MAAM,UAAU,2KAAqB;AAErC,MAAM,iBAAiB,8KAAwB;AAE/C,MAAM,+BAAiB,mNAAgB,CAGrC,CAAC,EAAE,SAAS,EAAE,aAAa,CAAC,EAAE,GAAG,OAAO,EAAE,oBAC1C,8OAAC,6KAAuB;kBACtB,cAAA,8OAAC,8KAAwB;YACvB,KAAK;YACL,YAAY;YACZ,WAAW,IAAA,kHAAE,EACX,oZACA;YAED,GAAG,KAAK;;;;;;;;;;;AAIf,eAAe,WAAW,GAAG,8KAAwB,CAAC,WAAW"}},
    {"offset": {"line": 767, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/competence/matrix/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState, useMemo } from 'react';\nimport {\n  getAllPositions,\n  getEmployeesForPosition,\n  getEmployeeCompetenceProfile,\n  PositionSummary,\n  MatrixColumn,\n  MatrixRow,\n} from '@/services/competence';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { useAuthGuard } from '@/hooks/useAuthGuard';\nimport { Download, Users, AlertTriangle, TrendingUp, Target } from 'lucide-react';\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from '@/components/ui/tooltip';\n\nconst DEMO_MODE = process.env.NEXT_PUBLIC_DEMO_MODE === 'true';\n\nconst DEMO_COMPETENCES = [\n  { id: 'c1', label: 'Safety Training', requiredLevel: 3, groupName: 'Safety' },\n  { id: 'c2', label: 'Machine Operation', requiredLevel: 4, groupName: 'Operations' },\n  { id: 'c3', label: 'Quality Control', requiredLevel: 3, groupName: 'Quality' },\n  { id: 'c4', label: 'First Aid', requiredLevel: 2, groupName: 'Safety' },\n  { id: 'c5', label: 'Forklift Cert', requiredLevel: 3, groupName: 'Logistics' },\n  { id: 'c6', label: 'Welding', requiredLevel: 4, groupName: 'Fabrication' },\n  { id: 'c7', label: 'CNC Programming', requiredLevel: 3, groupName: 'Operations' },\n  { id: 'c8', label: 'Lean Manufacturing', requiredLevel: 2, groupName: 'Process' },\n];\n\nconst DEMO_EMPLOYEES = [\n  { id: 'e1', name: 'Anna Lindqvist', levels: [3, 4, 3, 2, 3, 4, 3, 2] },\n  { id: 'e2', name: 'Erik Johansson', levels: [3, 3, 2, 2, 2, 4, 3, 2] },\n  { id: 'e3', name: 'Maria Svensson', levels: [2, 4, 3, 1, 3, 3, 2, 2] },\n  { id: 'e4', name: 'Lars Andersson', levels: [3, 2, 3, 2, 3, 4, 1, 1] },\n  { id: 'e5', name: 'Sofia Karlsson', levels: [3, 4, 2, 2, 2, 4, 3, 2] },\n  { id: 'e6', name: 'Johan Eriksson', levels: [1, 3, 3, 2, 3, 2, 3, 2] },\n  { id: 'e7', name: 'Karin Olsson', levels: [3, 4, 3, 2, 1, 4, 3, 2] },\n  { id: 'e8', name: 'Peter Nilsson', levels: [3, 4, 3, 0, 3, 4, 3, 1] },\n  { id: 'e9', name: 'Emma Larsson', levels: [2, 3, 2, 2, 2, 3, 2, 2] },\n  { id: 'e10', name: 'Oscar Pettersson', levels: [3, 4, 3, 2, 3, 4, 3, 2] },\n];\n\nfunction computeStatus(current: number | null, required: number): 'OK' | 'GAP' | 'RISK' {\n  if (current === null || current === 0) return 'RISK';\n  if (current >= required) return 'OK';\n  if (current >= required - 1) return 'GAP';\n  return 'RISK';\n}\n\nfunction computeRiskLevel(statuses: ('OK' | 'GAP' | 'RISK')[]): 'LOW' | 'MEDIUM' | 'HIGH' {\n  const riskCount = statuses.filter(s => s === 'RISK').length;\n  const gapCount = statuses.filter(s => s === 'GAP').length;\n  if (riskCount >= 2) return 'HIGH';\n  if (riskCount >= 1 || gapCount >= 3) return 'MEDIUM';\n  return 'LOW';\n}\n\nfunction generateDemoData(): { columns: MatrixColumn[], rows: MatrixRow[] } {\n  const columns: MatrixColumn[] = DEMO_COMPETENCES.map(c => ({\n    competenceId: c.id,\n    label: c.label,\n    groupName: c.groupName,\n    requiredLevel: c.requiredLevel,\n  }));\n\n  const rows: MatrixRow[] = DEMO_EMPLOYEES.map(emp => {\n    const items = emp.levels.map((level, idx) => {\n      const required = DEMO_COMPETENCES[idx].requiredLevel;\n      return {\n        competenceId: DEMO_COMPETENCES[idx].id,\n        status: computeStatus(level, required),\n        level,\n        requiredLevel: required,\n      };\n    });\n\n    const statuses = items.map(i => i.status);\n    const riskLevel = computeRiskLevel(statuses);\n\n    return {\n      employeeId: emp.id,\n      employeeName: emp.name,\n      riskLevel,\n      items,\n    };\n  });\n\n  return { columns, rows };\n}\n\nexport default function CompetenceMatrixPage() {\n  const { loading: authLoading } = useAuthGuard();\n\n  if (authLoading) {\n    return (\n      <main className=\"hr-page\">\n        <p className=\"text-muted-foreground\">Checking access...</p>\n      </main>\n    );\n  }\n\n  return <CompetenceMatrixContent />;\n}\n\nfunction CompetenceMatrixContent() {\n  const [positions, setPositions] = useState<PositionSummary[]>([]);\n  const [columns, setColumns] = useState<MatrixColumn[]>([]);\n  const [rows, setRows] = useState<MatrixRow[]>([]);\n  const [loadingMatrix, setLoadingMatrix] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const isDemoMode = useMemo(() => {\n    if (typeof window === 'undefined') return DEMO_MODE;\n    const urlParams = new URLSearchParams(window.location.search);\n    return DEMO_MODE || urlParams.get('demo') === 'true';\n  }, []);\n\n  const [selectedPositionId, setSelectedPositionId] = useState<string | null>(null);\n  const [loadingPositions, setLoadingPositions] = useState(true);\n\n  useEffect(() => {\n    if (isDemoMode) {\n      const { columns: demoCols, rows: demoRows } = generateDemoData();\n      setColumns(demoCols);\n      setRows(demoRows);\n      setPositions([{ id: 'demo', name: 'Demo Position', site: null, department: 'Demo' }]);\n      setSelectedPositionId('demo');\n      setLoadingPositions(false);\n      return;\n    }\n\n    async function loadPositions() {\n      try {\n        const posData = await getAllPositions();\n        setPositions(posData);\n      } catch (err) {\n        console.error(err);\n        setError('Failed to load positions');\n      } finally {\n        setLoadingPositions(false);\n      }\n    }\n    loadPositions();\n  }, []);\n\n  useEffect(() => {\n    if (isDemoMode) return;\n    if (!selectedPositionId) {\n      setColumns([]);\n      setRows([]);\n      return;\n    }\n\n    async function loadMatrix() {\n      setLoadingMatrix(true);\n      setError(null);\n      try {\n        const employees = await getEmployeesForPosition(selectedPositionId!);\n        \n        if (employees.length === 0) {\n          setColumns([]);\n          setRows([]);\n          setLoadingMatrix(false);\n          return;\n        }\n\n        const profiles = await Promise.all(\n          employees.map((emp) => getEmployeeCompetenceProfile(emp.id))\n        );\n\n        const firstProfile = profiles[0];\n        const mandatoryItems = firstProfile.items.filter((item) => item.mandatory);\n\n        const cols: MatrixColumn[] = mandatoryItems.map((item) => ({\n          competenceId: item.competenceId,\n          label: item.competenceName,\n          groupName: item.groupName,\n          requiredLevel: item.requiredLevel,\n        }));\n\n        const matrixRows: MatrixRow[] = profiles.map((profile) => {\n          const itemMap = new Map(\n            profile.items.map((item) => [item.competenceId, item])\n          );\n\n          return {\n            employeeId: profile.employee.id,\n            employeeName: profile.employee.name,\n            riskLevel: profile.summary.riskLevel,\n            items: cols.map((col) => {\n              const item = itemMap.get(col.competenceId);\n              return {\n                competenceId: col.competenceId,\n                status: item?.status ?? 'N/A',\n                level: item?.employeeLevel ?? null,\n                requiredLevel: col.requiredLevel,\n              };\n            }),\n          };\n        });\n\n        setColumns(cols);\n        setRows(matrixRows);\n      } catch (err) {\n        console.error(err);\n        setError('Failed to load competence matrix');\n      } finally {\n        setLoadingMatrix(false);\n      }\n    }\n\n    loadMatrix();\n  }, [selectedPositionId]);\n\n  const kpis = useMemo(() => {\n    if (rows.length === 0) return null;\n\n    const atRisk = rows.filter(r => r.riskLevel === 'HIGH').length;\n    const gapSkills = new Map<string, number>();\n    let totalOk = 0;\n    let totalCells = 0;\n\n    rows.forEach(row => {\n      row.items.forEach((item, idx) => {\n        totalCells++;\n        if (item.status === 'OK') totalOk++;\n        if (item.status === 'GAP' || item.status === 'RISK') {\n          const label = columns[idx]?.label || 'Unknown';\n          gapSkills.set(label, (gapSkills.get(label) || 0) + 1);\n        }\n      });\n    });\n\n    const topGap = Array.from(gapSkills.entries())\n      .sort((a, b) => b[1] - a[1])[0];\n\n    const avgReadiness = totalCells > 0 ? Math.round((totalOk / totalCells) * 100) : 0;\n\n    return {\n      atRisk,\n      topGapSkill: topGap ? topGap[0] : 'None',\n      topGapCount: topGap ? topGap[1] : 0,\n      avgReadiness,\n    };\n  }, [rows, columns]);\n\n  const handleExportCSV = () => {\n    if (rows.length === 0 || columns.length === 0) return;\n\n    const headers = ['Employee', 'Risk Level', ...columns.map(c => c.label)];\n    const csvRows = rows.map(row => {\n      const cells = row.items.map(item => \n        item.level !== null ? `${item.level}/${item.requiredLevel}` : '-'\n      );\n      return [row.employeeName, row.riskLevel, ...cells];\n    });\n\n    const csv = [headers, ...csvRows]\n      .map(row => row.map(cell => `\"${cell}\"`).join(','))\n      .join('\\n');\n\n    const blob = new Blob([csv], { type: 'text/csv' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = 'competence-matrix.csv';\n    a.click();\n    URL.revokeObjectURL(url);\n  };\n\n  const selectedPosition = positions.find((p) => p.id === selectedPositionId);\n\n  return (\n    <TooltipProvider>\n      <main className=\"hr-page\" data-testid=\"competence-matrix-page\">\n        {error && (\n          <div className=\"p-3 mb-4 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-300 text-sm\" data-testid=\"error-message\">\n            {error}\n          </div>\n        )}\n\n        <header className=\"hr-page__header\">\n          <div>\n            <h1 className=\"hr-page__title\" data-testid=\"text-page-title\">Competence Matrix</h1>\n            <p className=\"hr-page__subtitle\">\n              Compare all employees in a position against the required competences.\n            </p>\n          </div>\n        </header>\n\n        <div className=\"p-4 mb-6 rounded-lg border border-border bg-card\">\n          <div className=\"flex flex-wrap items-center gap-4\">\n            <div className=\"min-w-[280px]\">\n              {loadingPositions ? (\n                <p className=\"text-sm text-muted-foreground\">Loading positions...</p>\n              ) : (\n                <Select\n                  value={selectedPositionId ?? ''}\n                  onValueChange={(val) => setSelectedPositionId(val || null)}\n                >\n                  <SelectTrigger data-testid=\"select-position\">\n                    <SelectValue placeholder=\"Select a position...\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {positions.map((pos) => (\n                      <SelectItem key={pos.id} value={pos.id} data-testid={`option-position-${pos.id}`}>\n                        {pos.name}\n                        {pos.department && ` (${pos.department})`}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              )}\n            </div>\n\n            {selectedPosition && !loadingMatrix && (\n              <div className=\"flex items-center gap-2 text-sm text-muted-foreground\" data-testid=\"text-employee-count\">\n                <Users className=\"w-4 h-4\" />\n                {rows.length} employee{rows.length !== 1 ? 's' : ''}\n              </div>\n            )}\n\n            {rows.length > 0 && (\n              <button\n                onClick={handleExportCSV}\n                className=\"ml-auto flex items-center gap-2 px-3 py-2 text-sm font-medium rounded-md border border-border bg-background hover:bg-accent transition-colors\"\n                data-testid=\"button-export-csv\"\n              >\n                <Download className=\"w-4 h-4\" />\n                Export CSV\n              </button>\n            )}\n          </div>\n        </div>\n\n        {kpis && selectedPositionId && !loadingMatrix && rows.length > 0 && (\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6\" data-testid=\"kpi-grid\">\n            <div className=\"p-4 rounded-lg border border-border bg-card\" data-testid=\"kpi-employees\">\n              <div className=\"flex items-center gap-2 text-muted-foreground text-sm mb-1\">\n                <Users className=\"w-4 h-4\" />\n                Total Employees\n              </div>\n              <div className=\"text-2xl font-semibold\">{rows.length}</div>\n            </div>\n            <div className=\"p-4 rounded-lg border border-border bg-card\" data-testid=\"kpi-at-risk\">\n              <div className=\"flex items-center gap-2 text-muted-foreground text-sm mb-1\">\n                <AlertTriangle className=\"w-4 h-4\" />\n                At Risk\n              </div>\n              <div className={`text-2xl font-semibold ${kpis.atRisk > 0 ? 'text-red-600 dark:text-red-400' : 'text-green-600 dark:text-green-400'}`}>\n                {kpis.atRisk}\n              </div>\n            </div>\n            <div className=\"p-4 rounded-lg border border-border bg-card\" data-testid=\"kpi-top-gap\">\n              <div className=\"flex items-center gap-2 text-muted-foreground text-sm mb-1\">\n                <Target className=\"w-4 h-4\" />\n                Top Gap Skill\n              </div>\n              <div className=\"text-lg font-semibold truncate\" title={kpis.topGapSkill}>\n                {kpis.topGapSkill}\n              </div>\n              <div className=\"text-xs text-muted-foreground\">{kpis.topGapCount} employees</div>\n            </div>\n            <div className=\"p-4 rounded-lg border border-border bg-card\" data-testid=\"kpi-readiness\">\n              <div className=\"flex items-center gap-2 text-muted-foreground text-sm mb-1\">\n                <TrendingUp className=\"w-4 h-4\" />\n                Avg Readiness\n              </div>\n              <div className={`text-2xl font-semibold ${kpis.avgReadiness >= 80 ? 'text-green-600 dark:text-green-400' : kpis.avgReadiness >= 60 ? 'text-amber-600 dark:text-amber-400' : 'text-red-600 dark:text-red-400'}`}>\n                {kpis.avgReadiness}%\n              </div>\n            </div>\n          </div>\n        )}\n\n        {!selectedPositionId && !loadingPositions && (\n          <div className=\"p-6 rounded-lg border border-dashed border-border bg-muted/50 text-center\">\n            <p className=\"text-muted-foreground\">Select a position above to view the competence matrix.</p>\n          </div>\n        )}\n\n        {selectedPositionId && loadingMatrix && (\n          <div className=\"p-6 rounded-lg border border-dashed border-border bg-muted/50 text-center\">\n            <p className=\"text-muted-foreground\">Loading competence matrix...</p>\n          </div>\n        )}\n\n        {selectedPositionId && !loadingMatrix && rows.length === 0 && (\n          <div className=\"p-6 rounded-lg border border-dashed border-border bg-muted/50 text-center\">\n            <p className=\"text-muted-foreground\">No employees found for this position.</p>\n          </div>\n        )}\n\n        {selectedPositionId && !loadingMatrix && rows.length > 0 && columns.length > 0 && (\n          <div className=\"hr-matrix-wrapper\" data-testid=\"matrix-container\">\n            <table className=\"hr-competence-table\" data-testid=\"matrix-table\">\n              <thead>\n                <tr>\n                  <th style={{ minWidth: 160 }}>Employee</th>\n                  <th style={{ minWidth: 80 }}>Risk</th>\n                  {columns.map((col) => (\n                    <th\n                      key={col.competenceId}\n                      style={{ minWidth: 100 }}\n                    >\n                      <Tooltip>\n                        <TooltipTrigger asChild>\n                          <div className=\"hr-competence-name cursor-help\">\n                            <span className=\"max-w-[100px] overflow-hidden text-ellipsis whitespace-nowrap block\">\n                              {col.label.length > 12 ? col.label.slice(0, 12) + '...' : col.label}\n                            </span>\n                            {col.requiredLevel !== null && (\n                              <span className=\"hr-level-chip\">L{col.requiredLevel}</span>\n                            )}\n                          </div>\n                        </TooltipTrigger>\n                        <TooltipContent side=\"top\" className=\"max-w-xs\">\n                          <div className=\"text-sm\">\n                            <strong>{col.label}</strong>\n                            {col.groupName && <span className=\"text-muted-foreground\"> ({col.groupName})</span>}\n                            <br />\n                            Required Level: {col.requiredLevel}\n                          </div>\n                        </TooltipContent>\n                      </Tooltip>\n                    </th>\n                  ))}\n                </tr>\n              </thead>\n              <tbody>\n                {rows.map((row) => (\n                  <tr key={row.employeeId} data-testid={`row-employee-${row.employeeId}`}>\n                    <td className=\"text-left\">\n                      <span className=\"font-medium text-foreground\">{row.employeeName}</span>\n                    </td>\n                    <td>\n                      <span className={`hr-risk-pill hr-risk-pill--${row.riskLevel.toLowerCase()}`}>\n                        {row.riskLevel}\n                      </span>\n                    </td>\n                    {row.items.map((cell, idx) => (\n                      <td key={columns[idx].competenceId}>\n                        <div className=\"hr-matrix-cell\">\n                          <span className=\"hr-matrix-cell__levels\">\n                            <strong>{cell.level !== null ? cell.level : '-'}</strong>\n                            <span>/</span>\n                            <span>{cell.requiredLevel ?? columns[idx]?.requiredLevel ?? '-'}</span>\n                          </span>\n                          <span\n                            className={`hr-status-badge hr-status-badge--${cell.status.toLowerCase()}`}\n                          >\n                            {cell.status}\n                          </span>\n                        </div>\n                      </td>\n                    ))}\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n\n        {selectedPositionId && !loadingMatrix && rows.length > 0 && columns.length === 0 && (\n          <div className=\"p-6 rounded-lg border border-dashed border-border bg-muted/50 text-center\">\n            <p className=\"text-muted-foreground\">No mandatory competences defined for this position.</p>\n          </div>\n        )}\n      </main>\n    </TooltipProvider>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}