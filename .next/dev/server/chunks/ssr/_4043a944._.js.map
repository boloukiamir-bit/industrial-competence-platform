{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/supabaseClient.ts"],"sourcesContent":["import { createClient, SupabaseClient } from \"@supabase/supabase-js\";\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || \"\";\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || \"\";\n\nfunction createSupabaseClient(): SupabaseClient {\n  if (!supabaseUrl || !supabaseAnonKey) {\n    if (typeof window === \"undefined\" && process.env.NODE_ENV === \"production\") {\n      console.warn(\n        \"Supabase environment variables not set. \" +\n        \"Please ensure NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY are configured.\"\n      );\n    }\n  }\n  return createClient(supabaseUrl || \"https://placeholder.supabase.co\", supabaseAnonKey || \"placeholder\");\n}\n\nexport const supabase: SupabaseClient = createSupabaseClient();\n\nexport function getSupabaseClient(): SupabaseClient {\n  if (!supabaseUrl || !supabaseAnonKey) {\n    throw new Error(\n      \"Missing Supabase environment variables. \" +\n      \"Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY.\"\n    );\n  }\n  return supabase;\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,cAAc,gFAAwC;AAC5D,MAAM,kBAAkB,wPAA6C;AAErE,SAAS;IACP;;IAQA,OAAO,IAAA,uLAAY,EAAC,eAAe,mCAAmC,mBAAmB;AAC3F;AAEO,MAAM,WAA2B;AAEjC,SAAS;IACd;;IAMA,OAAO;AACT"}},
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/app/employees/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport Link from \"next/link\";\nimport { Users, Search, ChevronRight } from \"lucide-react\";\nimport { supabase } from \"@/lib/supabaseClient\";\nimport type { Employee } from \"@/types/domain\";\n\nexport default function EmployeesPage() {\n  const [employees, setEmployees] = useState<Employee[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [lineFilter, setLineFilter] = useState<string>(\"\");\n\n  useEffect(() => {\n    async function loadEmployees() {\n      const { data, error } = await supabase\n        .from(\"employees\")\n        .select(\"*, manager:manager_id(name)\")\n        .eq(\"is_active\", true)\n        .order(\"name\");\n\n      if (!error && data) {\n        setEmployees(\n          data.map((row) => ({\n            id: row.id,\n            name: row.name || \"\",\n            firstName: row.first_name || undefined,\n            lastName: row.last_name || undefined,\n            employeeNumber: row.employee_number || \"\",\n            email: row.email || undefined,\n            phone: row.phone || undefined,\n            dateOfBirth: row.date_of_birth || undefined,\n            role: row.role || \"\",\n            line: row.line || \"\",\n            team: row.team || \"\",\n            employmentType: row.employment_type || \"permanent\",\n            startDate: row.start_date || undefined,\n            contractEndDate: row.contract_end_date || undefined,\n            managerId: row.manager_id || undefined,\n            managerName: row.manager?.name || undefined,\n            address: row.address || undefined,\n            city: row.city || undefined,\n            postalCode: row.postal_code || undefined,\n            country: row.country || \"Sweden\",\n            isActive: row.is_active ?? true,\n          }))\n        );\n      } else if (error) {\n        console.error(\"Error loading employees:\", error);\n      }\n      setLoading(false);\n    }\n    loadEmployees();\n  }, []);\n\n  const lines = [...new Set(employees.map((e) => e.line).filter(Boolean))].sort();\n\n  const filteredEmployees = employees.filter((e) => {\n    const matchesSearch =\n      !searchTerm ||\n      e.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      e.employeeNumber.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesLine = !lineFilter || e.line === lineFilter;\n    return matchesSearch && matchesLine;\n  });\n\n  if (loading) {\n    return (\n      <div className=\"p-6\">\n        <div className=\"animate-pulse space-y-4\">\n          <div className=\"h-8 bg-gray-200 dark:bg-gray-700 rounded w-48\" />\n          <div className=\"h-64 bg-gray-200 dark:bg-gray-700 rounded\" />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <div className=\"flex items-center gap-3\">\n          <Users className=\"h-6 w-6 text-gray-600 dark:text-gray-400\" />\n          <h1 className=\"text-2xl font-semibold text-gray-900 dark:text-white\">\n            Employees\n          </h1>\n        </div>\n        <span className=\"text-sm text-gray-500 dark:text-gray-400\">\n          {filteredEmployees.length} employees\n        </span>\n      </div>\n\n      <div className=\"flex flex-wrap gap-3 mb-6\">\n        <div className=\"relative flex-1 min-w-[200px] max-w-md\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400\" />\n          <input\n            type=\"text\"\n            placeholder=\"Search by name or employee number...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            data-testid=\"input-search-employees\"\n          />\n        </div>\n        <select\n          value={lineFilter}\n          onChange={(e) => setLineFilter(e.target.value)}\n          className=\"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          data-testid=\"select-line-filter\"\n        >\n          <option value=\"\">All Lines</option>\n          {lines.map((line) => (\n            <option key={line} value={line}>\n              {line}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden\">\n        <table className=\"w-full\">\n          <thead>\n            <tr className=\"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-700\">\n              <th className=\"text-left px-4 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                Name\n              </th>\n              <th className=\"text-left px-4 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                Employee No\n              </th>\n              <th className=\"text-left px-4 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                Line\n              </th>\n              <th className=\"text-left px-4 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                Team\n              </th>\n              <th className=\"text-left px-4 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                Role\n              </th>\n              <th className=\"text-left px-4 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                Manager\n              </th>\n              <th className=\"w-10\" />\n            </tr>\n          </thead>\n          <tbody className=\"divide-y divide-gray-200 dark:divide-gray-700\">\n            {filteredEmployees.length === 0 ? (\n              <tr>\n                <td\n                  colSpan={7}\n                  className=\"px-4 py-8 text-center text-gray-500 dark:text-gray-400\"\n                >\n                  No employees found\n                </td>\n              </tr>\n            ) : (\n              filteredEmployees.map((employee) => (\n                <tr\n                  key={employee.id}\n                  className=\"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors\"\n                  data-testid={`row-employee-${employee.id}`}\n                >\n                  <td className=\"px-4 py-3\">\n                    <Link\n                      href={`/app/employees/${employee.id}`}\n                      className=\"font-medium text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400\"\n                      data-testid={`link-employee-${employee.id}`}\n                    >\n                      {employee.name}\n                    </Link>\n                  </td>\n                  <td className=\"px-4 py-3 text-sm text-gray-600 dark:text-gray-300\">\n                    {employee.employeeNumber}\n                  </td>\n                  <td className=\"px-4 py-3 text-sm text-gray-600 dark:text-gray-300\">\n                    {employee.line || \"-\"}\n                  </td>\n                  <td className=\"px-4 py-3 text-sm text-gray-600 dark:text-gray-300\">\n                    {employee.team || \"-\"}\n                  </td>\n                  <td className=\"px-4 py-3 text-sm text-gray-600 dark:text-gray-300\">\n                    {employee.role || \"-\"}\n                  </td>\n                  <td className=\"px-4 py-3 text-sm text-gray-600 dark:text-gray-300\">\n                    {employee.managerName || \"-\"}\n                  </td>\n                  <td className=\"px-4 py-3\">\n                    <Link\n                      href={`/app/employees/${employee.id}`}\n                      className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\n                    >\n                      <ChevronRight className=\"h-4 w-4\" />\n                    </Link>\n                  </td>\n                </tr>\n              ))\n            )}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}