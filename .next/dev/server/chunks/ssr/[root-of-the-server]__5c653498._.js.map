{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\";\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\";\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-2xl font-semibold leading-none tracking-tight\", className)}\n    {...props}\n  />\n));\nCardTitle.displayName = \"CardTitle\";\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\";\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n));\nCardContent.displayName = \"CardContent\";\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n));\nCardFooter.displayName = \"CardFooter\";\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AACA;;;;AAEA,MAAM,qBAAO,mNAAgB,CAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,+EACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,sDAAsD;QACnE,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,mNAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,IAAA,kHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\nimport { cn } from \"@/lib/utils\";\n\nconst badgeVariants = cva(\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate\",\n  {\n    variants: {\n      variant: {\n        default: \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive: \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n        outline: \"border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n      size: {\n        default: \"\",\n        sm: \"text-[10px] px-2 py-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n);\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, size, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant, size }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants };\n"],"names":[],"mappings":";;;;;;;AACA;AACA;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB,wMACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,WAAW;YACX,aAAa;YACb,SAAS;QACX;QACA,MAAM;YACJ,SAAS;YACT,IAAI;QACN;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,OAAmB;IAC/D,qBACE,8OAAC;QAAI,WAAW,IAAA,kHAAE,EAAC,cAAc;YAAE;YAAS;QAAK,IAAI;QAAa,GAAG,KAAK;;;;;;AAE9E"}},
    {"offset": {"line": 152, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/ui/progress.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-2 w-full overflow-hidden rounded-full bg-primary/20\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMA,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE,oBACjC,8OAAC,4KAAsB;QACrB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,kEACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,iLAA2B;YAC1B,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;AAIhE,SAAS,WAAW,GAAG,4KAAsB,CAAC,WAAW"}},
    {"offset": {"line": 202, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/pgClient.ts"],"sourcesContent":["import { Pool } from \"pg\";\n\nconst pool = new Pool({\n  connectionString: process.env.DATABASE_URL,\n  ssl: process.env.DATABASE_URL?.includes(\"localhost\") ? false : { rejectUnauthorized: false },\n});\n\nexport default pool;\n"],"names":[],"mappings":";;;;AAAA;;;;;;AAEA,MAAM,OAAO,IAAI,4GAAI,CAAC;IACpB,kBAAkB,QAAQ,GAAG,CAAC,YAAY;IAC1C,KAAK,QAAQ,GAAG,CAAC,YAAY,EAAE,SAAS,eAAe,QAAQ;QAAE,oBAAoB;IAAM;AAC7F;uCAEe"}},
    {"offset": {"line": 226, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/services/analytics.ts"],"sourcesContent":["import { supabase } from \"@/lib/supabaseClient\";\nimport pool from \"@/lib/pgClient\";\nimport type { HRAnalytics, HRAnalyticsV2 } from \"@/types/domain\";\n\nconst SPALJISTEN_ORG_ID = \"a1b2c3d4-e5f6-7890-abcd-ef1234567890\";\n\nasync function getSpaljistenAnalytics(): Promise<HRAnalytics> {\n  try {\n    // Get employee count\n    const employeesResult = await pool.query(\n      `SELECT id, employee_name as name, email, area_code FROM sp_employees WHERE org_id = $1`,\n      [SPALJISTEN_ORG_ID]\n    );\n    const employees = employeesResult.rows;\n    const totalHeadcount = employees.length;\n\n    // Build headcount by area\n    const areaData: Record<string, { count: number; permanent: number; temporary: number; consultant: number }> = {};\n    for (const emp of employees) {\n      const area = emp.area_code || \"Unassigned\";\n      if (!areaData[area]) {\n        areaData[area] = { count: 0, permanent: 0, temporary: 0, consultant: 0 };\n      }\n      areaData[area].count++;\n      areaData[area].permanent++;\n    }\n    const headcountByOrgUnit = Object.entries(areaData).map(([orgUnitName, data]) => ({\n      orgUnitName,\n      count: data.count,\n      permanent: data.permanent,\n      temporary: data.temporary,\n      consultant: data.consultant,\n    }));\n\n    // Get skill distribution\n    const skillsResult = await pool.query(`\n      SELECT \n        sk.skill_name,\n        es.rating\n      FROM sp_employee_skills es\n      JOIN sp_skills sk ON es.skill_id = sk.id\n      WHERE es.org_id = $1\n      ORDER BY sk.skill_name\n    `, [SPALJISTEN_ORG_ID]);\n\n    const skillLevels: Record<string, number[]> = {};\n    for (const row of skillsResult.rows) {\n      const skillName = row.skill_name || \"Unknown\";\n      if (!skillLevels[skillName]) {\n        skillLevels[skillName] = [0, 0, 0, 0, 0];\n      }\n      const level = row.rating as number;\n      if (level >= 0 && level <= 4) {\n        skillLevels[skillName][level]++;\n      }\n    }\n    const skillDistribution = Object.entries(skillLevels)\n      .slice(0, 10)\n      .map(([skillName, levels]) => ({\n        skillName,\n        levels,\n      }));\n\n    // Calculate risk based on skills - stations with < 2 independent operators\n    const riskResult = await pool.query(`\n      SELECT \n        st.station_name,\n        st.area_code,\n        COUNT(DISTINCT CASE WHEN es.rating >= 3 THEN es.employee_id END) as independent_count\n      FROM sp_stations st\n      LEFT JOIN sp_skills sk ON sk.station_code = st.station_code\n      LEFT JOIN sp_employee_skills es ON es.skill_id = sk.id\n      WHERE st.org_id = $1\n      GROUP BY st.station_name, st.area_code\n    `, [SPALJISTEN_ORG_ID]);\n\n    let overdueCount = 0;\n    let dueSoonCount = 0;\n    const criticalEventsCounts: Record<string, number> = {};\n\n    for (const row of riskResult.rows) {\n      const independentCount = parseInt(row.independent_count || \"0\", 10);\n      if (independentCount === 0) {\n        overdueCount++;\n        criticalEventsCounts[\"Training\"] = (criticalEventsCounts[\"Training\"] || 0) + 1;\n      } else if (independentCount < 2) {\n        dueSoonCount++;\n        criticalEventsCounts[\"Medical Check\"] = (criticalEventsCounts[\"Medical Check\"] || 0) + 1;\n      }\n    }\n\n    const criticalEventsCount = Object.entries(criticalEventsCounts).map(([category, count]) => ({\n      category,\n      count,\n    }));\n\n    return {\n      totalHeadcount,\n      headcountByOrgUnit,\n      headcountByEmploymentType: [{ type: \"permanent\", count: totalHeadcount }],\n      sickLeaveRatio: 0,\n      temporaryContractsEndingSoon: 0,\n      temporaryContractsEndingList: [],\n      criticalEventsCount,\n      criticalEventsByStatus: { overdue: overdueCount, dueSoon: dueSoonCount },\n      skillDistribution,\n      riskIndexByUnit: headcountByOrgUnit.map(unit => ({\n        unitName: unit.orgUnitName,\n        headcount: unit.count,\n        overdueCount: 0,\n        dueSoonCount: 0,\n        riskIndex: 0,\n      })),\n      absencesAvailable: false,\n    };\n  } catch (err) {\n    console.error(\"Spaljisten analytics error:\", err);\n    return {\n      totalHeadcount: 0,\n      headcountByOrgUnit: [],\n      headcountByEmploymentType: [],\n      sickLeaveRatio: 0,\n      temporaryContractsEndingSoon: 0,\n      temporaryContractsEndingList: [],\n      criticalEventsCount: [],\n      criticalEventsByStatus: { overdue: 0, dueSoon: 0 },\n      skillDistribution: [],\n      riskIndexByUnit: [],\n      absencesAvailable: false,\n    };\n  }\n}\n\nasync function hasSpaljistenData(): Promise<boolean> {\n  try {\n    const result = await pool.query(\n      `SELECT COUNT(*) as count FROM sp_employees WHERE org_id = $1`,\n      [SPALJISTEN_ORG_ID]\n    );\n    return parseInt(result.rows[0]?.count || \"0\", 10) > 0;\n  } catch {\n    return false;\n  }\n}\n\nexport async function getHRAnalytics(): Promise<HRAnalytics> {\n  // Check if we should use Spaljisten-specific analytics\n  const useSpaljisten = await hasSpaljistenData();\n  if (useSpaljisten) {\n    return getSpaljistenAnalytics();\n  }\n\n  const today = new Date().toISOString().split(\"T\")[0];\n  const thirtyDaysLater = new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString().split(\"T\")[0];\n  const ninetyDaysLater = new Date(Date.now() + 90 * 24 * 60 * 60 * 1000).toISOString().split(\"T\")[0];\n\n  const [\n    headcountRes,\n    employeesWithOrgRes,\n    tempContractsRes,\n    allEventsRes,\n    skillsRes,\n    absencesRes,\n  ] = await Promise.all([\n    supabase.from(\"employees\").select(\"id\", { count: \"exact\", head: true }).eq(\"is_active\", true),\n    \n    supabase\n      .from(\"employees\")\n      .select(\"id, name, role, employment_type, contract_end_date, line, team, org_unit_id\")\n      .eq(\"is_active\", true),\n    \n    supabase\n      .from(\"employees\")\n      .select(\"id, name, role, contract_end_date\")\n      .eq(\"is_active\", true)\n      .eq(\"employment_type\", \"temporary\")\n      .not(\"contract_end_date\", \"is\", null)\n      .lte(\"contract_end_date\", ninetyDaysLater),\n    \n    supabase\n      .from(\"person_events\")\n      .select(\"id, category, status, due_date, employee_id, employees:employee_id(line, team)\")\n      .neq(\"status\", \"completed\"),\n    \n    supabase\n      .from(\"employee_skills\")\n      .select(\"level, skills(name)\")\n      .order(\"level\"),\n    \n    supabase\n      .from(\"absences\")\n      .select(\"id, type, from_date, to_date\"),\n  ]);\n\n  const totalHeadcount = headcountRes.count || 0;\n  const employees = employeesWithOrgRes.data || [];\n\n  const orgUnitData: Record<string, { count: number; permanent: number; temporary: number; consultant: number }> = {};\n  const employmentTypeCounts: Record<string, number> = {};\n\n  for (const emp of employees) {\n    const unitName = emp.line || emp.team || \"Unassigned\";\n    const empType = emp.employment_type || \"unknown\";\n\n    if (!orgUnitData[unitName]) {\n      orgUnitData[unitName] = { count: 0, permanent: 0, temporary: 0, consultant: 0 };\n    }\n    orgUnitData[unitName].count++;\n    if (empType === \"permanent\") orgUnitData[unitName].permanent++;\n    else if (empType === \"temporary\") orgUnitData[unitName].temporary++;\n    else if (empType === \"consultant\") orgUnitData[unitName].consultant++;\n\n    employmentTypeCounts[empType] = (employmentTypeCounts[empType] || 0) + 1;\n  }\n\n  const headcountByOrgUnit = Object.entries(orgUnitData).map(([orgUnitName, data]) => ({\n    orgUnitName,\n    count: data.count,\n    permanent: data.permanent,\n    temporary: data.temporary,\n    consultant: data.consultant,\n  }));\n\n  const headcountByEmploymentType = Object.entries(employmentTypeCounts).map(([type, count]) => ({\n    type,\n    count,\n  }));\n\n  const tempContracts = tempContractsRes.data || [];\n  const temporaryContractsEndingSoon = tempContracts.length;\n  const temporaryContractsEndingList = tempContracts.map((emp) => ({\n    id: emp.id,\n    name: emp.name,\n    contractEndDate: emp.contract_end_date,\n    role: emp.role || \"Unknown\",\n  }));\n\n  const allEvents = allEventsRes.data || [];\n  const criticalEventsCounts: Record<string, number> = {};\n  let overdueCount = 0;\n  let dueSoonCount = 0;\n\n  const unitEventCounts: Record<string, { overdueCount: number; dueSoonCount: number }> = {};\n\n  for (const event of allEvents) {\n    if (!event.due_date) continue;\n    const isOverdue = event.due_date < today;\n    const isDueSoon = event.due_date >= today && event.due_date <= thirtyDaysLater;\n\n    if (isOverdue) overdueCount++;\n    if (isDueSoon) dueSoonCount++;\n\n    if (isOverdue || isDueSoon) {\n      criticalEventsCounts[event.category] = (criticalEventsCounts[event.category] || 0) + 1;\n    }\n\n    const empData = event.employees as unknown;\n    const empInfo = Array.isArray(empData) ? empData[0] : empData;\n    const unitName = (empInfo as { line?: string; team?: string } | null)?.line || \n                     (empInfo as { line?: string; team?: string } | null)?.team || \n                     \"Unassigned\";\n\n    if (!unitEventCounts[unitName]) {\n      unitEventCounts[unitName] = { overdueCount: 0, dueSoonCount: 0 };\n    }\n    if (isOverdue) unitEventCounts[unitName].overdueCount++;\n    if (isDueSoon) unitEventCounts[unitName].dueSoonCount++;\n  }\n\n  const criticalEventsCount = Object.entries(criticalEventsCounts).map(([category, count]) => ({\n    category,\n    count,\n  }));\n\n  const riskIndexByUnit = Object.entries(orgUnitData).map(([unitName, data]) => {\n    const eventData = unitEventCounts[unitName] || { overdueCount: 0, dueSoonCount: 0 };\n    const riskIndex = data.count > 0 \n      ? (eventData.overdueCount + eventData.dueSoonCount) / data.count \n      : 0;\n    return {\n      unitName,\n      headcount: data.count,\n      overdueCount: eventData.overdueCount,\n      dueSoonCount: eventData.dueSoonCount,\n      riskIndex: Math.round(riskIndex * 100) / 100,\n    };\n  }).sort((a, b) => b.riskIndex - a.riskIndex);\n\n  const absencesData = absencesRes.data;\n  const absencesAvailable = !absencesRes.error && absencesData !== null;\n\n  const now = new Date();\n  const thirtyDaysAgo = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);\n  let sickDays = 0;\n  \n  if (absencesAvailable) {\n    for (const row of absencesData || []) {\n      if (row.type === \"sick\") {\n        const from = new Date(row.from_date);\n        const to = new Date(row.to_date);\n        if (to >= thirtyDaysAgo) {\n          const effectiveFrom = from < thirtyDaysAgo ? thirtyDaysAgo : from;\n          const effectiveTo = to > now ? now : to;\n          const days = Math.ceil((effectiveTo.getTime() - effectiveFrom.getTime()) / (24 * 60 * 60 * 1000)) + 1;\n          sickDays += Math.max(0, days);\n        }\n      }\n    }\n  }\n\n  const workingDaysInMonth = 22;\n  const sickLeaveRatio = totalHeadcount > 0 \n    ? (sickDays / (totalHeadcount * workingDaysInMonth)) * 100 \n    : 0;\n\n  const skillLevels: Record<string, number[]> = {};\n  for (const row of skillsRes.data || []) {\n    const skills = row.skills as unknown as { name: string } | null;\n    const skillName = skills?.name || \"Unknown\";\n    if (!skillLevels[skillName]) {\n      skillLevels[skillName] = [0, 0, 0, 0, 0];\n    }\n    const level = row.level as number;\n    if (level >= 0 && level <= 4) {\n      skillLevels[skillName][level]++;\n    }\n  }\n  const skillDistribution = Object.entries(skillLevels)\n    .slice(0, 10)\n    .map(([skillName, levels]) => ({\n      skillName,\n      levels,\n    }));\n\n  return {\n    totalHeadcount,\n    headcountByOrgUnit,\n    headcountByEmploymentType,\n    sickLeaveRatio: Math.round(sickLeaveRatio * 100) / 100,\n    temporaryContractsEndingSoon,\n    temporaryContractsEndingList,\n    criticalEventsCount,\n    criticalEventsByStatus: { overdue: overdueCount, dueSoon: dueSoonCount },\n    skillDistribution,\n    riskIndexByUnit,\n    absencesAvailable,\n  };\n}\n\nexport async function getAbsenceSummary(fromDate: string, toDate: string): Promise<{\n  totalAbsences: number;\n  byType: { type: string; count: number }[];\n}> {\n  const { data, error } = await supabase\n    .from(\"absences\")\n    .select(\"id, type\")\n    .gte(\"from_date\", fromDate)\n    .lte(\"to_date\", toDate);\n\n  if (error) {\n    console.error(\"Error fetching absences:\", error);\n    return { totalAbsences: 0, byType: [] };\n  }\n\n  const typeCounts: Record<string, number> = {};\n  (data || []).forEach((row) => {\n    typeCounts[row.type] = (typeCounts[row.type] || 0) + 1;\n  });\n\n  return {\n    totalAbsences: data?.length || 0,\n    byType: Object.entries(typeCounts).map(([type, count]) => ({ type, count })),\n  };\n}\n\nexport async function getHRAnalyticsV2(): Promise<HRAnalyticsV2> {\n  const baseAnalytics = await getHRAnalytics();\n  const today = new Date();\n\n  const [employeesRes, workflowsRes, gapsRes] = await Promise.all([\n    supabase.from(\"employees\").select(\"id, name, start_date, employment_type, contract_end_date\").eq(\"is_active\", true),\n    supabase.from(\"hr_workflow_instances\").select(\"template_id, template_name\", { count: \"exact\" }).eq(\"status\", \"active\"),\n    supabase.from(\"competence_requirements\")\n      .select(\"line, skill_id, min_level, min_headcount, skills(name)\")\n  ]);\n\n  const employees = employeesRes.data || [];\n  const tenureBands: Record<string, number> = { \"0-1 years\": 0, \"1-3 years\": 0, \"3-5 years\": 0, \"5-10 years\": 0, \"10+ years\": 0 };\n  let totalTenure = 0;\n  let attritionHighRisk = 0;\n  let attritionMediumRisk = 0;\n  const attritionEmployees: { id: string; name: string; riskLevel: 'high' | 'medium'; factors: string[] }[] = [];\n\n  for (const emp of employees) {\n    const factors: string[] = [];\n    let riskScore = 0;\n\n    if (emp.start_date) {\n      const startDate = new Date(emp.start_date);\n      const yearsEmployed = (today.getTime() - startDate.getTime()) / (365.25 * 24 * 60 * 60 * 1000);\n      totalTenure += yearsEmployed;\n\n      if (yearsEmployed < 1) {\n        tenureBands[\"0-1 years\"]++;\n        riskScore += 1;\n        if (yearsEmployed < 0.5) {\n          factors.push(\"New employee (<6 months)\");\n          riskScore += 1;\n        }\n      } else if (yearsEmployed < 3) {\n        tenureBands[\"1-3 years\"]++;\n      } else if (yearsEmployed < 5) {\n        tenureBands[\"3-5 years\"]++;\n      } else if (yearsEmployed < 10) {\n        tenureBands[\"5-10 years\"]++;\n      } else {\n        tenureBands[\"10+ years\"]++;\n      }\n    } else {\n      tenureBands[\"0-1 years\"]++;\n    }\n\n    if (emp.employment_type === \"temporary\") {\n      riskScore += 1;\n      factors.push(\"Temporary contract\");\n      \n      if (emp.contract_end_date) {\n        const endDate = new Date(emp.contract_end_date);\n        const daysUntilEnd = (endDate.getTime() - today.getTime()) / (24 * 60 * 60 * 1000);\n        if (daysUntilEnd < 30) {\n          riskScore += 2;\n          factors.push(\"Contract ending within 30 days\");\n        } else if (daysUntilEnd < 90) {\n          riskScore += 1;\n          factors.push(\"Contract ending within 90 days\");\n        }\n      }\n    }\n\n    if (riskScore >= 3) {\n      attritionHighRisk++;\n      attritionEmployees.push({ id: emp.id, name: emp.name, riskLevel: 'high', factors });\n    } else if (riskScore >= 2) {\n      attritionMediumRisk++;\n      attritionEmployees.push({ id: emp.id, name: emp.name, riskLevel: 'medium', factors });\n    }\n  }\n\n  const avgTenureYears = employees.length > 0 ? Math.round((totalTenure / employees.length) * 10) / 10 : 0;\n\n  const workflowTemplateCount: Record<string, { name: string; count: number }> = {};\n  for (const row of workflowsRes.data || []) {\n    const templateId = row.template_id as string;\n    if (!workflowTemplateCount[templateId]) {\n      workflowTemplateCount[templateId] = { name: row.template_name as string, count: 0 };\n    }\n    workflowTemplateCount[templateId].count++;\n  }\n  const openWorkflowsByTemplate = Object.entries(workflowTemplateCount).map(([templateId, data]) => ({\n    templateId,\n    templateName: data.name,\n    count: data.count,\n  }));\n\n  let criticalGaps = 0;\n  let trainingNeeded = 0;\n  const wellStaffed = 0;\n\n  criticalGaps = baseAnalytics.criticalEventsByStatus.overdue;\n  trainingNeeded = baseAnalytics.criticalEventsByStatus.dueSoon;\n\n  return {\n    ...baseAnalytics,\n    attritionRisk: {\n      highrisk: attritionHighRisk,\n      mediumRisk: attritionMediumRisk,\n      employees: attritionEmployees.slice(0, 10),\n    },\n    tenureBands: Object.entries(tenureBands).map(([band, count]) => ({ band, count })),\n    avgTenureYears,\n    openWorkflowsByTemplate,\n    skillGapSummary: { criticalGaps, trainingNeeded, wellStaffed },\n  };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 709, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/app/hr/analytics/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Users, AlertTriangle, Calendar, TrendingUp, Activity, BarChart3, Clock, Shield, UserMinus, Workflow } from \"lucide-react\";\nimport { getHRAnalyticsV2 } from \"@/services/analytics\";\nimport { getCurrentUser } from \"@/lib/auth\";\nimport type { HRAnalyticsV2 } from \"@/types/domain\";\n\nfunction MetricCard({\n  title,\n  value,\n  icon: Icon,\n  description,\n  testId,\n}: {\n  title: string;\n  value: string | number;\n  icon: React.ElementType;\n  description?: string;\n  testId: string;\n}) {\n  return (\n    <Card>\n      <CardContent className=\"pt-6\">\n        <div className=\"flex items-start justify-between gap-4\">\n          <div>\n            <p className=\"text-sm text-muted-foreground\">{title}</p>\n            <p className=\"text-3xl font-bold mt-1\" data-testid={testId}>\n              {value}\n            </p>\n            {description && (\n              <p className=\"text-sm text-muted-foreground mt-1\">{description}</p>\n            )}\n          </div>\n          <div className=\"p-3 bg-primary/10 rounded-lg\">\n            <Icon className=\"h-6 w-6 text-primary\" />\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\nfunction getRiskColor(riskIndex: number): \"destructive\" | \"default\" | \"secondary\" {\n  if (riskIndex >= 0.5) return \"destructive\";\n  if (riskIndex >= 0.2) return \"default\";\n  return \"secondary\";\n}\n\nexport default function HRAnalyticsPage() {\n  const [analytics, setAnalytics] = useState<HRAnalyticsV2 | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [authorized, setAuthorized] = useState(true);\n\n  useEffect(() => {\n    async function loadData() {\n      const user = await getCurrentUser();\n      if (!user || user.role !== \"HR_ADMIN\") {\n        setAuthorized(false);\n        setLoading(false);\n        return;\n      }\n\n      const data = await getHRAnalyticsV2();\n      setAnalytics(data);\n      setLoading(false);\n    }\n    loadData();\n  }, []);\n\n  if (loading) {\n    return (\n      <div className=\"p-6\">\n        <div className=\"animate-pulse space-y-4\">\n          <div className=\"h-8 bg-muted rounded w-1/3\" />\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n            {[1, 2, 3, 4].map((i) => (\n              <div key={i} className=\"h-32 bg-muted rounded\" />\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!authorized) {\n    return (\n      <div className=\"p-6\">\n        <Card>\n          <CardContent className=\"py-12 text-center\">\n            <AlertTriangle className=\"h-12 w-12 text-destructive mx-auto mb-4\" />\n            <h2 className=\"text-xl font-bold mb-2\">Access Denied</h2>\n            <p className=\"text-muted-foreground\">\n              This page is only accessible to HR Administrators.\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  if (!analytics) {\n    return (\n      <div className=\"p-6\">\n        <p className=\"text-muted-foreground\">Unable to load analytics</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div>\n        <h1 className=\"text-2xl font-bold\" data-testid=\"text-page-title\">\n          HR Analytics Dashboard\n        </h1>\n        <p className=\"text-muted-foreground\">Key workforce metrics and insights</p>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <MetricCard\n          title=\"Total Headcount\"\n          value={analytics.totalHeadcount}\n          icon={Users}\n          description=\"Active employees\"\n          testId=\"metric-headcount\"\n        />\n        <MetricCard\n          title=\"Sick Leave Rate\"\n          value={analytics.absencesAvailable ? `${analytics.sickLeaveRatio}%` : \"N/A\"}\n          icon={Activity}\n          description={analytics.absencesAvailable ? \"Last 30 days\" : \"Data not available\"}\n          testId=\"metric-sick-leave\"\n        />\n        <MetricCard\n          title=\"Contracts Ending\"\n          value={analytics.temporaryContractsEndingSoon}\n          icon={Calendar}\n          description=\"Within 90 days\"\n          testId=\"metric-contracts-ending\"\n        />\n        <MetricCard\n          title=\"Critical Events\"\n          value={analytics.criticalEventsByStatus.overdue + analytics.criticalEventsByStatus.dueSoon}\n          icon={AlertTriangle}\n          description={`${analytics.criticalEventsByStatus.overdue} overdue, ${analytics.criticalEventsByStatus.dueSoon} due soon`}\n          testId=\"metric-critical-events\"\n        />\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Users className=\"h-5 w-5\" />\n              Headcount by Unit & Employment Type\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {analytics.headcountByOrgUnit.length === 0 ? (\n              <p className=\"text-muted-foreground text-center py-4\">No data available</p>\n            ) : (\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full text-sm\">\n                  <thead>\n                    <tr className=\"border-b\">\n                      <th className=\"text-left py-2\">Unit</th>\n                      <th className=\"text-center py-2\">Perm</th>\n                      <th className=\"text-center py-2\">Temp</th>\n                      <th className=\"text-center py-2\">Cons</th>\n                      <th className=\"text-right py-2\">Total</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {analytics.headcountByOrgUnit.map((item) => (\n                      <tr key={item.orgUnitName} className=\"border-b last:border-0\">\n                        <td className=\"py-2\">{item.orgUnitName}</td>\n                        <td className=\"text-center py-2\">{item.permanent}</td>\n                        <td className=\"text-center py-2\">{item.temporary}</td>\n                        <td className=\"text-center py-2\">{item.consultant}</td>\n                        <td className=\"text-right py-2 font-medium\">{item.count}</td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Clock className=\"h-5 w-5\" />\n              Temporary Contracts Ending (90 days)\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {analytics.temporaryContractsEndingList.length === 0 ? (\n              <p className=\"text-muted-foreground text-center py-4\">No contracts ending soon</p>\n            ) : (\n              <div className=\"space-y-3 max-h-64 overflow-y-auto\">\n                {analytics.temporaryContractsEndingList.map((emp) => (\n                  <div key={emp.id} className=\"flex items-center justify-between gap-4 py-2 border-b last:border-0\">\n                    <div>\n                      <p className=\"font-medium\">{emp.name}</p>\n                      <p className=\"text-sm text-muted-foreground\">{emp.role}</p>\n                    </div>\n                    <Badge variant=\"outline\">\n                      {new Date(emp.contractEndDate).toLocaleDateString(\"sv-SE\")}\n                    </Badge>\n                  </div>\n                ))}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <AlertTriangle className=\"h-5 w-5\" />\n              Critical Events by Category\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {analytics.criticalEventsCount.length === 0 ? (\n              <p className=\"text-muted-foreground text-center py-4\">No critical events</p>\n            ) : (\n              <div className=\"space-y-3\">\n                {analytics.criticalEventsCount.map((item) => (\n                  <div key={item.category} className=\"flex items-center justify-between gap-4\">\n                    <span className=\"text-sm capitalize\">{item.category.replace(/_/g, \" \")}</span>\n                    <Badge\n                      variant={item.count > 5 ? \"destructive\" : item.count > 2 ? \"default\" : \"secondary\"}\n                    >\n                      {item.count}\n                    </Badge>\n                  </div>\n                ))}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Shield className=\"h-5 w-5\" />\n              People Risk Index by Unit\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {analytics.riskIndexByUnit.length === 0 ? (\n              <p className=\"text-muted-foreground text-center py-4\">No data available</p>\n            ) : (\n              <div className=\"space-y-3\">\n                {analytics.riskIndexByUnit.slice(0, 8).map((item) => (\n                  <div key={item.unitName} className=\"flex items-center justify-between gap-4\">\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"text-sm font-medium truncate\">{item.unitName}</p>\n                      <p className=\"text-xs text-muted-foreground\">\n                        {item.overdueCount} overdue, {item.dueSoonCount} due soon / {item.headcount} staff\n                      </p>\n                    </div>\n                    <Badge variant={getRiskColor(item.riskIndex)}>\n                      {item.riskIndex.toFixed(2)}\n                    </Badge>\n                  </div>\n                ))}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <TrendingUp className=\"h-5 w-5\" />\n              Employment Type Distribution\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {analytics.headcountByEmploymentType.length === 0 ? (\n              <p className=\"text-muted-foreground text-center py-4\">No data available</p>\n            ) : (\n              <div className=\"space-y-3\">\n                {analytics.headcountByEmploymentType.map((item) => (\n                  <div key={item.type} className=\"flex items-center justify-between gap-4\">\n                    <span className=\"text-sm capitalize\">{item.type}</span>\n                    <div className=\"flex items-center gap-2\">\n                      <Progress\n                        value={(item.count / analytics.totalHeadcount) * 100}\n                        className=\"w-24 h-2\"\n                      />\n                      <span className=\"text-sm font-medium w-8 text-right\">{item.count}</span>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <BarChart3 className=\"h-5 w-5\" />\n              Skill Level Distribution\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {analytics.skillDistribution.length === 0 ? (\n              <p className=\"text-muted-foreground text-center py-4\">No skills data</p>\n            ) : (\n              <div className=\"space-y-4\">\n                {analytics.skillDistribution.slice(0, 5).map((skill) => (\n                  <div key={skill.skillName}>\n                    <p className=\"text-sm font-medium mb-1\">{skill.skillName}</p>\n                    <div className=\"flex items-center gap-1\">\n                      {skill.levels.map((count, level) => (\n                        <div\n                          key={level}\n                          className=\"flex-1 bg-muted rounded text-center text-xs py-1\"\n                          title={`Level ${level}: ${count} employees`}\n                        >\n                          {count > 0 ? count : \"-\"}\n                        </div>\n                      ))}\n                    </div>\n                    <div className=\"flex items-center gap-1 text-xs text-muted-foreground mt-1\">\n                      {[0, 1, 2, 3, 4].map((l) => (\n                        <div key={l} className=\"flex-1 text-center\">\n                          L{l}\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <UserMinus className=\"h-5 w-5\" />\n              Attrition Risk\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex items-center gap-6 mb-4\">\n              <div className=\"text-center\">\n                <p className=\"text-3xl font-bold text-red-600 dark:text-red-400\" data-testid=\"metric-attrition-high\">\n                  {analytics.attritionRisk.highrisk}\n                </p>\n                <p className=\"text-sm text-muted-foreground\">High Risk</p>\n              </div>\n              <div className=\"text-center\">\n                <p className=\"text-3xl font-bold text-orange-600 dark:text-orange-400\" data-testid=\"metric-attrition-medium\">\n                  {analytics.attritionRisk.mediumRisk}\n                </p>\n                <p className=\"text-sm text-muted-foreground\">Medium Risk</p>\n              </div>\n            </div>\n            {analytics.attritionRisk.employees.length > 0 && (\n              <div className=\"space-y-2 max-h-48 overflow-y-auto\">\n                {analytics.attritionRisk.employees.slice(0, 5).map((emp) => (\n                  <div key={emp.id} className=\"flex items-center justify-between gap-2 py-1 border-b last:border-0\">\n                    <span className=\"text-sm\">{emp.name}</span>\n                    <Badge variant={emp.riskLevel === 'high' ? 'destructive' : 'default'}>\n                      {emp.factors[0]}\n                    </Badge>\n                  </div>\n                ))}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Clock className=\"h-5 w-5\" />\n              Tenure Distribution\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex items-center gap-4 mb-4\">\n              <div className=\"text-center\">\n                <p className=\"text-3xl font-bold\" data-testid=\"metric-avg-tenure\">\n                  {analytics.avgTenureYears}\n                </p>\n                <p className=\"text-sm text-muted-foreground\">Avg. Years</p>\n              </div>\n            </div>\n            <div className=\"space-y-2\">\n              {analytics.tenureBands.map((band) => (\n                <div key={band.band} className=\"flex items-center justify-between gap-4\">\n                  <span className=\"text-sm\">{band.band}</span>\n                  <div className=\"flex items-center gap-2\">\n                    <Progress\n                      value={(band.count / analytics.totalHeadcount) * 100}\n                      className=\"w-24 h-2\"\n                    />\n                    <span className=\"text-sm font-medium w-8 text-right\">{band.count}</span>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {analytics.openWorkflowsByTemplate.length > 0 && (\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Workflow className=\"h-5 w-5\" />\n              Active Workflows by Type\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex flex-wrap gap-4\">\n              {analytics.openWorkflowsByTemplate.map((wf) => (\n                <div key={wf.templateId} className=\"flex items-center gap-2\">\n                  <span className=\"text-sm\">{wf.templateName}</span>\n                  <Badge variant=\"secondary\">{wf.count}</Badge>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {!analytics.absencesAvailable && (\n        <Card>\n          <CardContent className=\"py-8 text-center\">\n            <Activity className=\"h-8 w-8 text-muted-foreground mx-auto mb-2\" />\n            <p className=\"text-muted-foreground\">\n              Sick leave analytics coming soon - awaiting absences data integration.\n            </p>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}