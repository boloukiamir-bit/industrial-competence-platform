{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/env.ts"],"sourcesContent":["/**\n * Environment variable helper with fail-fast behavior\n * Ensures Supabase credentials are always available\n */\n\nexport interface PublicEnv {\n  supabaseUrl: string;\n  supabaseAnonKey: string;\n}\n\n// Hardcoded fallback values for production builds\nconst FALLBACK_SUPABASE_URL = \"https://bmvawfrnlpdvcmffqrzc.supabase.co\";\nconst FALLBACK_SUPABASE_ANON_KEY = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJtdmF3ZnJubHBkdmNtZmZxcnpjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU1MTEwOTAsImV4cCI6MjA4MTA4NzA5MH0.DHLJ4aMn1dORfbNPt1XrJtcdIjYN81YQbJ19Q89A_pM\";\n\n/**\n * Get public environment variables with fail-fast behavior\n * Throws if credentials are not available\n */\nexport function getPublicEnv(): PublicEnv {\n  const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || FALLBACK_SUPABASE_URL;\n  const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || FALLBACK_SUPABASE_ANON_KEY;\n\n  const missing: string[] = [];\n  \n  if (!supabaseUrl || supabaseUrl.includes('placeholder')) {\n    missing.push('NEXT_PUBLIC_SUPABASE_URL');\n  }\n  if (!supabaseAnonKey || supabaseAnonKey.includes('placeholder')) {\n    missing.push('NEXT_PUBLIC_SUPABASE_ANON_KEY');\n  }\n\n  if (missing.length > 0) {\n    throw new Error(`Supabase env missing: ${missing.join(', ')}`);\n  }\n\n  return {\n    supabaseUrl,\n    supabaseAnonKey,\n  };\n}\n\n/**\n * Check if public environment is properly configured\n * Returns validation result without throwing\n */\nexport function validatePublicEnv(): { valid: boolean; missing: string[] } {\n  const missing: string[] = [];\n  \n  const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || FALLBACK_SUPABASE_URL;\n  const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || FALLBACK_SUPABASE_ANON_KEY;\n\n  if (!supabaseUrl || supabaseUrl.includes('placeholder')) {\n    missing.push('NEXT_PUBLIC_SUPABASE_URL');\n  }\n  if (!supabaseAnonKey || supabaseAnonKey.includes('placeholder')) {\n    missing.push('NEXT_PUBLIC_SUPABASE_ANON_KEY');\n  }\n\n  return {\n    valid: missing.length === 0,\n    missing,\n  };\n}\n\n/**\n * Get the service role key (server-side only)\n * Never expose this to client code\n */\nexport function getServiceRoleKey(): string {\n  if (typeof window !== 'undefined') {\n    throw new Error('Service role key must never be accessed on the client');\n  }\n  \n  const key = process.env.SUPABASE_SERVICE_ROLE_KEY;\n  if (!key) {\n    throw new Error('SUPABASE_SERVICE_ROLE_KEY is not configured');\n  }\n  \n  return key;\n}\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;AAOD,kDAAkD;AAClD,MAAM,wBAAwB;AAC9B,MAAM,6BAA6B;AAM5B,SAAS;IACd,MAAM,cAAc,gFAAwC;IAC5D,MAAM,kBAAkB,wPAA6C;IAErE,MAAM,UAAoB,EAAE;IAE5B,IAAI,CAAC,eAAe,YAAY,QAAQ,CAAC,gBAAgB;QACvD,QAAQ,IAAI,CAAC;IACf;IACA,IAAI,CAAC,mBAAmB,gBAAgB,QAAQ,CAAC,gBAAgB;QAC/D,QAAQ,IAAI,CAAC;IACf;IAEA,IAAI,QAAQ,MAAM,GAAG,GAAG;QACtB,MAAM,IAAI,MAAM,CAAC,sBAAsB,EAAE,QAAQ,IAAI,CAAC,OAAO;IAC/D;IAEA,OAAO;QACL;QACA;IACF;AACF;AAMO,SAAS;IACd,MAAM,UAAoB,EAAE;IAE5B,MAAM,cAAc,gFAAwC;IAC5D,MAAM,kBAAkB,wPAA6C;IAErE,IAAI,CAAC,eAAe,YAAY,QAAQ,CAAC,gBAAgB;QACvD,QAAQ,IAAI,CAAC;IACf;IACA,IAAI,CAAC,mBAAmB,gBAAgB,QAAQ,CAAC,gBAAgB;QAC/D,QAAQ,IAAI,CAAC;IACf;IAEA,OAAO;QACL,OAAO,QAAQ,MAAM,KAAK;QAC1B;IACF;AACF;AAMO,SAAS;IACd;;IAIA,MAAM,MAAM,QAAQ,GAAG,CAAC,yBAAyB;IACjD,IAAI,CAAC,KAAK;QACR,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO;AACT"}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/supabaseClient.ts"],"sourcesContent":["import { createClient, SupabaseClient } from \"@supabase/supabase-js\";\nimport { getPublicEnv, validatePublicEnv } from \"./env\";\n\nlet supabaseInstance: SupabaseClient | null = null;\n\nfunction createSupabaseClient(): SupabaseClient {\n  const env = getPublicEnv();\n  return createClient(env.supabaseUrl, env.supabaseAnonKey, {\n    auth: {\n      persistSession: true,\n      autoRefreshToken: true,\n      detectSessionInUrl: true,\n    },\n  });\n}\n\nexport function getSupabaseClient(): SupabaseClient {\n  if (!supabaseInstance) {\n    supabaseInstance = createSupabaseClient();\n  }\n  return supabaseInstance;\n}\n\nexport const supabase: SupabaseClient = createSupabaseClient();\n\nexport function isSupabaseReady(): boolean {\n  const validation = validatePublicEnv();\n  return validation.valid;\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAEA,IAAI,mBAA0C;AAE9C,SAAS;IACP,MAAM,MAAM,IAAA,4HAAY;IACxB,OAAO,IAAA,yLAAY,EAAC,IAAI,WAAW,EAAE,IAAI,eAAe,EAAE;QACxD,MAAM;YACJ,gBAAgB;YAChB,kBAAkB;YAClB,oBAAoB;QACtB;IACF;AACF;AAEO,SAAS;IACd,IAAI,CAAC,kBAAkB;QACrB,mBAAmB;IACrB;IACA,OAAO;AACT;AAEO,MAAM,WAA2B;AAEjC,SAAS;IACd,MAAM,aAAa,IAAA,iIAAiB;IACpC,OAAO,WAAW,KAAK;AACzB"}},
    {"offset": {"line": 144, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/types/spaljisten.ts"],"sourcesContent":["export const SPALJISTEN_ORG_ID = \"a1b2c3d4-e5f6-7890-abcd-ef1234567890\";\n\nexport type SPRatingScale = {\n  id: string;\n  orgId: string;\n  level: number;\n  label: string;\n  description: string | null;\n  color: string | null;\n};\n\nexport type SPArea = {\n  id: string;\n  orgId: string;\n  areaCode: string;\n  areaName: string;\n};\n\nexport type SPStation = {\n  id: string;\n  orgId: string;\n  areaId: string | null;\n  stationCode: string;\n  stationName: string;\n  sortOrder: number;\n};\n\nexport type SPSkill = {\n  id: string;\n  orgId: string;\n  skillId: string;\n  skillName: string;\n  stationId: string | null;\n  category: string | null;\n  description: string | null;\n  sortOrder: number;\n};\n\nexport type SPEmployee = {\n  id: string;\n  orgId: string;\n  employeeId: string;\n  employeeName: string;\n  email: string | null;\n  areaId: string | null;\n  employmentType: string;\n  isActive: boolean;\n};\n\nexport type SPEmployeeSkill = {\n  id: string;\n  orgId: string;\n  employeeId: string;\n  skillId: string;\n  rating: number | null;\n  assessedDate: string | null;\n  assessedBy: string | null;\n  notes: string | null;\n};\n\nexport type SPAreaLeader = {\n  id: string;\n  orgId: string;\n  areaId: string;\n  employeeId: string;\n  isPrimary: boolean;\n};\n\nexport type SPImportLog = {\n  id: string;\n  orgId: string;\n  importType: string;\n  fileName: string | null;\n  totalRows: number;\n  insertedCount: number;\n  updatedCount: number;\n  failedCount: number;\n  failedRows: { line: number; reason: string }[];\n  importedBy: string | null;\n  createdAt: string;\n};\n\nexport type ImportResult = {\n  success: boolean;\n  importType: string;\n  totalRows: number;\n  inserted: number;\n  updated: number;\n  failed: number;\n  failedRows: { line: number; reason: string }[];\n};\n\nexport type SkillGapData = {\n  stationCode: string;\n  stationName: string;\n  skillId: string;\n  skillName: string;\n  independentCount: number;\n  totalEmployees: number;\n  employees: { employeeId: string; employeeName: string; rating: number | null }[];\n  riskLevel: \"ok\" | \"warning\" | \"critical\";\n};\n\nexport type DashboardKPIs = {\n  totalEmployees: number;\n  totalStations: number;\n  totalSkills: number;\n  averageIndependentRate: number;\n};\n\nexport type TopRiskStation = {\n  stationCode: string;\n  stationName: string;\n  independentCount: number;\n  totalSkills: number;\n  riskScore: number;\n};\n"],"names":[],"mappings":";;;;AAAO,MAAM,oBAAoB"}},
    {"offset": {"line": 153, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/services/spaljistenDashboard.ts"],"sourcesContent":["import { supabase } from \"@/lib/supabaseClient\";\nimport {\n  SPALJISTEN_ORG_ID,\n  SPArea,\n  SPStation,\n  SPSkill,\n  SPEmployee,\n  DashboardKPIs,\n  TopRiskStation,\n  SkillGapData,\n} from \"@/types/spaljisten\";\n\nexport async function getAreas(orgId: string = SPALJISTEN_ORG_ID): Promise<SPArea[]> {\n  const { data, error } = await supabase\n    .from(\"sp_areas\")\n    .select(\"id, org_id, area_code, area_name\")\n    .eq(\"org_id\", orgId)\n    .order(\"area_name\");\n\n  if (error) throw error;\n  return (data || []).map((a) => ({\n    id: a.id,\n    orgId: a.org_id,\n    areaCode: a.area_code,\n    areaName: a.area_name,\n  }));\n}\n\nexport async function getStations(\n  orgId: string = SPALJISTEN_ORG_ID,\n  areaId?: string\n): Promise<SPStation[]> {\n  let query = supabase\n    .from(\"sp_stations\")\n    .select(\"id, org_id, area_id, station_code, station_name, sort_order\")\n    .eq(\"org_id\", orgId)\n    .order(\"station_name\");\n\n  if (areaId) {\n    query = query.eq(\"area_id\", areaId);\n  }\n\n  const { data, error } = await query;\n  if (error) throw error;\n\n  return (data || []).map((s) => ({\n    id: s.id,\n    orgId: s.org_id,\n    areaId: s.area_id,\n    stationCode: s.station_code,\n    stationName: s.station_name,\n    sortOrder: s.sort_order || 0,\n  }));\n}\n\nexport async function getSkills(\n  orgId: string = SPALJISTEN_ORG_ID,\n  stationId?: string\n): Promise<SPSkill[]> {\n  let query = supabase\n    .from(\"sp_skills\")\n    .select(\"id, org_id, skill_id, skill_name, station_id, category, description, sort_order\")\n    .eq(\"org_id\", orgId)\n    .order(\"skill_name\");\n\n  if (stationId) {\n    query = query.eq(\"station_id\", stationId);\n  }\n\n  const { data, error } = await query;\n  if (error) throw error;\n\n  return (data || []).map((s) => ({\n    id: s.id,\n    orgId: s.org_id,\n    skillId: s.skill_id,\n    skillName: s.skill_name,\n    stationId: s.station_id,\n    category: s.category,\n    description: s.description,\n    sortOrder: s.sort_order || 0,\n  }));\n}\n\nexport async function getEmployees(\n  orgId: string = SPALJISTEN_ORG_ID,\n  areaId?: string\n): Promise<SPEmployee[]> {\n  let query = supabase\n    .from(\"sp_employees\")\n    .select(\"id, org_id, employee_id, employee_name, email, area_id, employment_type, is_active\")\n    .eq(\"org_id\", orgId)\n    .eq(\"is_active\", true)\n    .order(\"employee_name\");\n\n  if (areaId) {\n    query = query.eq(\"area_id\", areaId);\n  }\n\n  const { data, error } = await query;\n  if (error) throw error;\n\n  return (data || []).map((e) => ({\n    id: e.id,\n    orgId: e.org_id,\n    employeeId: e.employee_id,\n    employeeName: e.employee_name,\n    email: e.email,\n    areaId: e.area_id,\n    employmentType: e.employment_type,\n    isActive: e.is_active,\n  }));\n}\n\nexport async function getDashboardKPIs(\n  orgId: string = SPALJISTEN_ORG_ID\n): Promise<DashboardKPIs> {\n  const [employeesRes, stationsRes, skillsRes, ratingsRes] = await Promise.all([\n    supabase\n      .from(\"sp_employees\")\n      .select(\"id\", { count: \"exact\", head: true })\n      .eq(\"org_id\", orgId)\n      .eq(\"is_active\", true),\n    supabase\n      .from(\"sp_stations\")\n      .select(\"id\", { count: \"exact\", head: true })\n      .eq(\"org_id\", orgId),\n    supabase\n      .from(\"sp_skills\")\n      .select(\"id\", { count: \"exact\", head: true })\n      .eq(\"org_id\", orgId),\n    supabase\n      .from(\"sp_employee_skills\")\n      .select(\"rating\")\n      .eq(\"org_id\", orgId)\n      .gte(\"rating\", 3),\n  ]);\n\n  const totalEmployees = employeesRes.count || 0;\n  const totalStations = stationsRes.count || 0;\n  const totalSkills = skillsRes.count || 0;\n\n  const totalRatingsRes = await supabase\n    .from(\"sp_employee_skills\")\n    .select(\"id\", { count: \"exact\", head: true })\n    .eq(\"org_id\", orgId)\n    .not(\"rating\", \"is\", null);\n\n  const independentCount = ratingsRes.data?.length || 0;\n  const totalRatings = totalRatingsRes.count || 1;\n  const averageIndependentRate = Math.round((independentCount / totalRatings) * 100);\n\n  return {\n    totalEmployees,\n    totalStations,\n    totalSkills,\n    averageIndependentRate,\n  };\n}\n\nexport async function getTopRiskStations(\n  orgId: string = SPALJISTEN_ORG_ID,\n  limit: number = 10\n): Promise<TopRiskStation[]> {\n  const { data: stations } = await supabase\n    .from(\"sp_stations\")\n    .select(\"id, station_code, station_name\")\n    .eq(\"org_id\", orgId);\n\n  if (!stations || stations.length === 0) return [];\n\n  const stationRisks: TopRiskStation[] = [];\n\n  for (const station of stations) {\n    const { data: skills } = await supabase\n      .from(\"sp_skills\")\n      .select(\"skill_id\")\n      .eq(\"org_id\", orgId)\n      .eq(\"station_id\", station.id);\n\n    if (!skills || skills.length === 0) continue;\n\n    const skillIds = skills.map((s) => s.skill_id);\n\n    const { data: ratings } = await supabase\n      .from(\"sp_employee_skills\")\n      .select(\"skill_id, rating\")\n      .eq(\"org_id\", orgId)\n      .in(\"skill_id\", skillIds)\n      .gte(\"rating\", 3);\n\n    const independentCount = ratings?.length || 0;\n    const totalSkills = skills.length;\n    const riskScore = totalSkills - independentCount;\n\n    stationRisks.push({\n      stationCode: station.station_code,\n      stationName: station.station_name,\n      independentCount,\n      totalSkills,\n      riskScore,\n    });\n  }\n\n  return stationRisks\n    .sort((a, b) => b.riskScore - a.riskScore)\n    .slice(0, limit);\n}\n\nexport async function getSkillGapData(\n  orgId: string = SPALJISTEN_ORG_ID,\n  areaId?: string,\n  stationId?: string\n): Promise<SkillGapData[]> {\n  let stationQuery = supabase\n    .from(\"sp_stations\")\n    .select(\"id, station_code, station_name, area_id\")\n    .eq(\"org_id\", orgId);\n\n  if (areaId) {\n    stationQuery = stationQuery.eq(\"area_id\", areaId);\n  }\n  if (stationId) {\n    stationQuery = stationQuery.eq(\"id\", stationId);\n  }\n\n  const { data: stations } = await stationQuery;\n  if (!stations || stations.length === 0) return [];\n\n  const stationIds = stations.map((s) => s.id);\n\n  const { data: skills } = await supabase\n    .from(\"sp_skills\")\n    .select(\"id, skill_id, skill_name, station_id\")\n    .eq(\"org_id\", orgId)\n    .in(\"station_id\", stationIds);\n\n  if (!skills || skills.length === 0) return [];\n\n  const { data: employees } = await supabase\n    .from(\"sp_employees\")\n    .select(\"employee_id, employee_name\")\n    .eq(\"org_id\", orgId)\n    .eq(\"is_active\", true);\n\n  const employeeMap = new Map(employees?.map((e) => [e.employee_id, e.employee_name]) || []);\n\n  const skillIds = skills.map((s) => s.skill_id);\n  const { data: ratings } = await supabase\n    .from(\"sp_employee_skills\")\n    .select(\"employee_id, skill_id, rating\")\n    .eq(\"org_id\", orgId)\n    .in(\"skill_id\", skillIds);\n\n  const ratingsBySkill = new Map<string, { employeeId: string; rating: number | null }[]>();\n  for (const r of ratings || []) {\n    if (!ratingsBySkill.has(r.skill_id)) {\n      ratingsBySkill.set(r.skill_id, []);\n    }\n    ratingsBySkill.get(r.skill_id)!.push({ employeeId: r.employee_id, rating: r.rating });\n  }\n\n  const stationMap = new Map(stations.map((s) => [s.id, s]));\n  const gapData: SkillGapData[] = [];\n\n  for (const skill of skills) {\n    const station = stationMap.get(skill.station_id);\n    if (!station) continue;\n\n    const skillRatings = ratingsBySkill.get(skill.skill_id) || [];\n    const independentCount = skillRatings.filter((r) => r.rating !== null && r.rating >= 3).length;\n    const totalEmployees = skillRatings.length;\n\n    const employeeDetails = skillRatings.map((r) => ({\n      employeeId: r.employeeId,\n      employeeName: employeeMap.get(r.employeeId) || r.employeeId,\n      rating: r.rating,\n    }));\n\n    let riskLevel: \"ok\" | \"warning\" | \"critical\" = \"ok\";\n    if (independentCount === 0) {\n      riskLevel = \"critical\";\n    } else if (independentCount < 2) {\n      riskLevel = \"warning\";\n    }\n\n    gapData.push({\n      stationCode: station.station_code,\n      stationName: station.station_name,\n      skillId: skill.skill_id,\n      skillName: skill.skill_name,\n      independentCount,\n      totalEmployees,\n      employees: employeeDetails,\n      riskLevel,\n    });\n  }\n\n  return gapData.sort((a, b) => {\n    if (a.riskLevel !== b.riskLevel) {\n      const order = { critical: 0, warning: 1, ok: 2 };\n      return order[a.riskLevel] - order[b.riskLevel];\n    }\n    return a.independentCount - b.independentCount;\n  });\n}\n\nexport async function getFilterOptions(orgId: string = SPALJISTEN_ORG_ID) {\n  const [areas, stations] = await Promise.all([\n    getAreas(orgId),\n    getStations(orgId),\n  ]);\n\n  return { areas, stations };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 381, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/api/spaljisten/dashboard/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport {\n  getDashboardKPIs,\n  getTopRiskStations,\n  getSkillGapData,\n  getFilterOptions,\n} from \"@/services/spaljistenDashboard\";\nimport { SPALJISTEN_ORG_ID } from \"@/types/spaljisten\";\n\nexport async function GET(request: NextRequest) {\n  try {\n    const searchParams = request.nextUrl.searchParams;\n    const areaId = searchParams.get(\"areaId\") || undefined;\n    const stationId = searchParams.get(\"stationId\") || undefined;\n\n    const [kpis, topRiskStations, skillGapData, filterOptions] = await Promise.all([\n      getDashboardKPIs(SPALJISTEN_ORG_ID),\n      getTopRiskStations(SPALJISTEN_ORG_ID, 10),\n      getSkillGapData(SPALJISTEN_ORG_ID, areaId, stationId),\n      getFilterOptions(SPALJISTEN_ORG_ID),\n    ]);\n\n    return NextResponse.json({\n      kpis,\n      topRiskStations,\n      skillGapData,\n      filterOptions,\n    });\n  } catch (error) {\n    console.error(\"Dashboard error:\", error);\n    return NextResponse.json(\n      { error: error instanceof Error ? error.message : \"Failed to load dashboard\" },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AAMA;;;;AAEO,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,MAAM,eAAe,QAAQ,OAAO,CAAC,YAAY;QACjD,MAAM,SAAS,aAAa,GAAG,CAAC,aAAa;QAC7C,MAAM,YAAY,aAAa,GAAG,CAAC,gBAAgB;QAEnD,MAAM,CAAC,MAAM,iBAAiB,cAAc,cAAc,GAAG,MAAM,QAAQ,GAAG,CAAC;YAC7E,IAAA,qJAAgB,EAAC,0IAAiB;YAClC,IAAA,uJAAkB,EAAC,0IAAiB,EAAE;YACtC,IAAA,oJAAe,EAAC,0IAAiB,EAAE,QAAQ;YAC3C,IAAA,qJAAgB,EAAC,0IAAiB;SACnC;QAED,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB;YACA;YACA;YACA;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,oBAAoB;QAClC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAA2B,GAC7E;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}