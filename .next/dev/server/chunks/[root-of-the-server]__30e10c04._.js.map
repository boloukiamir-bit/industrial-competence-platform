{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/pgClient.ts"],"sourcesContent":["import { Pool } from \"pg\";\n\nconst pool = new Pool({\n  connectionString: process.env.DATABASE_URL,\n  ssl: process.env.DATABASE_URL?.includes(\"localhost\") ? false : { rejectUnauthorized: false },\n});\n\nexport default pool;\n"],"names":[],"mappings":";;;;AAAA;;;;;;AAEA,MAAM,OAAO,IAAI,4GAAI,CAAC;IACpB,kBAAkB,QAAQ,GAAG,CAAC,YAAY;IAC1C,KAAK,QAAQ,GAAG,CAAC,YAAY,EAAE,SAAS,eAAe,QAAQ;QAAE,oBAAoB;IAAM;AAC7F;uCAEe"}},
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/api/spaljisten/reset/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport pool from \"@/lib/pgClient\";\n\nconst SPALJISTEN_ORG_ID = \"a1b2c3d4-e5f6-7890-abcd-ef1234567890\";\n\nexport async function DELETE(request: NextRequest) {\n  try {\n    const client = await pool.connect();\n    try {\n      await client.query(\"BEGIN\");\n      \n      await client.query(\"DELETE FROM sp_import_logs WHERE org_id = $1\", [SPALJISTEN_ORG_ID]);\n      await client.query(\"DELETE FROM sp_area_leaders WHERE org_id = $1\", [SPALJISTEN_ORG_ID]);\n      await client.query(\"DELETE FROM sp_employee_skills WHERE org_id = $1\", [SPALJISTEN_ORG_ID]);\n      await client.query(\"DELETE FROM sp_employees WHERE org_id = $1\", [SPALJISTEN_ORG_ID]);\n      await client.query(\"DELETE FROM sp_skills WHERE org_id = $1\", [SPALJISTEN_ORG_ID]);\n      await client.query(\"DELETE FROM sp_stations WHERE org_id = $1\", [SPALJISTEN_ORG_ID]);\n      await client.query(\"DELETE FROM sp_areas WHERE org_id = $1\", [SPALJISTEN_ORG_ID]);\n      \n      await client.query(\"COMMIT\");\n      \n      return NextResponse.json({ \n        success: true, \n        message: \"Spaljisten dataset reset successfully. All areas, employees, skills, ratings cleared.\" \n      });\n    } catch (err) {\n      await client.query(\"ROLLBACK\");\n      throw err;\n    } finally {\n      client.release();\n    }\n  } catch (error) {\n    console.error(\"Reset error:\", error);\n    return NextResponse.json(\n      { error: error instanceof Error ? error.message : \"Reset failed\" },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function GET() {\n  try {\n    const client = await pool.connect();\n    try {\n      const [areasRes, employeesRes, skillsRes, ratingsRes, stationsRes] = await Promise.all([\n        client.query(\"SELECT COUNT(*) as count FROM sp_areas WHERE org_id = $1\", [SPALJISTEN_ORG_ID]),\n        client.query(\"SELECT COUNT(*) as count FROM sp_employees WHERE org_id = $1\", [SPALJISTEN_ORG_ID]),\n        client.query(\"SELECT COUNT(*) as count FROM sp_skills WHERE org_id = $1\", [SPALJISTEN_ORG_ID]),\n        client.query(\"SELECT COUNT(*) as count FROM sp_employee_skills WHERE org_id = $1\", [SPALJISTEN_ORG_ID]),\n        client.query(\"SELECT COUNT(*) as count FROM sp_stations WHERE org_id = $1\", [SPALJISTEN_ORG_ID]),\n      ]);\n      \n      return NextResponse.json({\n        areas: parseInt(areasRes.rows[0].count),\n        stations: parseInt(stationsRes.rows[0].count),\n        employees: parseInt(employeesRes.rows[0].count),\n        skills: parseInt(skillsRes.rows[0].count),\n        ratings: parseInt(ratingsRes.rows[0].count),\n      });\n    } finally {\n      client.release();\n    }\n  } catch (error) {\n    console.error(\"Status error:\", error);\n    return NextResponse.json(\n      { error: error instanceof Error ? error.message : \"Status check failed\" },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;;;;;AAEA,MAAM,oBAAoB;AAEnB,eAAe,OAAO,OAAoB;IAC/C,IAAI;QACF,MAAM,SAAS,MAAM,4HAAI,CAAC,OAAO;QACjC,IAAI;YACF,MAAM,OAAO,KAAK,CAAC;YAEnB,MAAM,OAAO,KAAK,CAAC,gDAAgD;gBAAC;aAAkB;YACtF,MAAM,OAAO,KAAK,CAAC,iDAAiD;gBAAC;aAAkB;YACvF,MAAM,OAAO,KAAK,CAAC,oDAAoD;gBAAC;aAAkB;YAC1F,MAAM,OAAO,KAAK,CAAC,8CAA8C;gBAAC;aAAkB;YACpF,MAAM,OAAO,KAAK,CAAC,2CAA2C;gBAAC;aAAkB;YACjF,MAAM,OAAO,KAAK,CAAC,6CAA6C;gBAAC;aAAkB;YACnF,MAAM,OAAO,KAAK,CAAC,0CAA0C;gBAAC;aAAkB;YAEhF,MAAM,OAAO,KAAK,CAAC;YAEnB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBACvB,SAAS;gBACT,SAAS;YACX;QACF,EAAE,OAAO,KAAK;YACZ,MAAM,OAAO,KAAK,CAAC;YACnB,MAAM;QACR,SAAU;YACR,OAAO,OAAO;QAChB;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gBAAgB;QAC9B,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAAe,GACjE;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,SAAS,MAAM,4HAAI,CAAC,OAAO;QACjC,IAAI;YACF,MAAM,CAAC,UAAU,cAAc,WAAW,YAAY,YAAY,GAAG,MAAM,QAAQ,GAAG,CAAC;gBACrF,OAAO,KAAK,CAAC,4DAA4D;oBAAC;iBAAkB;gBAC5F,OAAO,KAAK,CAAC,gEAAgE;oBAAC;iBAAkB;gBAChG,OAAO,KAAK,CAAC,6DAA6D;oBAAC;iBAAkB;gBAC7F,OAAO,KAAK,CAAC,sEAAsE;oBAAC;iBAAkB;gBACtG,OAAO,KAAK,CAAC,+DAA+D;oBAAC;iBAAkB;aAChG;YAED,OAAO,gJAAY,CAAC,IAAI,CAAC;gBACvB,OAAO,SAAS,SAAS,IAAI,CAAC,EAAE,CAAC,KAAK;gBACtC,UAAU,SAAS,YAAY,IAAI,CAAC,EAAE,CAAC,KAAK;gBAC5C,WAAW,SAAS,aAAa,IAAI,CAAC,EAAE,CAAC,KAAK;gBAC9C,QAAQ,SAAS,UAAU,IAAI,CAAC,EAAE,CAAC,KAAK;gBACxC,SAAS,SAAS,WAAW,IAAI,CAAC,EAAE,CAAC,KAAK;YAC5C;QACF,SAAU;YACR,OAAO,OAAO;QAChB;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iBAAiB;QAC/B,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAAsB,GACxE;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}