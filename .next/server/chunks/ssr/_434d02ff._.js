module.exports=[15618,a=>{"use strict";let b=(0,a.i(70106).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},210,a=>{"use strict";let b=(0,a.i(70106).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},81560,a=>{"use strict";let b=(0,a.i(70106).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>b],81560)},75026,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(210),f=a.i(15618),g=a.i(81560),h=a.i(7291);function i(){let a=(0,d.useParams)(),i=(0,d.useRouter)(),j=a.id,[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)({templateId:"",reviewDate:new Date().toISOString().split("T")[0],periodStart:"",periodEnd:"",overallRating:0,summary:"",notes:""}),[u,v]=(0,c.useState)([]);async function w(a){a.preventDefault(),p(!0);try{await h.supabase.from("employee_reviews").insert({employee_id:j,template_id:s.templateId||null,review_date:s.reviewDate,period_start:s.periodStart||null,period_end:s.periodEnd||null,overall_rating:s.overallRating||null,summary:s.summary||null,goals:u.filter(a=>a.text.trim()).length>0?u.filter(a=>a.text.trim()):null,notes:s.notes||null}),i.push(`/app/employees/${j}`)}catch(a){console.error("Error creating review:",a),p(!1)}}return(0,c.useEffect)(()=>{!async function(){let[a,b]=await Promise.all([h.supabase.from("review_templates").select("*").eq("is_active",!0).order("name"),h.supabase.from("employees").select("name").eq("id",j).single()]);l((a.data||[]).map(a=>({id:a.id,name:a.name,description:a.description,audience:a.audience,isActive:a.is_active,createdAt:a.created_at}))),r(b.data?.name||""),n(!1)}()},[j]),m?(0,b.jsx)("div",{className:"p-6",children:(0,b.jsx)("div",{className:"animate-pulse h-64 bg-gray-200 dark:bg-gray-700 rounded"})}):(0,b.jsxs)("div",{className:"p-6 max-w-2xl",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,b.jsx)("button",{onClick:()=>i.back(),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md","data-testid":"button-back",children:(0,b.jsx)(e.ArrowLeft,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"New Review"}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["For ",q]})]})]}),(0,b.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Template"}),(0,b.jsxs)("select",{value:s.templateId,onChange:a=>t({...s,templateId:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"select-template",children:[(0,b.jsx)("option",{value:"",children:"Select template..."}),k.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Review Date *"}),(0,b.jsx)("input",{type:"date",value:s.reviewDate,onChange:a=>t({...s,reviewDate:a.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-review-date"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Period Start"}),(0,b.jsx)("input",{type:"date",value:s.periodStart,onChange:a=>t({...s,periodStart:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-period-start"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Period End"}),(0,b.jsx)("input",{type:"date",value:s.periodEnd,onChange:a=>t({...s,periodEnd:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-period-end"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Overall Rating (1-5)"}),(0,b.jsx)("div",{className:"flex gap-2",children:[1,2,3,4,5].map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>t({...s,overallRating:a}),className:`w-10 h-10 rounded-md font-medium transition-colors ${s.overallRating===a?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,"data-testid":`button-rating-${a}`,children:a},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Summary"}),(0,b.jsx)("textarea",{value:s.summary,onChange:a=>t({...s,summary:a.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white resize-none",placeholder:"Overall feedback and observations...","data-testid":"textarea-summary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Goals"}),(0,b.jsxs)("button",{type:"button",onClick:function(){v([...u,{id:crypto.randomUUID(),text:"",status:"pending"}])},className:"flex items-center gap-1 text-sm text-blue-600 dark:text-blue-400 hover:underline","data-testid":"button-add-goal",children:[(0,b.jsx)(f.Plus,{className:"h-4 w-4"}),"Add Goal"]})]}),0===u.length?(0,b.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No goals added"}):(0,b.jsx)("div",{className:"space-y-2",children:u.map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"text",value:a.text,onChange:b=>{var c,d;return c=a.id,d=b.target.value,void v(u.map(a=>a.id===c?{...a,text:d}:a))},placeholder:"Goal description...",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":`input-goal-${a.id}`}),(0,b.jsx)("button",{type:"button",onClick:()=>{var b;return b=a.id,void v(u.filter(a=>a.id!==b))},className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md","data-testid":`button-remove-goal-${a.id}`,children:(0,b.jsx)(g.Trash2,{className:"h-4 w-4"})})]},a.id))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes"}),(0,b.jsx)("textarea",{value:s.notes,onChange:a=>t({...s,notes:a.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white resize-none",placeholder:"Additional notes...","data-testid":"textarea-notes"})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,b.jsx)("button",{type:"button",onClick:()=>i.back(),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700","data-testid":"button-cancel",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:o,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 rounded-md","data-testid":"button-save-review",children:o?"Saving...":"Save Review"})]})]})]})}a.s(["default",()=>i])}];

//# sourceMappingURL=_434d02ff._.js.map