module.exports=[210,a=>{"use strict";let b=(0,a.i(70106).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},48615,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(210),f=a.i(7291);function g(){let a=(0,d.useParams)(),g=(0,d.useRouter)(),h=a.id,[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)({revisionDate:new Date().toISOString().split("T")[0],previousSalary:0,newSalary:0,salaryType:"monthly",reason:""});async function q(a){a.preventDefault(),l(!0);try{await f.supabase.from("salary_revisions").insert({employee_id:h,revision_date:o.revisionDate,previous_salary_sek:o.previousSalary,new_salary_sek:o.newSalary,salary_type:o.salaryType,reason:o.reason||null}),await f.supabase.from("salary_records").insert({employee_id:h,effective_from:o.revisionDate,salary_amount_sek:o.newSalary,salary_type:o.salaryType}),g.push(`/app/employees/${h}`)}catch(a){console.error("Error creating salary revision:",a),l(!1)}}if((0,c.useEffect)(()=>{!async function(){let[a,b]=await Promise.all([f.supabase.from("employees").select("name").eq("id",h).single(),f.supabase.from("salary_records").select("salary_amount_sek, salary_type").eq("employee_id",h).order("effective_from",{ascending:!1}).limit(1)]);n(a.data?.name||""),b.data&&b.data.length>0&&p(a=>({...a,previousSalary:parseFloat(b.data[0].salary_amount_sek),newSalary:parseFloat(b.data[0].salary_amount_sek),salaryType:b.data[0].salary_type||"monthly"})),j(!1)}()},[h]),i)return(0,b.jsx)("div",{className:"p-6",children:(0,b.jsx)("div",{className:"animate-pulse h-64 bg-gray-200 dark:bg-gray-700 rounded"})});let r=o.previousSalary>0?((o.newSalary-o.previousSalary)/o.previousSalary*100).toFixed(1):0;return(0,b.jsxs)("div",{className:"p-6 max-w-xl",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,b.jsx)("button",{onClick:()=>g.back(),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md","data-testid":"button-back",children:(0,b.jsx)(e.ArrowLeft,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"New Salary Revision"}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["For ",m]})]})]}),(0,b.jsxs)("form",{onSubmit:q,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Revision Date *"}),(0,b.jsx)("input",{type:"date",value:o.revisionDate,onChange:a=>p({...o,revisionDate:a.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-revision-date"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Salary Type"}),(0,b.jsxs)("select",{value:o.salaryType,onChange:a=>p({...o,salaryType:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"select-salary-type",children:[(0,b.jsx)("option",{value:"monthly",children:"Monthly"}),(0,b.jsx)("option",{value:"hourly",children:"Hourly"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Previous Salary (SEK)"}),(0,b.jsx)("input",{type:"number",value:o.previousSalary,onChange:a=>p({...o,previousSalary:parseFloat(a.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white","data-testid":"input-previous-salary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"New Salary (SEK) *"}),(0,b.jsx)("input",{type:"number",value:o.newSalary,onChange:a=>p({...o,newSalary:parseFloat(a.target.value)||0}),required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-new-salary"})]})]}),o.previousSalary>0&&o.newSalary!==o.previousSalary&&(0,b.jsxs)("div",{className:`p-3 rounded-md ${o.newSalary>o.previousSalary?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400"}`,children:["Change: ",o.newSalary>o.previousSalary?"+":"",(o.newSalary-o.previousSalary).toLocaleString("sv-SE")," SEK (",o.newSalary>o.previousSalary?"+":"",r,"%)"]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Reason"}),(0,b.jsx)("textarea",{value:o.reason,onChange:a=>p({...o,reason:a.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white resize-none",placeholder:"Annual salary review, promotion, etc.","data-testid":"textarea-reason"})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,b.jsx)("button",{type:"button",onClick:()=>g.back(),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700","data-testid":"button-cancel",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:k,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 rounded-md","data-testid":"button-save-revision",children:k?"Saving...":"Save Revision"})]})]})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=_ccf3aa50._.js.map