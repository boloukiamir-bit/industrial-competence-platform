module.exports=[36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},88347,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e={ACTION_HMR_REFRESH:function(){return k},ACTION_NAVIGATE:function(){return h},ACTION_REFRESH:function(){return g},ACTION_RESTORE:function(){return i},ACTION_SERVER_ACTION:function(){return l},ACTION_SERVER_PATCH:function(){return j},PrefetchKind:function(){return m}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let g="refresh",h="navigate",i="restore",j="server-patch",k="hmr-refresh",l="server-action";var m=((d={}).AUTO="auto",d.FULL="full",d.TEMPORARY="temporary",d);("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},67009,(a,b,c)=>{"use strict";function d(a){return null!==a&&"object"==typeof a&&"then"in a&&"function"==typeof a.then}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"isThenable",{enumerable:!0,get:function(){return d}})},90841,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={dispatchAppRouterAction:function(){return i},useActionQueue:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(46058)._(a.r(72131)),g=a.r(67009),h=null;function i(a){if(null===h)throw Object.defineProperty(Error("Internal Next.js error: Router action dispatched before initialization."),"__NEXT_ERROR_CODE",{value:"E668",enumerable:!1,configurable:!0});h(a)}function j(a){let[b,c]=f.default.useState(a.state);h=b=>a.dispatch(b,c);let d=(0,f.useMemo)(()=>b,[b]);return(0,g.isThenable)(d)?(0,f.use)(d):d}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},20611,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"callServer",{enumerable:!0,get:function(){return g}});let d=a.r(72131),e=a.r(88347),f=a.r(90841);async function g(a,b){return new Promise((c,g)=>{(0,d.startTransition)(()=>{(0,f.dispatchAppRouterAction)({type:e.ACTION_SERVER_ACTION,actionId:a,actionArgs:b,resolve:c,reject:g})})})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},1722,(a,b,c)=>{"use strict";let d;Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"findSourceMapURL",{enumerable:!0,get:function(){return d}});("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},70579,a=>{"use strict";var b=a.i(7291);async function c(a,c){let{data:d,error:e}=await b.supabase.auth.signInWithPassword({email:a,password:c});if(e)throw e;return d}async function d(){let{error:a}=await b.supabase.auth.signOut();if(a)throw a}async function e(){let{data:a,error:c}=await b.supabase.auth.getUser();return c?null:a.user}async function f(){let{data:a,error:c}=await b.supabase.auth.getSession();return c?null:a.session}function g(a){return b.supabase.auth.onAuthStateChange(a)}a.s(["getAuthUser",()=>e,"getSession",()=>f,"onAuthStateChange",()=>g,"signInWithEmail",()=>c,"signOut",()=>d])},60246,a=>{"use strict";let b=(0,a.i(70106).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);a.s(["Users",()=>b],60246)},3314,a=>{"use strict";let b=(0,a.i(70106).default)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);a.s(["Shield",()=>b],3314)},47033,a=>{"use strict";var b=a.i(7291);async function c(){let a=process.env.NEXT_PUBLIC_DEV_USER_EMAIL||"hr@example.com";try{let{data:c,error:d}=await b.supabase.from("users").select("id, employee_id, email, role").eq("email",a).single();if(d||!c)return{id:"dev-user",role:"HR_ADMIN",email:a};return{id:c.id,role:c.role,employeeId:c.employee_id||void 0,email:c.email}}catch{return{id:"dev-user",role:"HR_ADMIN",email:a}}}a.s(["getCurrentUser",()=>c])},24669,a=>{"use strict";let b=(0,a.i(70106).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);a.s(["TrendingUp",()=>b],24669)},92e3,a=>{"use strict";let b=(0,a.i(70106).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],92e3)},4720,a=>{"use strict";let b=(0,a.i(70106).default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);a.s(["FileText",()=>b],4720)},67900,a=>{"use strict";let b=(0,a.i(70106).default)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);a.s(["Building2",()=>b],67900)},72221,a=>{"use strict";var b=a.i(72131),c=a.i(7291);let d="nadiplan_current_org";function e(){let[a,e]=(0,b.useState)(null),[f,g]=(0,b.useState)(null),[h,i]=(0,b.useState)([]),[j,k]=(0,b.useState)(!0),[l,m]=(0,b.useState)(null),n=(0,b.useCallback)(async()=>{k(!0),m(null);try{let{data:{user:a}}=await c.supabase.auth.getUser();if(!a){i([]),e(null),g(null),k(!1);return}let{data:b,error:f}=await c.supabase.from("memberships").select(`
          org_id,
          user_id,
          role,
          status,
          created_at,
          organization:organizations(id, name, slug, created_at)
        `).eq("user_id",a.id).eq("status","active");if(f){console.error("Error fetching memberships:",f),m("Failed to load organizations"),k(!1);return}let h=(b||[]).map(a=>({...a,organization:Array.isArray(a.organization)?a.organization[0]:a.organization||void 0}));i(h);let j=localStorage.getItem(d);if(j){let a=h.find(a=>a.org_id===j);a&&a.organization?(e(a.organization),g(a.role)):1===h.length&&h[0].organization&&(e(h[0].organization),g(h[0].role),localStorage.setItem(d,h[0].org_id))}else 1===h.length&&h[0].organization&&(e(h[0].organization),g(h[0].role),localStorage.setItem(d,h[0].org_id))}catch(a){console.error("Error in refreshMemberships:",a),m("Failed to load organizations")}finally{k(!1)}},[]),o=(0,b.useCallback)(a=>{let b=h.find(b=>b.org_id===a);b&&b.organization&&(e(b.organization),g(b.role),localStorage.setItem(d,a))},[h]);return(0,b.useEffect)(()=>{n()},[n]),{currentOrg:a,currentRole:f,memberships:h,isLoading:j,error:l,selectOrg:o,refreshMemberships:n,isAdmin:"admin"===f}}let f=(0,b.createContext)(null);function g(){let a=(0,b.useContext)(f);if(!a)throw Error("useOrg must be used within an OrgProvider");return a}a.s(["OrgContext",0,f,"useOrg",()=>g,"useOrgState",()=>e])},99806,a=>{"use strict";let b=(0,a.i(70106).default)("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);a.s(["Bug",()=>b],99806)},36395,a=>{"use strict";var b=a.i(72131),c=a.i(50944),d=a.i(70579);function e(a=!0){let f=(0,c.useRouter)(),[g,h]=(0,b.useState)(null),[i,j]=(0,b.useState)(!0);return(0,b.useEffect)(()=>{let b=!0;!async function(){try{let c=await (0,d.getSession)();b&&(c?.user?h(c.user):a&&f.push("/login"))}catch{b&&a&&f.push("/login")}finally{b&&j(!1)}}();let{data:{subscription:c}}=(0,d.onAuthStateChange)((c,d)=>{b&&("SIGNED_OUT"===c?(h(null),a&&f.push("/login")):"SIGNED_IN"===c&&d?.user&&h(d.user))});return()=>{b=!1,c.unsubscribe()}},[a,f]),{user:g,loading:i,isAuthenticated:!!g}}a.s(["useAuth",()=>e])},83497,a=>{"use strict";let b=(0,a.i(70106).default)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);a.s(["Package",()=>b],83497)},53722,a=>{"use strict";let b=(0,a.i(70106).default)("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);a.s(["BookOpen",()=>b],53722)},60825,a=>{"use strict";a.s(["COPY",0,{emptyStates:{employees:{title:"No employees yet",description:"Get started by importing employees from a CSV file or adding them manually."},organization:{title:"No organization units defined",description:"Create your first organization unit to structure your company."},competenceMatrix:{noRequirements:{title:"No requirements defined",description:"Define position requirements to see skill gaps and risk levels."},noEmployees:{title:"No employees found",description:"Add employees to see the competence matrix."}},gaps:{noRequirements:{title:"Cannot calculate gaps",description:"Define position requirements first to identify skill gaps."},noEmployees:{title:"No employees to analyze",description:"Add employees before generating gap analysis."},noGaps:{title:"No skill gaps found",description:"All employees meet the position requirements."}},risks:{empty:{title:"No events to display",description:"The system will automatically create events based on employment data."}}},actions:{importCsv:"Import CSV",addEmployee:"Add Employee",createUnit:"Create Unit",importOrgStructure:"Import Org Structure (CSV)",editRequirements:"Edit Requirements",exportCsv:"Export CSV",defineRequirements:"Define Requirements",goToSetup:"Go to Setup",generateGaps:"Generate Gaps"},setup:{title:"Setup Progress",description:"Complete these steps to get the most out of your platform.",steps:{orgUnit:{title:"Create at least 1 Organization Unit",button:"Create Unit"},employees:{title:"Add employees (at least 1)",buttonPrimary:"Import CSV",buttonSecondary:"Add Employee"},skills:{title:"Create skills (at least 3)",button:"Add Skills"},positions:{title:"Create position with requirements",button:"Define Requirements"},gaps:{title:"Generate Tomorrow's Gaps once",button:"Generate Gaps"}},complete:"Setup complete"},nav:{core:"Core",comingSoon:"Coming Soon"},sections:{overdue:"Overdue",dueSoon:"Due Soon",upcoming:"Upcoming"}}])},73320,a=>{"use strict";let b=(0,a.i(70106).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);a.s(["Upload",()=>b],73320)},6807,a=>{"use strict";let b=(0,a.i(70106).default)("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);a.s(["Workflow",()=>b],6807)},39761,a=>{"use strict";let b=(0,a.i(70106).default)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);a.s(["BarChart3",()=>b],39761)},21161,a=>{"use strict";let b=(0,a.i(70106).default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Settings",()=>b],21161)},79808,a=>{"use strict";let b=(0,a.i(70106).default)("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);a.s(["Wrench",()=>b],79808)},66803,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(50944),e=a.i(72131),f=a.i(70106);let g=(0,f.default)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),h=(0,f.default)("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);var i=a.i(73320),j=a.i(60246),k=a.i(21161);let l=(0,f.default)("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);var m=a.i(83497);let n=(0,f.default)("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);var o=a.i(4720),p=a.i(53722),q=a.i(3314),r=a.i(67900),s=a.i(39761),t=a.i(6807);let u=(0,f.default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var v=a.i(79808),w=a.i(24669);let x=(0,f.default)("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);var y=a.i(99806),z=a.i(47033),A=a.i(36395),B=a.i(70579),C=a.i(72221);function D({children:a}){let c=(0,C.useOrgState)();return(0,b.jsx)(C.OrgContext.Provider,{value:c,children:a})}var E=a.i(92e3);function F(){return"true"!==process.env.NEXT_PUBLIC_DEMO_MODE?null:(0,b.jsx)("div",{className:"bg-amber-50 dark:bg-amber-950 border-b border-amber-200 dark:border-amber-800 px-4 py-2","data-testid":"banner-demo-mode",children:(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[(0,b.jsx)(E.AlertCircle,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"Demo Mode: using sample data"}),(0,b.jsx)("span",{className:"text-amber-600 dark:text-amber-400",children:"|"}),(0,b.jsx)(c.default,{href:"/app/demo",className:"underline hover:no-underline","data-testid":"link-demo-script",children:"View Demo Script"})]})})}var G=a.i(60825);let H=[{name:"Dashboard",href:"/app/dashboard",icon:g},{name:"Setup",href:"/app/setup",icon:x},{name:"Employees",href:"/app/employees",icon:j.Users},{name:"Organization",href:"/app/org/overview",icon:r.Building2},{name:"Competence Matrix",href:"/app/competence-matrix",icon:h},{name:"Tomorrow's Gaps",href:"/app/gaps",icon:w.TrendingUp},{name:"Admin",href:"/app/admin",icon:v.Wrench,hrAdminOnly:!0}],I=[{name:"Manager Risks",href:"/app/manager/risks",icon:l},{name:"HR Analytics",href:"/app/hr/analytics",icon:s.BarChart3,hrAdminOnly:!0},{name:"HR Workflows",href:"/app/hr/workflows",icon:t.Workflow,hrAdminOnly:!0},{name:"Import Employees",href:"/app/import-employees",icon:i.Upload,hrAdminOnly:!0}],J=[{name:"Safety / Certificates",href:"/app/safety/certificates",icon:q.Shield},{name:"Equipment",href:"/app/equipment",icon:m.Package},{name:"Handbooks",href:"/app/handbooks",icon:p.BookOpen},{name:"Documents",href:"/app/documents",icon:o.FileText},{name:"News",href:"/app/news",icon:n}],K=[{name:"Settings",href:"/app/settings",icon:k.Settings},{name:"Debug",href:"/app/debug",icon:y.Bug}];function L({children:a}){let f=(0,d.usePathname)(),g=(0,d.useRouter)(),{user:h,loading:i,isAuthenticated:j}=(0,A.useAuth)(!0),[k,l]=(0,e.useState)(null);async function m(){try{await (0,B.signOut)(),g.push("/login")}catch(a){console.error("Sign out failed:",a)}}if((0,e.useEffect)(()=>{j&&(0,z.getCurrentUser)().then(l)},[j]),i)return(0,b.jsx)("div",{className:"flex h-screen items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,b.jsx)("div",{className:"text-gray-500 dark:text-gray-400",children:"Loading..."})});if(!j)return null;let n=a=>a.filter(a=>!a.hrAdminOnly||k?.role==="HR_ADMIN"),o=n(H),p=n(I),q=n(K),r=a=>{let d=f===a.href||f?.startsWith(a.href+"/"),e=a.icon;return(0,b.jsx)("li",{children:(0,b.jsxs)(c.default,{href:a.href,className:`flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors ${d?"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,"data-testid":`nav-${a.name.toLowerCase().replace(/\s+/g,"-")}`,children:[(0,b.jsx)(e,{className:"h-4 w-4"}),a.name]})},a.name)};return(0,b.jsx)(D,{children:(0,b.jsxs)("div",{className:"flex flex-col h-screen bg-gray-50 dark:bg-gray-900",children:[(0,b.jsx)(F,{}),(0,b.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,b.jsxs)("aside",{className:"w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col",children:[(0,b.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,b.jsx)("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Industrial Competence"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Platform"})]}),(0,b.jsxs)("nav",{className:"flex-1 p-4 overflow-y-auto",children:[(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("p",{className:"px-3 mb-2 text-xs font-semibold text-gray-400 dark:text-gray-500 uppercase tracking-wider",children:G.COPY.nav.core}),(0,b.jsx)("ul",{className:"space-y-1",children:o.map(r)})]}),p.length>0&&(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("p",{className:"px-3 mb-2 text-xs font-semibold text-gray-400 dark:text-gray-500 uppercase tracking-wider",children:"HR Tools"}),(0,b.jsx)("ul",{className:"space-y-1",children:p.map(r)})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("p",{className:"px-3 mb-2 text-xs font-semibold text-gray-400 dark:text-gray-500 uppercase tracking-wider",children:"More"}),(0,b.jsx)("ul",{className:"space-y-1",children:J.map(r)})]}),(0,b.jsx)("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:(0,b.jsx)("ul",{className:"space-y-1",children:q.map(r)})})]})]}),(0,b.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,b.jsxs)("header",{className:"h-16 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between px-6",children:[(0,b.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-300","data-testid":"text-user-email",children:h?.email||k?.email||"User"}),(0,b.jsxs)("button",{onClick:m,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors","data-testid":"button-signout",children:[(0,b.jsx)(u,{className:"h-4 w-4"}),"Sign out"]})]})]}),(0,b.jsx)("main",{className:"flex-1 overflow-auto",children:a})]})]})]})})}a.s(["default",()=>L],66803)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__44d86240._.js.map