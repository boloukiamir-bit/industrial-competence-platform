module.exports=[15618,a=>{"use strict";let b=(0,a.i(70106).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},96221,a=>{"use strict";let b=(0,a.i(70106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},32860,a=>{"use strict";let b=(0,a.i(70106).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);a.s(["ArrowRight",()=>b],32860)},67222,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(72221),f=a.i(7291),g=a.i(67900),h=a.i(15618),i=a.i(32860),j=a.i(96221);function k(){let{memberships:a,isLoading:k,selectOrg:l,refreshMemberships:m}=(0,e.useOrg)(),n=(0,d.useRouter)(),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(""),y=async a=>{a.preventDefault(),t(null),r(!0);try{let{data:{session:a}}=await f.supabase.auth.getSession();if(!a?.access_token){t("Not authenticated"),r(!1);return}let b=await fetch("/api/org/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.access_token}`},body:JSON.stringify({name:u,slug:w})}),c=await b.json();if(!b.ok){t(c.error||"Failed to create organization"),r(!1);return}await m(),l(c.organization.id),n.push("/app")}catch(a){console.error("Create org error:",a),t("Failed to create organization"),r(!1)}},z=a=>a.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").substring(0,50);return k?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background","data-testid":"loading-orgs",children:(0,b.jsx)(j.Loader2,{className:"w-6 h-6 animate-spin text-muted-foreground"})}):(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:(0,b.jsxs)("div",{className:"w-full max-w-md space-y-6",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(g.Building2,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)("h1",{className:"text-2xl font-semibold text-foreground","data-testid":"text-page-title",children:"Select Organization"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"Choose an organization to continue"})]}),a.length>0&&(0,b.jsx)("div",{className:"space-y-2",children:a.map(a=>(0,b.jsxs)("button",{onClick:()=>{l(a.org_id),n.push("/app")},className:"w-full p-4 rounded-lg border border-border bg-card hover-elevate flex items-center justify-between group","data-testid":`button-select-org-${a.org_id}`,children:[(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsx)("div",{className:"font-medium text-foreground",children:a.organization?.name}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:a.role.charAt(0).toUpperCase()+a.role.slice(1)})]}),(0,b.jsx)(i.ArrowRight,{className:"w-5 h-5 text-muted-foreground group-hover:text-foreground transition-colors"})]},a.org_id))}),(0,b.jsx)("div",{className:"border-t border-border pt-6",children:o?(0,b.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"org-name",className:"block text-sm font-medium text-foreground mb-1",children:"Organization Name"}),(0,b.jsx)("input",{id:"org-name",type:"text",value:u,onChange:a=>{v(a.target.value),w&&w!==z(u)||x(z(a.target.value))},placeholder:"Acme Corporation",className:"w-full px-3 py-2 rounded-md border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring",required:!0,"data-testid":"input-org-name"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"org-slug",className:"block text-sm font-medium text-foreground mb-1",children:"URL Slug"}),(0,b.jsx)("input",{id:"org-slug",type:"text",value:w,onChange:a=>x(z(a.target.value)),placeholder:"acme-corp",className:"w-full px-3 py-2 rounded-md border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring",required:!0,pattern:"^[a-z0-9-]+$","data-testid":"input-org-slug"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Lowercase letters, numbers, and hyphens only"})]}),s&&(0,b.jsx)("p",{className:"text-sm text-destructive","data-testid":"text-error",children:s}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>{p(!1),t(null)},className:"flex-1 px-4 py-2 rounded-md border border-border text-foreground hover-elevate","data-testid":"button-cancel-create",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:q,className:"flex-1 px-4 py-2 rounded-md bg-primary text-primary-foreground hover-elevate disabled:opacity-50 flex items-center justify-center gap-2","data-testid":"button-create-org",children:q?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Loader2,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):"Create"})]})]}):(0,b.jsxs)("button",{onClick:()=>p(!0),className:"w-full p-4 rounded-lg border border-dashed border-border hover-elevate flex items-center justify-center gap-2 text-muted-foreground hover:text-foreground","data-testid":"button-show-create-org",children:[(0,b.jsx)(h.Plus,{className:"w-5 h-5"}),"Create New Organization"]})})]})})}a.s(["default",()=>k])}];

//# sourceMappingURL=_e4b6367d._.js.map