{"version":3,"sources":["../../../../node_modules/lucide-react/src/icons/plus.ts","../../../../node_modules/lucide-react/src/icons/loader-circle.ts","../../../../node_modules/lucide-react/src/icons/arrow-right.ts","../../../../app/app/org/select/page.tsx"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Plus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSAxMmgxNCIgLz4KICA8cGF0aCBkPSJNMTIgNXYxNCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/plus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Plus = createLucideIcon('Plus', [\n  ['path', { d: 'M5 12h14', key: '1ays0h' }],\n  ['path', { d: 'M12 5v14', key: 's699le' }],\n]);\n\nexport default Plus;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name LoaderCircle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTJhOSA5IDAgMSAxLTYuMjE5LTguNTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/loader-circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst LoaderCircle = createLucideIcon('LoaderCircle', [\n  ['path', { d: 'M21 12a9 9 0 1 1-6.219-8.56', key: '13zald' }],\n]);\n\nexport default LoaderCircle;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ArrowRight\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSAxMmgxNCIgLz4KICA8cGF0aCBkPSJtMTIgNSA3IDctNyA3IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/arrow-right\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowRight = createLucideIcon('ArrowRight', [\n  ['path', { d: 'M5 12h14', key: '1ays0h' }],\n  ['path', { d: 'm12 5 7 7-7 7', key: 'xquz4c' }],\n]);\n\nexport default ArrowRight;\n","'use client';\n\nimport { useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useOrg } from '@/hooks/useOrg';\nimport { supabase } from '@/lib/supabaseClient';\nimport { Building2, Plus, ArrowRight, Loader2 } from 'lucide-react';\n\nexport default function OrgSelectPage() {\n  const { memberships, isLoading, selectOrg, refreshMemberships } = useOrg();\n  const router = useRouter();\n  const [showCreate, setShowCreate] = useState(false);\n  const [creating, setCreating] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [name, setName] = useState('');\n  const [slug, setSlug] = useState('');\n\n  const handleSelectOrg = (orgId: string) => {\n    selectOrg(orgId);\n    router.push('/app');\n  };\n\n  const handleCreateOrg = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    setCreating(true);\n\n    try {\n      const { data: { session } } = await supabase.auth.getSession();\n      if (!session?.access_token) {\n        setError('Not authenticated');\n        setCreating(false);\n        return;\n      }\n\n      const res = await fetch('/api/org/create', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${session.access_token}`,\n        },\n        body: JSON.stringify({ name, slug }),\n      });\n\n      const data = await res.json();\n\n      if (!res.ok) {\n        setError(data.error || 'Failed to create organization');\n        setCreating(false);\n        return;\n      }\n\n      // Refresh memberships and select new org\n      await refreshMemberships();\n      selectOrg(data.organization.id);\n      router.push('/app');\n    } catch (err) {\n      console.error('Create org error:', err);\n      setError('Failed to create organization');\n      setCreating(false);\n    }\n  };\n\n  const generateSlug = (value: string) => {\n    return value\n      .toLowerCase()\n      .replace(/[^a-z0-9\\s-]/g, '')\n      .replace(/\\s+/g, '-')\n      .replace(/-+/g, '-')\n      .substring(0, 50);\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-background\" data-testid=\"loading-orgs\">\n        <Loader2 className=\"w-6 h-6 animate-spin text-muted-foreground\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-background p-4\">\n      <div className=\"w-full max-w-md space-y-6\">\n        <div className=\"text-center\">\n          <Building2 className=\"w-12 h-12 mx-auto text-muted-foreground mb-4\" />\n          <h1 className=\"text-2xl font-semibold text-foreground\" data-testid=\"text-page-title\">\n            Select Organization\n          </h1>\n          <p className=\"text-muted-foreground mt-2\">\n            Choose an organization to continue\n          </p>\n        </div>\n\n        {memberships.length > 0 && (\n          <div className=\"space-y-2\">\n            {memberships.map((membership) => (\n              <button\n                key={membership.org_id}\n                onClick={() => handleSelectOrg(membership.org_id)}\n                className=\"w-full p-4 rounded-lg border border-border bg-card hover-elevate flex items-center justify-between group\"\n                data-testid={`button-select-org-${membership.org_id}`}\n              >\n                <div className=\"text-left\">\n                  <div className=\"font-medium text-foreground\">\n                    {membership.organization?.name}\n                  </div>\n                  <div className=\"text-sm text-muted-foreground\">\n                    {membership.role.charAt(0).toUpperCase() + membership.role.slice(1)}\n                  </div>\n                </div>\n                <ArrowRight className=\"w-5 h-5 text-muted-foreground group-hover:text-foreground transition-colors\" />\n              </button>\n            ))}\n          </div>\n        )}\n\n        <div className=\"border-t border-border pt-6\">\n          {!showCreate ? (\n            <button\n              onClick={() => setShowCreate(true)}\n              className=\"w-full p-4 rounded-lg border border-dashed border-border hover-elevate flex items-center justify-center gap-2 text-muted-foreground hover:text-foreground\"\n              data-testid=\"button-show-create-org\"\n            >\n              <Plus className=\"w-5 h-5\" />\n              Create New Organization\n            </button>\n          ) : (\n            <form onSubmit={handleCreateOrg} className=\"space-y-4\">\n              <div>\n                <label htmlFor=\"org-name\" className=\"block text-sm font-medium text-foreground mb-1\">\n                  Organization Name\n                </label>\n                <input\n                  id=\"org-name\"\n                  type=\"text\"\n                  value={name}\n                  onChange={(e) => {\n                    setName(e.target.value);\n                    if (!slug || slug === generateSlug(name)) {\n                      setSlug(generateSlug(e.target.value));\n                    }\n                  }}\n                  placeholder=\"Acme Corporation\"\n                  className=\"w-full px-3 py-2 rounded-md border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring\"\n                  required\n                  data-testid=\"input-org-name\"\n                />\n              </div>\n\n              <div>\n                <label htmlFor=\"org-slug\" className=\"block text-sm font-medium text-foreground mb-1\">\n                  URL Slug\n                </label>\n                <input\n                  id=\"org-slug\"\n                  type=\"text\"\n                  value={slug}\n                  onChange={(e) => setSlug(generateSlug(e.target.value))}\n                  placeholder=\"acme-corp\"\n                  className=\"w-full px-3 py-2 rounded-md border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring\"\n                  required\n                  pattern=\"^[a-z0-9-]+$\"\n                  data-testid=\"input-org-slug\"\n                />\n                <p className=\"text-xs text-muted-foreground mt-1\">\n                  Lowercase letters, numbers, and hyphens only\n                </p>\n              </div>\n\n              {error && (\n                <p className=\"text-sm text-destructive\" data-testid=\"text-error\">\n                  {error}\n                </p>\n              )}\n\n              <div className=\"flex gap-2\">\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setShowCreate(false);\n                    setError(null);\n                  }}\n                  className=\"flex-1 px-4 py-2 rounded-md border border-border text-foreground hover-elevate\"\n                  data-testid=\"button-cancel-create\"\n                >\n                  Cancel\n                </button>\n                <button\n                  type=\"submit\"\n                  disabled={creating}\n                  className=\"flex-1 px-4 py-2 rounded-md bg-primary text-primary-foreground hover-elevate disabled:opacity-50 flex items-center justify-center gap-2\"\n                  data-testid=\"button-create-org\"\n                >\n                  {creating ? (\n                    <>\n                      <Loader2 className=\"w-4 h-4 animate-spin\" />\n                      Creating...\n                    </>\n                  ) : (\n                    'Create'\n                  )}\n                </button>\n              </div>\n            </form>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","ignoreList":[0,1,2]}