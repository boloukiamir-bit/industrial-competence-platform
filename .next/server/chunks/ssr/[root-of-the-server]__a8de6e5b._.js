module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},70864,a=>{a.n(a.i(33290))},43619,a=>{a.n(a.i(79962))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},93782,a=>{a.n(a.i(28603))},73481,a=>{"use strict";var b=a.i(7997),c=a.i(62179);let d=[{name:"Anna Lindberg",employeeNumber:"E1001",role:"Operator",line:"Pressline 1",team:"Day",employmentType:"permanent",isActive:!0},{name:"Erik Johansson",employeeNumber:"E1002",role:"Operator",line:"Pressline 1",team:"Night",employmentType:"permanent",isActive:!0},{name:"Maria Svensson",employeeNumber:"E1003",role:"Team Leader",line:"Assembly",team:"Day",employmentType:"permanent",isActive:!0},{name:"Karl Andersson",employeeNumber:"E1004",role:"Operator",line:"Assembly",team:"Night",employmentType:"temporary",isActive:!0}],e=[{code:"PRESS_A",name:"Pressline A",category:"Production"},{code:"PRESS_B",name:"Pressline B",category:"Production"},{code:"5S",name:"5S Basics",category:"Lean"},{code:"SAFETY_BASIC",name:"Safety Basic",category:"Safety"},{code:"TRUCK_A1",name:"Truck A1 License",category:"Logistics"}],f={E1001:{PRESS_A:3,PRESS_B:2,"5S":4,SAFETY_BASIC:3,TRUCK_A1:1},E1002:{PRESS_A:2,PRESS_B:1,"5S":3,SAFETY_BASIC:2,TRUCK_A1:0},E1003:{PRESS_A:4,PRESS_B:3,"5S":4,SAFETY_BASIC:4,TRUCK_A1:2},E1004:{PRESS_A:1,PRESS_B:0,"5S":2,SAFETY_BASIC:1,TRUCK_A1:0}};async function g(){let{data:a,error:b}=await c.supabase.from("employees").select("id").limit(1);if(b)throw Error(`Failed to check employees table: ${b.message}`);if(a&&a.length>0)return;let{data:g,error:h}=await c.supabase.from("employees").insert(d.map(a=>({name:a.name,employee_number:a.employeeNumber,role:a.role,line:a.line,team:a.team,is_active:a.isActive}))).select();if(h)throw Error(`Failed to insert employees: ${h.message}`);let{data:i,error:j}=await c.supabase.from("skills").insert(e.map(a=>({code:a.code,name:a.name,category:a.category}))).select();if(j)throw Error(`Failed to insert skills: ${j.message}`);if(!g||!i)throw Error("Failed to get inserted employee or skill IDs");let k=new Map;for(let a of g)k.set(a.employee_number,a.id);let l=new Map;for(let a of i)l.set(a.code,a.id);let m=[];for(let[a,b]of Object.entries(f)){let c=k.get(a);if(c)for(let[a,d]of Object.entries(b)){let b=l.get(a);b&&m.push({employee_id:c,skill_id:b,level:d})}}let{error:n}=await c.supabase.from("employee_skills").insert(m);if(n)throw Error(`Failed to insert employee_skills: ${n.message}`)}async function h(){let{data:a,error:b}=await c.supabase.from("employees").select("line, team");if(b)throw Error(`Failed to fetch filter options: ${b.message}`);return{lines:[...new Set((a||[]).map(a=>a.line).filter(Boolean))].sort(),teams:[...new Set((a||[]).map(a=>a.team).filter(Boolean))].sort()}}async function i(a){let b=c.supabase.from("employees").select("*");a?.line&&(b=b.eq("line",a.line)),a?.team&&(b=b.eq("team",a.team));let[d,e,f]=await Promise.all([b,c.supabase.from("skills").select("*"),c.supabase.from("employee_skills").select("*")]);if(d.error)throw Error(`Failed to fetch employees: ${d.error.message}`);if(e.error)throw Error(`Failed to fetch skills: ${e.error.message}`);if(f.error)throw Error(`Failed to fetch employee_skills: ${f.error.message}`);let g=(d.data||[]).map(a=>({id:a.id,name:a.name,employeeNumber:a.employee_number,role:a.role,line:a.line,team:a.team,employmentType:a.employment_type||"permanent",isActive:a.is_active}));return{employees:g,skills:(e.data||[]).map(a=>({id:a.id,code:a.code,name:a.name,category:a.category,description:a.description})),employeeSkills:(f.data||[]).map(a=>({employeeId:a.employee_id,skillId:a.skill_id,level:a.level}))}}let j=[{value:0,label:"None",description:"No experience or training"},{value:1,label:"Basic",description:"Theoretical knowledge, needs supervision"},{value:2,label:"Intermediate",description:"Can perform with occasional guidance"},{value:3,label:"Advanced",description:"Fully independent, can train others"},{value:4,label:"Expert",description:"Subject matter expert, defines standards"}];function k(a){switch(a){case 0:default:return"bg-gray-200 dark:bg-gray-600";case 1:return"bg-red-400 dark:bg-red-600";case 2:return"bg-yellow-400 dark:bg-yellow-500";case 3:return"bg-green-300 dark:bg-green-500";case 4:return"bg-green-600 dark:bg-green-700"}}async function l({searchParams:a}){let c=await a,d=c.line||"",e=c.team||"";await g();let[{employees:f,skills:l,employeeSkills:m},n]=await Promise.all([i({line:d||void 0,team:e||void 0}),h()]);return(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6","data-testid":"heading-competence-matrix",children:"Competence Matrix"}),(0,b.jsxs)("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-md border border-gray-200 dark:border-gray-700 p-4",children:[(0,b.jsx)("h2",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Filters"}),(0,b.jsxs)("form",{method:"GET",className:"flex flex-wrap items-end gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"line-filter",className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Line"}),(0,b.jsxs)("select",{id:"line-filter",name:"line",defaultValue:d,className:"block w-40 px-3 py-2 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500","data-testid":"select-line-filter",children:[(0,b.jsx)("option",{value:"",children:"All Lines"}),n.lines.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"team-filter",className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Team"}),(0,b.jsxs)("select",{id:"team-filter",name:"team",defaultValue:e,className:"block w-40 px-3 py-2 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500","data-testid":"select-team-filter",children:[(0,b.jsx)("option",{value:"",children:"All Teams"}),n.teams.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]}),(0,b.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors","data-testid":"button-apply-filters",children:"Apply Filters"}),(d||e)&&(0,b.jsx)("a",{href:"/app/competence-matrix",className:"px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors","data-testid":"link-clear-filters",children:"Clear Filters"})]})]}),(0,b.jsxs)("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-md border border-gray-200 dark:border-gray-700 p-4",children:[(0,b.jsx)("h2",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Legend"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-4",children:j.map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:`w-6 h-6 rounded ${k(a.value)}`,"data-testid":`legend-level-${a.value}`}),(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsxs)("span",{className:"font-medium text-gray-900 dark:text-white",children:[a.value," - ",a.label]}),(0,b.jsxs)("span",{className:"text-gray-500 dark:text-gray-400 ml-1",children:["(",a.description,")"]})]})]},a.value))})]}),(0,b.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-md border border-gray-200 dark:border-gray-700 overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full","data-testid":"competence-matrix-table",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[(0,b.jsx)("th",{className:"text-left p-3 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-50 dark:bg-gray-700/50",children:"Employee"}),l.map(a=>(0,b.jsxs)("th",{className:"text-center p-3 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-50 dark:bg-gray-700/50 min-w-[100px]",children:[(0,b.jsx)("div",{children:a.code}),(0,b.jsx)("div",{className:"text-xs font-normal text-gray-500 dark:text-gray-400",children:a.name})]},a.id))]})}),(0,b.jsx)("tbody",{children:0===f.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:l.length+1,className:"p-6 text-center text-gray-500 dark:text-gray-400","data-testid":"no-results-message",children:"No employees match the selected filters."})}):f.map((a,c)=>(0,b.jsxs)("tr",{className:c<f.length-1?"border-b border-gray-200 dark:border-gray-700":"","data-testid":`row-employee-${a.id}`,children:[(0,b.jsxs)("td",{className:"p-3",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a.name}),(0,b.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[a.role," - ",a.team]})]}),l.map(c=>{var d,e;let f,g=(d=a.id,e=c.id,(f=m.find(a=>a.employeeId===d&&a.skillId===e))?f.level:0);return(0,b.jsx)("td",{className:"p-3 text-center",children:(0,b.jsx)("div",{className:`inline-flex items-center justify-center w-8 h-8 rounded text-sm font-medium text-gray-900 dark:text-white ${k(g)}`,"data-testid":`cell-${a.id}-${c.id}`,children:g})},c.id)})]},a.id))})]})})})]})}a.s(["default",()=>l,"dynamic",0,"force-dynamic"],73481)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__a8de6e5b._.js.map