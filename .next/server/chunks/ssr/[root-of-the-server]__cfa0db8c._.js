module.exports=[36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},88347,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e={ACTION_HMR_REFRESH:function(){return k},ACTION_NAVIGATE:function(){return h},ACTION_REFRESH:function(){return g},ACTION_RESTORE:function(){return i},ACTION_SERVER_ACTION:function(){return l},ACTION_SERVER_PATCH:function(){return j},PrefetchKind:function(){return m}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let g="refresh",h="navigate",i="restore",j="server-patch",k="hmr-refresh",l="server-action";var m=((d={}).AUTO="auto",d.FULL="full",d.TEMPORARY="temporary",d);("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},67009,(a,b,c)=>{"use strict";function d(a){return null!==a&&"object"==typeof a&&"then"in a&&"function"==typeof a.then}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"isThenable",{enumerable:!0,get:function(){return d}})},90841,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={dispatchAppRouterAction:function(){return i},useActionQueue:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(46058)._(a.r(72131)),g=a.r(67009),h=null;function i(a){if(null===h)throw Object.defineProperty(Error("Internal Next.js error: Router action dispatched before initialization."),"__NEXT_ERROR_CODE",{value:"E668",enumerable:!1,configurable:!0});h(a)}function j(a){let[b,c]=f.default.useState(a.state);h=b=>a.dispatch(b,c);let d=(0,f.useMemo)(()=>b,[b]);return(0,g.isThenable)(d)?(0,f.use)(d):d}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},20611,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"callServer",{enumerable:!0,get:function(){return g}});let d=a.r(72131),e=a.r(88347),f=a.r(90841);async function g(a,b){return new Promise((c,g)=>{(0,d.startTransition)(()=>{(0,f.dispatchAppRouterAction)({type:e.ACTION_SERVER_ACTION,actionId:a,actionArgs:b,resolve:c,reject:g})})})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},1722,(a,b,c)=>{"use strict";let d;Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"findSourceMapURL",{enumerable:!0,get:function(){return d}});("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},15618,a=>{"use strict";let b=(0,a.i(70106).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},33508,a=>{"use strict";let b=(0,a.i(70106).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["X",()=>b],33508)},70579,a=>{"use strict";var b=a.i(7291);async function c(a,c){let{data:d,error:e}=await b.supabase.auth.signInWithPassword({email:a,password:c});if(e)throw e;return d}async function d(){let{error:a}=await b.supabase.auth.signOut();if(a)throw a}async function e(){let{data:a,error:c}=await b.supabase.auth.getUser();return c?null:a.user}async function f(){let{data:a,error:c}=await b.supabase.auth.getSession();return c?null:a.session}function g(a){return b.supabase.auth.onAuthStateChange(a)}a.s(["getAuthUser",()=>e,"getSession",()=>f,"onAuthStateChange",()=>g,"signInWithEmail",()=>c,"signOut",()=>d])},35227,a=>{"use strict";var b=a.i(72131),c=a.i(50944),d=a.i(70579);function e(){let[a,e]=(0,b.useState)(!0),f=(0,c.useRouter)();return(0,b.useEffect)(()=>{let a=!0;return async function(){try{!await (0,d.getAuthUser)()&&a?f.replace("/login"):a&&e(!1)}catch(b){console.error("Error checking auth",b),a&&f.replace("/login")}}(),()=>{a=!1}},[f]),{loading:a}}a.s(["useAuthGuard",()=>e])},21161,a=>{"use strict";let b=(0,a.i(70106).default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Settings",()=>b],21161)},92169,a=>{"use strict";var b=a.i(7291);async function c(){let{data:a,error:c}=await b.supabase.from("competence_groups").select("id, name, description, sort_order").order("sort_order",{ascending:!0}).order("name",{ascending:!0});if(c)throw c;return a??[]}async function d(a){let{error:c}=await b.supabase.from("competence_groups").insert({name:a.name,description:a.description??null});if(c)throw c}async function e(a,c){let{error:d}=await b.supabase.from("competence_groups").update(c).eq("id",a);if(d)throw d}async function f(){let{data:a,error:c}=await b.supabase.from("competences").select("id, group_id, code, name, description, is_safety_critical, active").order("name",{ascending:!0});if(c)throw c;return a??[]}async function g(a){let{error:c}=await b.supabase.from("competences").insert({name:a.name,code:a.code??null,group_id:a.group_id??null,description:a.description??null,is_safety_critical:a.is_safety_critical??!1,active:!0});if(c)throw c}async function h(a,c){let{error:d}=await b.supabase.from("competences").update(c).eq("id",a);if(d)throw d}async function i(){let{data:a,error:c}=await b.supabase.from("positions").select("id, name, description, site, department").order("name",{ascending:!0});if(c)throw c;return(a??[]).map(a=>({...a,min_headcount:null}))}async function j(a){let{data:c,error:d}=await b.supabase.from("positions").select("id, name, description, site, department").eq("id",a).single();if(d){if("PGRST116"===d.code)return null;throw d}return{...c,min_headcount:null}}async function k(a){let{error:c}=await b.supabase.from("positions").insert({name:a.name,description:a.description??null,site:a.site??null,department:a.department??null});if(c)throw c}async function l(a){let{data:c,error:d}=await b.supabase.from("position_competence_requirements").select("id, competence_id, required_level, mandatory, notes").eq("position_id",a).order("required_level",{ascending:!1});if(d)throw d;return c??[]}async function m(a){let{error:c}=await b.supabase.from("position_competence_requirements").insert({position_id:a.position_id,competence_id:a.competence_id,required_level:a.required_level,mandatory:a.mandatory,notes:a.notes??null});if(c)throw c}async function n(a,c){let{error:d}=await b.supabase.from("position_competence_requirements").update(c).eq("id",a);if(d)throw d}async function o(a){let{error:c}=await b.supabase.from("position_competence_requirements").delete().eq("id",a);if(c)throw c}a.s(["createCompetence",()=>g,"createCompetenceGroup",()=>d,"createPosition",()=>k,"createPositionRequirement",()=>m,"deletePositionRequirement",()=>o,"getPositionById",()=>j,"listCompetenceGroups",()=>c,"listCompetences",()=>f,"listPositionRequirements",()=>l,"listPositions",()=>i,"updateCompetence",()=>h,"updateCompetenceGroup",()=>e,"updatePositionRequirement",()=>n])},9799,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(35227),e=a.i(38246),f=a.i(92169),g=a.i(15618),h=a.i(21161),i=a.i(33508);function j(){let{loading:a}=(0,d.useAuthGuard)(),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)({name:"",description:"",site:"",department:"",min_headcount:""}),[r,s]=(0,c.useState)(!1);async function t(){try{m(!0);let a=await (0,f.listPositions)();k(a)}catch(a){o("Failed to load positions"),console.error(a)}finally{m(!1)}}async function u(){if(!p.name.trim())return void alert("Name is required");try{s(!0),await (0,f.createPosition)({name:p.name,description:p.description||void 0,site:p.site||void 0,department:p.department||void 0,min_headcount:p.min_headcount?parseInt(p.min_headcount):void 0}),q({name:"",description:"",site:"",department:"",min_headcount:""}),t()}catch(a){console.error(a),alert("Failed to create position")}finally{s(!1)}}return((0,c.useEffect)(()=>{a||t()},[a]),a)?(0,b.jsx)("main",{className:"hr-page",children:(0,b.jsx)("p",{children:"Checking accessâ€¦"})}):l?(0,b.jsx)("main",{className:"hr-page",children:(0,b.jsx)("p",{className:"hr-page__subtitle",children:"Loading..."})}):n?(0,b.jsx)("main",{className:"hr-page",children:(0,b.jsx)("p",{className:"hr-error",children:n})}):(0,b.jsxs)("main",{className:"hr-page",children:[(0,b.jsx)("div",{className:"hr-page__header",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"hr-page__title",children:"Positions"}),(0,b.jsx)("p",{className:"hr-page__subtitle",children:"Define roles, their headcount targets and context (site, department)."})]})}),(0,b.jsxs)("nav",{className:"hr-breadcrumb",style:{marginBottom:16},children:[(0,b.jsx)(e.default,{href:"/app/hr/tasks",className:"hr-breadcrumb__link",children:"Dashboard"}),(0,b.jsx)("span",{className:"hr-breadcrumb__separator",children:"/"}),(0,b.jsx)("span",{children:"Positions"})]}),(0,b.jsxs)("div",{className:"admin-grid",style:{gridTemplateColumns:"2fr 1fr"},children:[(0,b.jsxs)("div",{className:"hr-card","data-testid":"panel-positions",children:[(0,b.jsx)("div",{className:"hr-section__title",style:{padding:"12px 16px",borderBottom:"1px solid var(--hr-border)"},children:"Positions"}),(0,b.jsx)("div",{style:{padding:16},children:0===j.length?(0,b.jsx)("p",{className:"hr-muted",style:{textAlign:"center",padding:24},children:"No positions yet. Create your first position to get started."}):(0,b.jsxs)("table",{className:"hr-table",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"Name"}),(0,b.jsx)("th",{children:"Site"}),(0,b.jsx)("th",{children:"Department"}),(0,b.jsx)("th",{style:{width:100},children:"Min Headcount"}),(0,b.jsx)("th",{style:{width:100},children:"Requirements"})]})}),(0,b.jsx)("tbody",{children:j.map(a=>(0,b.jsxs)("tr",{"data-testid":`position-row-${a.id}`,children:[(0,b.jsxs)("td",{children:[(0,b.jsx)("div",{style:{fontWeight:500},children:a.name}),a.description&&(0,b.jsx)("div",{className:"hr-muted",style:{fontSize:13},children:a.description})]}),(0,b.jsx)("td",{children:a.site||"-"}),(0,b.jsx)("td",{children:a.department||"-"}),(0,b.jsx)("td",{children:a.min_headcount??"-"}),(0,b.jsx)("td",{children:(0,b.jsx)(e.default,{href:`/admin/positions/${a.id}/requirements`,children:(0,b.jsxs)("button",{className:"hr-button hr-button--secondary hr-button--sm","data-testid":`button-requirements-${a.id}`,children:[(0,b.jsx)(h.Settings,{size:14})," Edit"]})})})]},a.id))})]})})]}),(0,b.jsxs)("div",{className:"hr-card","data-testid":"panel-create-position",children:[(0,b.jsx)("div",{className:"hr-section__title",style:{padding:"12px 16px",borderBottom:"1px solid var(--hr-border)"},children:"Create New Position"}),(0,b.jsxs)("div",{style:{padding:16},children:[(0,b.jsxs)("div",{className:"hr-form-field",children:[(0,b.jsx)("label",{className:"hr-form-label",children:"Name *"}),(0,b.jsx)("input",{type:"text",className:"hr-input",value:p.name,onChange:a=>q({...p,name:a.target.value}),placeholder:"e.g., CNC Operator","data-testid":"input-position-name"})]}),(0,b.jsxs)("div",{className:"hr-form-field",children:[(0,b.jsx)("label",{className:"hr-form-label",children:"Description"}),(0,b.jsx)("textarea",{className:"hr-textarea",value:p.description,onChange:a=>q({...p,description:a.target.value}),placeholder:"Optional description",rows:2,"data-testid":"input-position-description"})]}),(0,b.jsxs)("div",{className:"hr-form-field",children:[(0,b.jsx)("label",{className:"hr-form-label",children:"Site"}),(0,b.jsx)("input",{type:"text",className:"hr-input",value:p.site,onChange:a=>q({...p,site:a.target.value}),placeholder:"e.g., Gothenburg","data-testid":"input-position-site"})]}),(0,b.jsxs)("div",{className:"hr-form-field",children:[(0,b.jsx)("label",{className:"hr-form-label",children:"Department"}),(0,b.jsx)("input",{type:"text",className:"hr-input",value:p.department,onChange:a=>q({...p,department:a.target.value}),placeholder:"e.g., Production","data-testid":"input-position-department"})]}),(0,b.jsxs)("div",{className:"hr-form-field",children:[(0,b.jsx)("label",{className:"hr-form-label",children:"Min Headcount"}),(0,b.jsx)("input",{type:"number",className:"hr-input",value:p.min_headcount,onChange:a=>q({...p,min_headcount:a.target.value}),placeholder:"e.g., 2",min:"0","data-testid":"input-position-min-headcount"})]}),(0,b.jsxs)("div",{style:{display:"flex",gap:8,marginTop:16},children:[(0,b.jsxs)("button",{className:"hr-button hr-button--primary",onClick:u,disabled:r,"data-testid":"button-create-position",children:[(0,b.jsx)(g.Plus,{size:14})," ",r?"Creating...":"Create Position"]}),(0,b.jsxs)("button",{className:"hr-button hr-button--ghost",onClick:function(){q({name:"",description:"",site:"",department:"",min_headcount:""})},disabled:r,children:[(0,b.jsx)(i.X,{size:14})," Clear"]})]})]})]})]})]})}a.s(["default",()=>j])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__cfa0db8c._.js.map